{"pageProps":{"post":{"slug":"github-actionå®æˆ˜:-è‡ªåŠ¨åŒ–æ„å»ºrelease","content":"\nè‡ªä»ä¸Šæ¬¡æˆ‘å¼€å‘å®Œæˆè‡ªå·±çš„ chrome æ‰©å±•ç¨‹åº\"å²š\"ä¹‹åï¼Œä¸€ç›´ä¸æ–­å¯¹å…¶è¿›è¡Œä¼˜åŒ–å’ŒåŠŸèƒ½å¢å¼ºï¼Œåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½æ˜¯æ‰‹åŠ¨æ„å»ºå’Œæ‰“åŒ…ï¼Œå†ä¸Šä¼ åˆ° github releaseï¼Œæ˜¨å¤©å­¦ä¹ äº†å¦‚ä½•é€šè¿‡ github action è¿›è¡Œè‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒåˆ° releaseï¼Œå› æ­¤åœ¨è¿™é‡Œåˆ†äº«ä¸€ä¸‹ã€‚\n\n### æ„å»ºå·¥ä½œæµåŸºç¡€\n\n> github action marketplace æä¾›è®¸å¤šå¼€å‘è€…åˆ†äº«çš„ action è„šæœ¬ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ github ä»“åº“é¡µé¢è®¾ç½®å·¥ä½œæµ\n\nä¸ºäº†å¢å¼ºå®è·µç»éªŒï¼Œæˆ‘åœ¨æœ¬åœ°é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ä¸€æ­¥æ­¥åˆ›å»º`workflows`æ‰€éœ€çš„æ–‡ä»¶ã€‚\n\nè®©æˆ‘ä»¬ä¸€æ­¥æ­¥åœ°åˆ›å»ºä¸€ä¸ªå·¥ä½œæµï¼š\n\n- åœ¨é¡¹ç›®çš„æ ¹ç›®å½•åˆ›å»º`.github`ç›®å½•ï¼Œå†…éƒ¨å†åˆ›å»º`workflows`ç›®å½•ç”¨äºå­˜æ”¾å·¥ä½œæµé…ç½®æ–‡ä»¶ã€‚\n- åœ¨`.github/workflows`ä¸­åˆ›å»ºé…ç½®æ–‡ä»¶`demo.yml`(æ³¨æ„æ‰©å±•å)ã€‚\n- ç¼–è¾‘`demo.yml`é…ç½®æ–‡ä»¶\n\næ¥ç€ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä»…ç”¨äºè¯´æ˜å’Œç†è§£`action`çš„ç¤ºä¾‹é…ç½®ï¼š\n\n```yaml\nname: GitHub Actions Demo\non: [push]\njobs:\n  Explore-GitHub-Actions:\n    runs-on: ubuntu-latest\n    steps:\n      - run: echo \"ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event.\"\n      - run: echo \"ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!\"\n      - run: echo \"ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}.\"\n      - name: Check out repository code\n        uses: actions/checkout@v2\n      - run: echo \"ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner.\"\n      - run: echo \"ğŸ–¥ï¸ The workflow is now ready to test your code on the runner.\"\n      - name: List files in the repository\n        run: |\n          ls ${{ github.workspace }}\n      - run: echo \"ğŸ This job's status is ${{ job.status }}.\"\n\n```\n\næ¯ä¸€ä¸ªå¤æ‚çš„`action`éƒ½æ˜¯ç”±ç®€å•çš„é¡¹é…ç½®ç»„æˆçš„ï¼Œ`workflows`ä¸‹å¯ä»¥æœ‰å¤šä¸ª`action`ï¼Œæ¯ä¸€ä¸ª`action`éƒ½æœ‰è‡ªå·±å¯é€‰çš„`name`å±æ€§ï¼ˆå¦‚æœä¸å†™ï¼Œåˆ™åœ¨ä»“åº“çš„æ“ä½œé€‰é¡¹å¡ä¸­ä¸ä¼šæ˜¾ç¤ºï¼‰ã€‚\n\næ¯ä¸€ä¸ª`action`éƒ½æ˜¯äº‹ä»¶è§¦å‘çš„ï¼Œä¸Šè¿°`on`é…ç½®æŒ‡å®šäº†æ‰€æœ‰`push`äº‹ä»¶éƒ½ä¼šè§¦å‘å¹¶ä¸”æ‰§è¡Œæ­¤`action`ã€‚\n\nå…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\n\n```bash\n# å•ä¸ªäº‹ä»¶\non: push\n# å¤šä¸ªäº‹ä»¶\non: [push, pull, fork]\n```\n\nå¤šä¸ªäº‹ä»¶åªéœ€ä¸€ä¸ªå³å¯è§¦å‘å·¥ä½œæµï¼Œå¦‚æœåŒæ—¶è§¦å‘å¤šä¸ªäº‹ä»¶ï¼Œåˆ™ä¼šè§¦å‘å¤šä¸ªå·¥ä½œæµã€‚\n\n> æ›´å¤šå·¥ä½œæµè§¦å‘è¯­æ³•ï¼š[GitHub Actions çš„å·¥ä½œæµç¨‹è¯­æ³• - GitHub Docs](https://docs.github.com/cn/actions/using-workflows/workflow-syntax-for-github-actions#onpushpull_requestpull_request_targetpathspaths-ignore)\n\nåœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä½¿ç”¨ç­›é€‰å™¨æ¥æ§åˆ¶äº‹ä»¶è§¦å‘æœºåˆ¶ã€‚\n\n```yaml\non:\n\tpush:\n\t\tbranches:\n\t\t\t- main\n\t\t\t- 'release/**'\n```\n\nå¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶`action`åœ¨`main`æˆ–`release`ç›¸å…³åˆ†æ”¯`push`æ—¶æ‰è§¦å‘ï¼Œç”šè‡³å¯ä»¥é™å®š`action`åœ¨`label`æ“ä½œæ—¶è§¦å‘ï¼š\n\n```yaml\non:\n\tlabel:\n\t\ttypes:\n\t\t\t- created\n\tpush:\n\t\tbranches:\n\t\t\t- main\n\t\ttags:\n\t\t\t- 'v*'\n```\n\nå¦‚ä¸Šæ‰€ç¤ºï¼Œåœ¨`push main`åˆ†æ”¯ä¸”å…·æœ‰`v`å¼€å¤´çš„`tag`æ ‡ç­¾æ—¶æˆ–è€…åœ¨`label`åˆ›å»ºæ—¶è§¦å‘ã€‚\n\nåŒæ—¶ï¼Œæ”¯æŒ`excluding`æ’é™¤æ¡ä»¶ï¼š\n\n```yaml\non:\n\tpush:\n\t\tbranches-ignore:\n\t\t\t- test\n```\n\næ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›æœ‰ç”¨çš„æ¡ä»¶é™åˆ¶ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸å¸Œæœ›ä»…ä»…æ˜¯æ›´æ–°äº†`readme`æ–‡ä»¶ï¼Œæˆ–æ˜¯`docs`ç›®å½•ä¸‹çš„æ–‡æ¡£æ—¶è§¦å‘`action`ï¼Œæ­¤æ—¶å¯ä»¥ï¼š\n\n```yaml\non:\n\tpush:\n\t\tpaths-ignore:\n\t\t\t- 'docs/**'\n```\n\nä»¥æ­¤æ’é™¤`docs`ç›®å½•ä¸‹çš„`push`è¡Œä¸ºå¼•èµ·ä¸å¿…è¦çš„å·¥ä½œæµã€‚\n\næ­¤å¤–ï¼Œè¿˜åŒ…æ‹¬ä¸€äº›å…¶ä»–é™å®šè§¦å‘`action`çš„åœºæ™¯ï¼Œåœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™å¯ä»¥æŸ¥é˜…æ–‡æ¡£ã€‚\n\næ¥ä¸Šæ–‡ï¼Œåœ¨è§¦å‘æœºåˆ¶ä¹‹ä¸‹ä¾¿æ˜¯ä½œä¸šç»„åˆï¼š`jobs`ã€‚\n\nä½œä¸šç»„åˆä¸‹å¯ä»¥æœ‰å¤šä¸ªå…·å`job`ï¼Œæ¯ä¸€ä¸ª`job`çš„æ ¼å¼éƒ½ä¸€æ ·ï¼Œæˆ‘ä»¬çœ‹ç¤ºä¾‹ï¼š\n\n```yaml\nExplore-GitHub-Actions:\n\truns-on: ubuntu-latest\n    steps:\n      - run: echo \"ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event.\"\n      - run: echo \"ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!\"\n      - run: echo \"ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}.\"\n      - name: Check out repository code\n        uses: actions/checkout@v2\n      - run: echo \"ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner.\"\n      - run: echo \"ğŸ–¥ï¸ The workflow is now ready to test your code on the runner.\"\n      - name: List files in the repository\n        run: |\n          ls ${{ github.workspace }}\n      - run: echo \"ğŸ This job's status is ${{ job.status }}.\"\n```\n\n`runs-on`é…ç½®ä½œä¸šè¿è¡Œçš„ç¯å¢ƒï¼Œ`github`å°†ä¼šå°†ä»»åŠ¡æ´¾å‘åˆ°æŒ‡å®šç±»å‹çš„è™šæ‹Ÿæœºå®¹å™¨ä¸­è¿è¡Œã€‚\n\næ­¤å¤–ï¼Œä¾¿æ˜¯æ•´ä¸ª`job`çš„æ­¥éª¤ï¼Œæ­¥éª¤å¯ä»¥åŒ…å«ä»¥ä¸‹ç±»å‹çš„é…ç½®ï¼š\n\n- `run`ï¼šæ‰§è¡ŒæŒ‡å®šè¿è¡Œç¯å¢ƒçš„å‘½ä»¤\n\n- `name`ï¼šå•ä¸€æ­¥éª¤çš„åå­—\n\n- `uses`ï¼šä½¿ç”¨`action marketplace`ä¸Šå…¬å¼€çš„è„šæœ¬ï¼Œä¾¿äºæˆ‘ä»¬å¿«é€Ÿå®ç°éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„è„šæœ¬è€Œä¸æ˜¯æ¯ä¸€å¤„éƒ½è‡ªå·±å†™ã€‚ä¸Šè¿°`actions/checkout@v2`å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å°†æˆ‘ä»¬çš„ä»“åº“æ£€å‡ºåˆ°è¿è¡Œç¯å¢ƒä¸Šå»ã€‚\n\n> åœ¨ github repo é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥ä»`action`é¡µé¢è¿›å…¥æŸ¥çœ‹å½“å‰æˆ–å†å²`action`è®°å½•\n\n\n\n### éƒ¨ç½²å®è·µ\n\né¦–å…ˆï¼Œæ¥çœ‹çœ‹éœ€æ±‚å¦‚ä½•ï¼š\n\n- å°†ä»£ç æ£€å‡ºåˆ°è¿è¡Œç¯å¢ƒï¼Œå®‰è£…`yarn`å¹¶ä¸”æ‰“åŒ…æ„å»º\n- ä¿å­˜å’Œåˆ†äº«æ‰“åŒ…ä¿¡æ¯\n- å‹ç¼©æ‰“åŒ…æ–‡ä»¶\n- åˆ›å»º`release`å¹¶ä¸”ä¸Šä¼ æ‰“åŒ…åçš„å‹ç¼©æ–‡ä»¶åˆ°`release`\n\nçœ‹ä»£ç ï¼š\n\n```yaml\nname: è‡ªåŠ¨æ‰“åŒ…å‘å¸ƒ\non:\n  push:\n    tags:\n      - \"v*\"\njobs:\n  build-dist:\n    name: æ„å»º chrome æ‰©å±•ç¨‹åºå®‰è£…åŒ…\n    runs-on: ubuntu-latest\n    steps:\n      # å‡†å¤‡æºç \n      - name: æ£€å‡ºä»£ç \n        uses: actions/checkout@v2\n      - name: å‡†å¤‡ yarn ç¯å¢ƒ\n        uses: borales/actions-yarn@v2.3.0\n      # å®‰è£…åº“å¹¶æ„å»º\n      - run: yarn\n      - run: yarn build\n\n      - name: ä¸Šä¼ å…±äº«çš„æ•°æ®\n        uses: actions/upload-artifact@v2\n        with:\n          name: dist\n          path: dist/\n\n  release:\n    name: å‘å¸ƒç‰ˆæœ¬\n    runs-on: ubuntu-latest\n    needs: build-dist\n    steps:\n      - name: ä¸‹è½½å…±äº«æ•°æ®\n        uses: actions/download-artifact@v2\n        with:\n          name: dist\n      - name: å‹ç¼©æ–‡ä»¶\n        uses: thedoctor0/zip-release@master\n        with:\n          type: \"zip\"\n          filename: lan.zip\n          exclusions: \"*.git* /*node_modules/* .editorconfig\"\n\n      - name: Create Github Release\n        id: create_release\n        uses: actions/create-release@v1\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # This token is provided by Actions, you do not need to create your own token\n        with:\n          tag_name: ${{ github.ref_name }}\n          release_name: Release ${{ github.ref_name }}\n          draft: false\n          prerelease: false\n\n      - name: Upload Release Asset\n        id: upload-release-asset\n        uses: actions/upload-release-asset@v1\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n        with:\n        \t# outputs æ˜¯ç”± create_release çš„ action è„šæœ¬å†…å®šä¹‰çš„è¾“å‡º\n          upload_url: ${{ steps.create_release.outputs.upload_url }}\n          asset_path: ./lan.zip\n          asset_name: lan_${{ github.ref_name }}.zip\n          asset_content_type: application/zip\n```\n\n\n\n> è¿™ç¯‡ğŸ“’å†…å®¹ä»…ä»…å‘å¸ƒåœ¨åšå®¢ï¼Œæˆ‘æ„è¯†åˆ°å½“è‡ªå·±ä¸ç†Ÿæ‚‰æŸä¸ªæŠ€æœ¯æ—¶ï¼Œä¸åº”è¯¥åšä»»ä½•åˆ†äº«ã€‚ä¸€çŸ¥åŠè§£çš„åˆ†äº«æ¯«æ— æ„ä¹‰ã€‚\n\n\n\n### å‚è€ƒ\n\n> å®˜æ–¹æ–‡æ¡£æ˜¯æœ€ä½³çš„å‚è€ƒï¼Œé˜…è¯»æ—¶åªéœ€ä¿æŒè€å¿ƒ\n\n- [GitHub Actions å¿«é€Ÿå…¥é—¨ - GitHub Docs](https://docs.github.com/cn/actions/quickstart)\n- [GitHub Actions å…¥é—¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—](https://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html)\n- [è‡ªä¸‹è€Œä¸Šçš„github actionsä½¿ç”¨æ•™ç¨‹ - å¢¨å¤©è½®](https://www.modb.pro/db/46505)\n- [ä½ çŸ¥é“ä»€ä¹ˆæ˜¯ GitHub Action ä¹ˆï¼Ÿ - æå®¢æŒ–æ˜æœº - åšå®¢å›­](https://www.cnblogs.com/babycomeon/p/12771624.html)\n","title":"github actionå®æˆ˜: è‡ªåŠ¨åŒ–æ„å»ºrelease","date":"2022/4/4","tags":["è‡ªåŠ¨åŒ–","github action"],"mainImg":"https://images.unsplash.com/photo-1592424002053-21f369ad7fdb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDkwNTkxOTU&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1592424002053-21f369ad7fdb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDkwNTkxOTU&ixlib=rb-1.2.1&q=80&w=400","intro":"åˆæ­¥å°è¯•åˆ©ç”¨ github action è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒ release åŒ…ã€‚"}},"__N_SSG":true}