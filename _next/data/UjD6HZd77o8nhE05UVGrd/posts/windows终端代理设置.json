{"pageProps":{"post":{"slug":"windows终端代理设置","contentHtml":"<p>办公电脑是一台老旧的台式机，而且公司采购了加密软件，无法适配<code>linux</code>系统,我只能使用<code>windows+wsl</code>作为日常使用环境.在日常使用中,经常需要走向世界去搜索或者阅读和下载源码,因此我有一个过墙梯也是很合理的对吧.</p>\n<h1>1. WSL proxy</h1>\n<p>对于<code>wsl</code>,首先需呀查看<code>resovle.conf</code>文件,获取网关地址,也就是主机地址.</p>\n<pre><code class=\"hljs language-shell\"><span class=\"lineNumber\">1</span>➜  ~ cat /etc/resolv.conf \n<span class=\"lineNumber\">2</span><span class=\"hljs-meta\">#</span><span class=\"bash\"> This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span>\n<span class=\"lineNumber\">3</span><span class=\"hljs-meta\">#</span><span class=\"bash\"> [network]</span>\n<span class=\"lineNumber\">4</span><span class=\"hljs-meta\">#</span><span class=\"bash\"> generateResolvConf = <span class=\"hljs-literal\">false</span></span>\n<span class=\"lineNumber\">5</span>nameserver 172.31.208.1</code></pre> \n\n<p>得到<code>主机地址</code>是 172.23.160.1 ,于是修改默认shell的配置文件,我使用的是<code>zsh</code>,因此直接对<code>~/.zshrc</code>进行修改.</p>\n<pre><code class=\"hljs language-shell\"><span class=\"lineNumber\">1</span><span class=\"hljs-meta\">#</span><span class=\"bash\"> .zshrc</span>\n<span class=\"lineNumber\">2</span>function set-proxy(){\n<span class=\"lineNumber\">3</span>        export https_proxy=172.31.208.1:10800\n<span class=\"lineNumber\">4</span>        export http_proxy=172.31.208.1:10800\n<span class=\"lineNumber\">5</span>}\n<span class=\"lineNumber\">6</span> \n<span class=\"lineNumber\">7</span>function clear-proxy(){\n<span class=\"lineNumber\">8</span>        unset http_proxy\n<span class=\"lineNumber\">9</span>        unset https_proxy\n<span class=\"lineNumber\">10</span>}</code></pre> \n\n<p>直接使用两个函数进行绑定代理,代理地址是上述解析到的主机地址,端口则是代理软件设置的端口号.</p>\n<h1>2. Powershell Proxy</h1>\n<p>在<code>windows</code>下,我习惯使用最新版本的<code>powershell</code>,直接在终端进行操作:</p>\n<pre><code class=\"hljs language-powershell\"><span class=\"lineNumber\">1</span><span class=\"hljs-comment\"># 记事本打开配置文件,没有则先创建</span>\n<span class=\"lineNumber\">2</span>notepad <span class=\"hljs-variable\">$profile</span>\n<span class=\"lineNumber\">3</span> \n<span class=\"lineNumber\">4</span><span class=\"hljs-comment\"># 编辑文件</span>\n<span class=\"lineNumber\">5</span><span class=\"hljs-comment\"># 添加函数</span>\n<span class=\"lineNumber\">6</span><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">set-proxy</span><span class=\"hljs-params\">()</span></span> {\n<span class=\"lineNumber\">7</span>\t<span class=\"hljs-variable\">$Env:https_proxy</span>=<span class=\"hljs-string\">\"http://your_ip:port\"</span>\n<span class=\"lineNumber\">8</span>\t<span class=\"hljs-variable\">$Env:http_proxy</span>=<span class=\"hljs-string\">\"http://your_ip:port\"</span>\n<span class=\"lineNumber\">9</span>}\n<span class=\"lineNumber\">10</span> \n<span class=\"lineNumber\">11</span><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">unset-proxy</span><span class=\"hljs-params\">()</span></span> {\n<span class=\"lineNumber\">12</span>\t<span class=\"hljs-variable\">$Env:https_proxy</span>=<span class=\"hljs-string\">\"\"</span>\n<span class=\"lineNumber\">13</span>\t<span class=\"hljs-variable\">$Env:http_proxy</span>=<span class=\"hljs-string\">\"\"</span>\n<span class=\"lineNumber\">14</span>}\n<span class=\"lineNumber\">15</span> \n<span class=\"lineNumber\">16</span><span class=\"hljs-comment\"># 退出记事本后,在终端重置配置文件</span>\n<span class=\"lineNumber\">17</span>. <span class=\"hljs-variable\">$profile</span></code></pre> \n\n<p>接着就可以开启或者关闭终端代理了.</p>\n<h1>3. Git proxy</h1>\n<p><code>git</code>没有代理也很不爽,可以通过全局配置设置下载和上传的代理:</p>\n<pre><code class=\"hljs language-powershell\"><span class=\"lineNumber\">1</span>git config -<span class=\"hljs-literal\">-global</span> http.proxy ip:port\n<span class=\"lineNumber\">2</span>git config -<span class=\"hljs-literal\">-global</span> https.proxy ip:port</code></pre> \n\n<p>这里就要多说一句,作为一个眼界开阔的开发者,有一个速度快,稳定性强的好梯子,也很合理吧!</p>\n","title":"windows终端代理设置","date":"2021/3/16","tags":["windows"],"mainImg":"https://images.unsplash.com/photo-1614008999392-01f06cc73b43?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MTU4OTQ1NDY&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1614008999392-01f06cc73b43?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MTU4OTQ1NDY&ixlib=rb-1.2.1&q=80&w=400","intro":"办公电脑是windows系统,需要在日常的终端使用中越过长城,走向世界.在此分享终端代理和WSL代理的设置."}},"__N_SSG":true}