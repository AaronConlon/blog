{"pageProps":{"post":{"slug":"JavaScript-和-IEEE754","content":"\n### 前言\n\n在 JavaScript 的世界中，`0.1 + 0.2 !== 0.3`。\n\n想要提高自己的 JavaScript 水准，我得循序渐进，逐步解决学习过程中遇到的每一个问题。\n\n开始吧。\n\n### 前置知识\n\n电子计算机的原理就是利用高低电平这两个状态来表示布尔代数中的逻辑真假，对应到数字上即为`1`和`0`，计算机的最小单位是`bit(比特/位)`。\n\n一个字节 = 8 bit。\n\n我们通常用图示的方法来体会一个字节的存储概念：\n\n![](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRYGfJ4mUEk54Yq_fDnMYM2il7M_fdGr5NHNw&usqp=CAU)\n\n每一格都是一个二进制位，每一格日常中的数在计算机中都通过这些比特位来表示。\n\n显然，要弄懂 `0.1+0.2`的问题，需要了解如何表示`0.1`这样的数。\n\n为了统一表示的方法，一群有影响力的组织和个人筹划了一个表示标准：\n\n<center style=\"color: tomato;font-size: 36px;font-weight: bolder\">“IEEE754”</center>\n\n> 大学时听老师讲解过这个知识，笔者任然记得👩🏻‍🏫老师的样子，但是老师说的内容全给忘了，真是抱歉。\n\n`IEEE754`标准借助的是科学计数法来记数，接下来我们会看到一些关于科学计数法的内容。\n\n在维基百科中有一张图片：\n\n![](https://pic1.zhimg.com/80/v2-749cc641eb4d5dafd085e8c23f8826aa_720w.jpg?source=1940ef5c)\n\n浮点数的表示规定如下：\n\n`Value = sign(符号位) × exponent(指数位) × fraction(有效数字位)`\n\n如上图中所示，我们可以看出指数共 8 位，有效数字 `2^8=256 `，按规定除去第一个和最后一个，则表示为`1~254`，为了表示负数还规定设置一个偏差值`-127`，实际表示范围为`-126~127`，可以代表 127 个正指数和 126 个负指数以及一个 0 指数。\n\n\n\n其次，有效数字位共 23 位。总共有效数字为：`2^23`\n\n首先，符号位`0`表示这是一个正数，如果是`1`则表示这是个负数。\n\n其次，指数八位转为十进制:\n\n`0111 1100`:`124`!\n\n`124`是正主的指数值加上偏移量`127`后的值，因此可以计算出真正的指数：\n\n`124 - 127` = `-3`!\n\n因此上图的结果可以看成:\n\n`2^-3 × 1.01`，指数为负则结果做一，最终二进制结果为：`0.00101`，转为十进制即`0.15625`。\n\n### 0.1+0.2\n\n`0.1`的二进制表示为：\n\n`1.1001100110011001100110011001100110011001100110011001 1(0011)+ * 2^-4`\n\n`0.2`的二进制表示为:\n\n`1.1001100110011001100110011001100110011001100110011001 1(0011)+ * 2^-3`\n\n无限循环小数的长度超过了存储空间，因此采用四舍五入的办法取值，最后二者相加得到：\n\n`0-01111111101-0011001100110011001100110011001100110011001100110100`，转为十进制即`0.30000000000000004`\n\n\n\n### 解决方案\n\n如果需要对浮点数进行精确计算，可以使用`math.js`此类库来帮助我们处理误差问题。\n\n\n\n\n\n","title":"JavaScript 和 IEEE754","date":"2022/1/8","tags":["JavaScript"],"mainImg":"https://images.unsplash.com/photo-1549082984-1323b94df9a6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDE2NTY4ODA&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1549082984-1323b94df9a6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDE2NTY4ODA&ixlib=rb-1.2.1&q=80&w=400","intro":"仅以此文纪念我探寻 0.1+0.2 问题的日夜"}},"__N_SSG":true}