{"pageProps":{"post":{"slug":"TypeScript+React:åˆ›å»ºå¤šæ€ç»„ä»¶","content":"\n### å‰è¨€\n\nç¬”è€…åœ¨æ²¹ç®¡ä¸Šè¿½è¸ªäº†ä¸€äº›æŠ€æœ¯é¢‘é“ï¼Œä»Šå¤©çœ‹åˆ°ä¸€ä¸ªå¾ˆå€¼å¾—åˆ†äº«çš„çŸ­è§†é¢‘ï¼Œæ­¤å‰ç¬”è€…ä»æœªå†™è¿‡è¿™æ ·çš„ä»£ç ï¼Œç”šè‡³ä»æœªæƒ³è¿‡å¦‚ä½•å®ç°å¤šæ€çš„ç»„ä»¶ã€‚\n\næˆ‘è§‰å¾—è¿™æˆ–è®¸ä¼šå¯¹æ–°æ‰‹æœ‹å‹ä»¬ğŸ‘¬ğŸ»æœ‰å¸®åŠ©ï¼Œä¹Ÿè®¸å§~\n\n> [Use Typescript to Build React Polymorphic Components - YouTube](https://www.youtube.com/watch?v=2QmsueWGL1c&list=PLMLZt4pr7Aq5BiAXhNXexzH6UYLtGKhnr&index=6)\n\nè¿™ä¸ªè§†é¢‘è€ƒè™‘çš„è¿˜æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œäºæ˜¯æˆ‘åˆæ‰¾äº†ä¸€ç¯‡æ–‡ç« å»å­¦ä¹ ï¼Œé“¾æ¥æˆ‘æ”¾åœ¨æœ«å°¾å‚è€ƒå¤„ã€‚\n\nğŸ‘ŒğŸ»ï¼ä»Šå¤©ï¼Œåœ¨è¿™é‡ŒæŠŠå­¦åˆ°çš„ä¸œè¥¿åˆ†äº«ç»™å¤§å®¶ã€‚\n\n### æŠ›ç –å¼•ç‰\n\næˆ‘ä»¬æˆ–è®¸ç»å¸¸ä½¿ç”¨ç¤¾åŒºçš„ä¸€äº› UI æ¡†æ¶ï¼Œä¸¾ä¸ªé€šç”¨çš„ç¤ºä¾‹ï¼š`<Text>`ç»„ä»¶ã€‚\n\n```jsx\n<Text>å¥½å¥½åƒé¥­</Text>\n```\n\né€šå¸¸è¿™äº›ç»„ä»¶éƒ½æ”¯æŒæˆ‘ä»¬é…ç½®ä¸€äº›é€‰é¡¹å±æ€§ï¼Œä¾‹å¦‚ï¼š\n\n```jsx\n<Text size=\"md\" color=\"gray-70\">å¥½å¥½åƒé¥­</Text>\n```\n\nå¦‚æœæˆ‘ä»¬å…³å¿ƒæ ‡ç­¾çš„è¯­ä¹‰åŒ–ï¼Œé‚£ä¹ˆåŠ¿å¿…åº”è¯¥ä¸ä»…ä»…æ»¡è¶³äºå°†`Text`ç†è§£ä¸ºè¿™ä¸ªç»„ä»¶æ˜¯ä¸ºäº†å±•ç¤ºä¸€æ®µæ–‡æœ¬ã€‚\n\næœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒæ¸²æŸ“æˆ`h1`ï¼Œæœ‰æ—¶å€™åˆ™å¸Œæœ›å°†ä¹‹æ¸²æŸ“æˆ `h5`ï¼Œäº¦æˆ–æ˜¯`p`ã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ `as`å±æ€§æ¥è®©è°ƒç”¨è€…çµæ´»åœ°é€‰æ‹©å¸Œæœ›æ¸²æŸ“çš„æ ‡ç­¾ï¼Œä¸¾ä¸ªä¾‹å­ï¼š\n\n```jsx\n<Text as=\"h2\" size=\"lg\" color=\"tomato-40\">å¤šå–çƒ­æ°´</Text>\n<Text as=\"label\" size=\"lg\" color=\"tomato-40\">å¤šé”»ç‚¼</Text>\n<Text as=\"p\" size=\"lg\" color=\"tomato-40\">ä¸‹é›¨å¤©</Text>\n```\n\nè¿™ä¸ªç»„ä»¶çš„å®ç°å¯ä»¥è¿™ä¹ˆå†™ï¼š\n\n```jsx\nexport const Text = ({\n  as,\n  children,\n  size = 'md',\n  color = 'gray-50',\n  ...other\n}) => {\n  // å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¾…åŠ©å‡½æ•° getClasses èƒ½æ ¹æ®å±æ€§å¯¹è±¡ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºç±»å\n  const classes = getClasses({size, color});\n  const Component = as || 'p';\n  return (\n    <>\n    \t<Component {...other} className={class}>\n      \t{children}\n    \t</Component>\n    </>\n  )\n}\n```\n\nå…¶ä¸­çš„å…³é”®åœ¨äºæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª`å¤§å†™å­—æ¯å¼€å¤´`çš„`Component`ç»„ä»¶å˜é‡æ¥ä¿å­˜æˆ‘ä»¬æƒ³è¦æ¸²æŸ“çš„æ ‡ç­¾ï¼Œå¹¶ä¸”è®¾ç½®äº†ä¸€ä¸ªé»˜è®¤å€¼`p`ä½œä¸ºå¤‡ç”¨ã€‚\n\n> åœ¨ JSX ä¸­ React å°†å°å†™å­—æ¯å¼€å¤´çš„å˜é‡è§†ä¸ºæ ‡ç­¾çš„åå­—ï¼Œå› æ­¤è¦æ³¨æ„ä½¿ç”¨å¤§å†™å­—æ¯å¼€å¤´ã€‚\n\n`other`åˆ™è®©æˆ‘ä»¬çš„ç»„ä»¶èƒ½ä¿å­˜ç”¨æˆ·ä¼ å…¥çš„æœªçŸ¥å±æ€§å’Œå€¼ï¼Œæœ€ç»ˆä¼ ç»™è¿”å›çš„ç»„ä»¶ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·æƒ³è¦æ¸²æŸ“`label`ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥æ”¯æŒå…¶ä¼ å…¥`htmlFor`å±æ€§ï¼Œè¿™æ ·`other`å°±æ´¾ä¸Šç”¨åœºäº†ã€‚\n\né‚£ä¹ˆï¼Œè¿™æ—¶å€™å¯èƒ½å°±ä¼šæœ‰äººé—®ï¼Œå¦‚ä½•é˜²æ­¢ä¼ å…¥ä¸é€‚å®œçš„å±æ€§å‘¢ï¼Ÿæ¯”å¦‚ï¼Œé¢„æ¸²æŸ“ä¸€ä¸ª`p`ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥é˜²æ­¢ç”¨æˆ·ä¼ å…¥`href`å±æ€§å€¼ã€‚\n\nä¸ºäº†å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`typescript`æ¥å†™è¿™ä¸ªç»„ä»¶ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡`typescript`å»é™åˆ¶ä¼ å…¥çš„å±æ€§ç±»å‹å¿…é¡»ç¬¦åˆé¢„æœŸï¼Œå¹¶ä¸”é€šè¿‡é™æ€æ£€æŸ¥æå‰å‘ç°é—®é¢˜ï¼Œè€Œä¸æ˜¯è®©é—®é¢˜å‘ç”Ÿåœ¨æµè§ˆå™¨ç«¯æ‰§è¡Œä»£ç çš„æ—¶å€™ã€‚\n\n### å®ç°`Text`\n\n> Show me the code!\n\n```tsx\ninterface Props<C extends React.ElementType> {\n  /** \n  * ä½¿ç”¨æ³›å‹æä¾›ä¸€ä¸ª React ç»„ä»¶çš„ç»§æ‰¿ç±»å‹\n  */\n  as?: C\n  children: React.ReactNode\n  size?: 'sm' | 'md' | 'lg'\n  color?: Color\n}\n\ntype TextProps<C extends React.ElementType> = Props<C> &\n\tOmit<React.ComponentPropsWithoutRef<C>, keyof Props<C>>\n\nexport const Text = <C extends React.ElementType = 'p'>({\n  as,\n  children,\n  size = 'md',\n  color = 'gray-40',\n  ...other\n}: TextProps<C>) => {\n  const classes = getClasses({ font, size, color })\n  const Component = as || 'p'\n\n  return (\n    <Component {...other} className={classes}>\n      {children}\n    </Component>\n  )\n}\n```\n\n> ä¸Šè¿°ç¤ºä¾‹ä¸­ä½¿ç”¨äº† TypeScript çš„æ³›å‹çŸ¥è¯†ï¼Œæ¨èé˜…è¯»ï¼š[TypeScript Generics for People Who Gave Up on Understanding Generics](https://ts.chibicode.com/generics)\n\nç°åœ¨ï¼Œæˆ‘ä»¬å®ç°äº†æœ‰æ•ˆçš„ç±»å‹æ£€æŸ¥ã€‚å½“æˆ‘ä»¬å°†`as`å±æ€§å€¼è®¾ç½®ä¸º`h1`çš„æ—¶å€™ï¼Œæ³›å‹`C`ä¿è¯åœ¨ä¼ å…¥è¯¸å¦‚`href`è¿™æ ·ä¸å­˜åœ¨äº`h1`æ ‡ç­¾ä¸Šçš„åˆæ³•å±æ€§æ—¶ä¼šæŠ¥é”™ã€‚\n\n> ç”±äºç»§æ‰¿äº† React.ElementTypeï¼Œæ³›å‹`C`å…·å¤‡äº†åŸºç¡€çš„`Element`ç±»å‹æ”¯æŒï¼Œå½“ä¼ å…¥è¯¸å¦‚`something`è¿™æ ·æ— æ•ˆçš„å±æ€§æ—¶ä¹Ÿèƒ½å‘ç°é—®é¢˜ã€‚\n\nè¿™ä¸ª`as`å°±åƒæ˜¯ä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬çµæ´»åœ°åˆ©ç”¨äº†`TypeScript`çš„æ³›å‹æ¥ä¿è¯ç±»å‹æ­£ç¡®ã€‚\n\nä½†æ˜¯ï¼Œä¸‹é¢è¿™éƒ¨åˆ†å¯èƒ½ä¼šè®©`TypeScript`æŒæ¡å¾—ä¸å¤ªå¥½çš„æœ‹å‹æœ‰ç‚¹å¤´å¤§(æ²¡é”™ï¼Œæ­£æ˜¯åœ¨ä¸‹~ï¼‰\n\n> é‡åˆ°ä¸ä¼šçš„ï¼Œå»å­¦ä¹ å°±è¡Œäº†ï¼\n\n```tsx\ntype TextProps<C extends React.ElementType> = Props<C> &\n\tOmit<React.ComponentPropsWithoutRef<C>, keyof Props<C>>\n```\n\nè®©æˆ‘ä»¬é€ä¸€æ‹†è§£è¿™æ®µä»£ç ï¼\n\né¦–å…ˆï¼Œæ³›å‹`C`ç»§æ‰¿äº†`React.ElementType`è®©æ³›å‹å…·å¤‡äº†å®ƒçš„å±æ€§ç±»å‹ï¼Œä½†æ˜¯è¿™æ˜¯æœ‰æ¡ä»¶çš„ã€‚\n\næ³¨æ„`Omit`åœ¨`TypeScript`ä¸­çš„è¯­æ³•å½¢å¼ä¸ºï¼š`Omit<Type, Keys>`ï¼Œå…¶ä» Type ä¸­é€‰æ‹©æ‰€æœ‰çš„å±æ€§ç±»å‹ï¼Œå†æ’é™¤`Keys`æŒ‡å®šçš„ç±»å‹ã€‚\n\næ­¤å¤–ï¼Œ`React.ComponentPropsWithoutRef<C>`å°†å¾—åˆ°æ³›å‹`C`ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå†æ’é™¤æ‰\n\n### å‚è€ƒ\n\n- [Polymorphic React Components in TypeScript | Ben Ilegbodu](https://www.benmvp.com/blog/polymorphic-react-components-typescript/)\n","title":"TypeScript+React:åˆ›å»ºå¤šæ€ç»„ä»¶","date":"2022/2/8","tags":["React"],"mainImg":"https://images.unsplash.com/photo-1576836165612-8bc9b07e7778?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDQzMTUzNjM&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1576836165612-8bc9b07e7778?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDQzMTUzNjM&ixlib=rb-1.2.1&q=80&w=400","intro":"å€¼å¾—ä½ èŠ±ä¸€åˆ†é’Ÿé˜…è¯»çš„çŸ­æ–‡ï¼Œç®€ä»‹å¦‚ä½•åˆ›å»ºå¤šæ€ç»„ä»¶ã€‚"}},"__N_SSG":true}