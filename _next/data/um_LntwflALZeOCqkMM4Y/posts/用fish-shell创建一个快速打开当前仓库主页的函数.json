{"pageProps":{"post":{"slug":"用fish-shell创建一个快速打开当前仓库主页的函数","contentHtml":"<h2>前言</h2>\n<p>我在写了一个新的小工具并且将代码上传到 GitHub 的时候，突然想要打开这个仓库的主页，然而我找不到 gh 和 git 这俩 cli 支持这个功能的地方，于是我就用自己当前使用的 fish shell 写了一个函数，用于快速打开我的仓库。</p>\n<h2>主体内容</h2>\n<h3>系统环境</h3>\n<ul>\n<li><code>Mac</code></li>\n<li><code>fish</code></li>\n</ul>\n<h3>脚本代码</h3>\n<blockquote>\n<p>我对 fish 也不够了解，只是为了是实现这个功能而马上去看了其函数的语法和字符串处理的一些知识。</p>\n</blockquote>\n<pre><code>function ghome\n<span class=\"lineNumber\">2</span><span>\t#</span><span> 通过 git 尝试获取当前仓库的地址</span>\n<span class=\"lineNumber\">3</span>  set -l homepage_url (command git remote --verbose 2> /dev/null | grep fetch | command cut -c 8-)\n<span class=\"lineNumber\">4</span><span>  #</span><span> 显然如果不是仓库则执行失败</span>\n<span class=\"lineNumber\">5</span>  if [ $status -gt 0 ]\n<span class=\"lineNumber\">6</span>    echo 'Not a git repo'\n<span class=\"lineNumber\">7</span>    return 1\n<span class=\"lineNumber\">8</span>  end\n<span class=\"lineNumber\">9</span><span>\t#</span><span> 没获取到地址也失败</span>\n<span class=\"lineNumber\">10</span>  if [ -z $homepage_url ]\n<span class=\"lineNumber\">11</span>    echo 'Not a git repo'\n<span class=\"lineNumber\">12</span>    return 1\n<span class=\"lineNumber\">13</span>  end\n<span class=\"lineNumber\">14</span><span>\t#</span><span> 不是 GitHub 的仓库也不算</span>\n<span class=\"lineNumber\">15</span>  if [ -z (echo $homepage_url | grep github) ]\n<span class=\"lineNumber\">16</span>    echo 'Not a git repo...'\n<span class=\"lineNumber\">17</span>    return 1\n<span class=\"lineNumber\">18</span>  end\n<span class=\"lineNumber\">19</span><span>  #</span><span> 获取当前的分支名</span>\n<span class=\"lineNumber\">20</span>  set -l branch (command git rev-parse --abbrev-ref HEAD)\n<span class=\"lineNumber\">21</span><span>\t#</span><span> 获取地址并使用 open 命令打开</span>\n<span class=\"lineNumber\">22</span>  set -l url (string replace -r '\\.git.*' '' $homepage_url)\n<span class=\"lineNumber\">23</span>  open $url/tree/$branch\n<span class=\"lineNumber\">24</span>end</code></pre> \n\n<p>如此一来，我就可以很方便的使用<code>ghome</code>命令直接打开的当前仓库的线上主页了。</p>\n<h2>最后</h2>\n<p>这看起来只是一个非常无聊的脚本，但是说实话对我来说挺好用的。尬住。</p>\n<blockquote>\n<p><code>fish</code>是一个非常好用的<code>shell</code>环境，某种程度上可以很好的代替<code>zsh</code>，你可以在很多地方搜索到它的优缺点~</p>\n</blockquote>\n<p>又十二点过去了，狗命要紧🐶，睡觉，各位晚安。</p>\n<h2>参考</h2>\n<ul>\n<li><a href=\"https://fishshell.com/docs/current/tutorial.html\">Tutorial — fish-shell 3.3.1 documentation</a></li>\n<li>源代码<a href=\"https://github.com/youyiqin/fish_functions/tree/main\">youyiqin/fish_functions</a></li>\n</ul>\n","title":"用fish-shell创建一个快速打开当前仓库主页的函数","date":"2021/11/23","tags":["Fish"],"mainImg":"https://images.unsplash.com/photo-1603969409447-ba86143a03f6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2Mzc1OTc3MTI&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1603969409447-ba86143a03f6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2Mzc1OTc3MTI&ixlib=rb-1.2.1&q=80&w=400","intro":"我在写了一个新的小工具并且将代码上传到 GitHub 的时候，突然发现想要打开这个仓库的主页，然而我找不到 gh 和 git 这俩 cli 支持这个功能的地方，于是我就用自己当前使用的 fish shell 写了一个函数，用于快速打开我的仓库"}},"__N_SSG":true}