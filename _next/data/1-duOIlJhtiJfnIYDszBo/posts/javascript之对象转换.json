{"pageProps":{"post":{"slug":"javascriptä¹‹å¯¹è±¡è½¬æ¢","content":"\nåœ¨æœºç¼˜å·§åˆä¹‹ä¸‹,æˆ‘çœ‹åˆ°äº†å›½å¤–å¤§ç¥`Dr.Axel Rauschmayer`çš„åšå®¢:[2ality â€“ JavaScript and more](https://2ality.com/index.html),å…¶ä¸­ä¸€ç¯‡æ–‡ç« é’ˆå¯¹`ç±»å‹è½¬æ¢`è¿™ä¸ªé—®é¢˜ä½œäº†åˆ†äº«,æœ¬ç€æ±‚çŸ¥çš„æƒ³æ³•æˆ‘é™ä¸‹å¿ƒé˜…è¯»äº†æ­¤æ–‡,æ‰€å¾—æ‰€æƒ³è®°å½•äºæ­¤.\n\n**2021å¹´03æœˆ22æ—¥18:52:54**\n\n## 1. èµ·å§‹\n\n`JavaScript` æ˜¯ä¼˜ç§€çš„åŠ¨æ€è¯­è¨€,æ•°æ®ç±»å‹çš„è½¬æ¢åœ¨æ—¥å¸¸ç¼–ç¨‹å¼€å‘ä¸­ååˆ†å¸¸è§.æœ¬æ–‡å°†ç»“åˆä¸€äº›å®é™…é—®é¢˜å’Œä¸ªäººç–‘æƒ‘å¯¹`ç±»å‹è½¬æ¢`è¿›è¡Œå­¦ä¹ å’Œè§£æ,å°½é‡ä»`ECMAScriptè§„èŒƒ`å‡ºå‘,å­¦ä¹ ç±»å‹è½¬æ¢çš„è®¾è®¡ç†å¿µå’Œå®ç°é€»è¾‘.\n\n> å¦‚æœå–œæ¬¢,ä¸å¦¨äº²è‡ªé˜…è¯» [ECMAScriptÂ® 2022 Language Specification](https://tc39.es/ecma262/multipage/)\n\n## 2. ä½•ä¸ºç±»å‹è½¬æ¢?\n\né¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®`JavaScript`æ•°æ®åˆ†ä¸º:\n\n- åŸå§‹æ•°æ®ç±»å‹(primitive)\n  - undefined\n  - null\n  - string\n  - number\n  - biginit\n  - boolean\n  - symbol\n- å¯¹è±¡\n\nçœ‹çœ‹è¿™ä¸€è¡Œä»£ç :\n\n```js\nNumber('3') * Number('2')\n```\n\nä¸¤ä¸ªæ•°å­—ä¹‹é—´ä½¿ç”¨ä¹˜æ³•æ“ä½œç¬¦ç›¸ä¹˜,æ•°å­—ç±»å‹æ˜¯æ˜ç¡®çš„ä»å­—ç¬¦ä¸²é€šè¿‡`Number()`å‡½æ•°`æ˜¾å¼`è½¬è¿‡æ¥çš„.\n\nå­—ç¬¦ä¸²ä¹‹é—´`\"ä¸èƒ½\"`ç›´æ¥æ‰§è¡Œä¹˜æ³•.\n\n```js\n'a' * 'b' // NaN\n```\n\nä¹Ÿè®¸ä½ ä¼šä¸¾å‡ºå¦‚ä¸‹å¯è¡Œçš„ä¾‹å­:\n\n```js\n'1' * '2' // 2\n```\n\næ­¤æ—¶,å­—ç¬¦ä¸²ä¹‹é—´çš„ä¹˜æ³•å¾—å‡ºäº†æˆ‘ä»¬æƒ³è¦çš„ç»“æœ.ç©¶å…¶å®è´¨æ˜¯å› ä¸ºè§£é‡Šå™¨å¯¹å­—ç¬¦ä¸²è¿›è¡Œäº†`éšå¼ç±»å‹è½¬æ¢(coercion)`.\n\nJavaScript è¯­è¨€åˆæœŸå¹¶æ²¡æœ‰è®¾è®¡å¼‚å¸¸æ•è·(`exceptions`),è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ ä¼šçœ‹åˆ°ç°ä»Šè§£é‡Šå™¨å¯¹å¦‚ä¸‹ä»£ç çš„è§£é‡Š.\n\n```js\n1 / true // 1\n1 / false // Infinity , å¾ˆæ˜æ˜¾, 0 ä½œä¸ºåˆ†æ¯æ˜¯é”™è¯¯çš„,ä½†æ˜¯è§£é‡Šå™¨æœ€åçš„å€¼æ˜¯ Infinity\nNumber('a') // NaN \n```\n\nä¸ºäº†å®ç°å…¼å®¹,`ECMAScript`ä¸å¾—ä¸\"å…è®¸\"è¿™éƒ¨åˆ†é”™è¯¯çš„è®¾è®¡ç»§ç»­å­˜åœ¨.ä½†æ˜¯,å¯¹äºä¸€äº›ç›¸å¯¹è¾ƒæ–°çš„ç‰¹æ€§æ¥è¯´,ä¿®å¤äº†è¿™ä¸ªé”™è¯¯çš„è®¾è®¡.\n\nä¾‹å¦‚:\n\n```JavaScript\n1 / Symbol() // except error: can not cover a symbol value to a number\n\n1 / 2n // except error: can not mix BigInt and other types,use explicit conversions\n\n1() // except error: 1 is not a function\n\nnew 1 // except error: 1 is not a constructor\n\n'ab'.length = 1 // åªè¯»å±æ€§ä¸å¯æ”¹\n```\n\n\n\n## 3. ECMAScript è§„èŒƒæ˜¯å¦‚ä½•å®šä¹‰ç±»å‹è½¬æ¢çš„?\n\nå…ˆæ¥çœ‹çœ‹å¦‚ä¸‹ä¸€ä¸ªä½¿ç”¨`Typescript`ç¼–å†™çš„å‡½æ•°:\n\n```typescript\nfunction multiply(a: number, b: number) {\n  // ...\n}\n```\n\nå¦‚ä¸Šæ‰€ç¤º,æ­¤å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°çš„ç±»å‹éƒ½æ˜¯`number`,åœ¨è½¬è¯‘ä¸º`JavaScript`çš„è¿‡ç¨‹ä¸­,è½¬è¯‘å™¨åšäº†ä»€ä¹ˆ?\n\nä¸ºäº†åœ¨è½¬è¯‘åä¿è¯å‚æ•°ç±»å‹æ­£ç¡®,å…¶è¿‡ç¨‹ç®€è¿°ä¸ºå¦‚ä¸‹ä»£ç :\n\n```JavaScript\nfunction multiply(a, b) {\n  let _a = ToNumberic(a);\n  let _b = ToNumberic(b);\n  /// ...\n}\n```\n\n### 3.1 è½¬æ¢ä¸ºåŸå§‹æ•°æ®ç±»å‹æˆ–å¯¹è±¡\n\nå½“è¯­å¥éœ€è¦æ‰§è¡Œéšå¼è½¬æ¢çš„æ—¶å€™,å¦‚ä¸‹`æŠ½è±¡æ“ä½œ`å‡½æ•°å°†ç›®æ ‡æ•°æ®è½¬æ¢ä¸ºé¢„æœŸçš„åŸå§‹æ•°æ®ç±»å‹æˆ–è€…`Object`:\n\n- ToBoolean()\n- ToNumber()\n- ToBumeric(), å…¼é¡¾ number å’Œ BigInt\n- ToBigInt()\n- ToString()\n- ToObject()\n\n> [æŠ½è±¡æ“ä½œ](https://tc39.es/ecma262/#sec-abstract-operations)æ˜¯åœ¨ECMAScriptè§„èŒƒä¸­å®šä¹‰çš„å‡½æ•°,å®ƒä»¬çš„å®šä¹‰æ˜¯ä¸ºäº†ç®€æ´åœ°ç¼–å†™è§„èŒƒ.JavaScriptå¼•æ“ä¸å¿…å°†å®ƒä»¬ä½œä¸ºå•ç‹¬çš„å‡½æ•°åœ¨å¼•æ“ä¸­å®ç°.ä¸èƒ½ç›´æ¥ä»JavaScriptè°ƒç”¨å®ƒä»¬.ä½†æ˜¯å¼•æ“å®ç°äº†ç±»ä¼¼`Number()`è¿™æ ·çš„æ˜¾ç¤ºè½¬æ¢å‡½æ•°.\n\n### 3.2 è½¬æ¢ä¸ºæ•°å­—ç±»å‹\n\nå¯¹äºéœ€è¦è¢«éšå¼è½¬åŒ–ä¸º`numeric`ç±»å‹æ•°æ®çš„å€¼æ¥è¯´,å°†ä¼šç”¨åˆ°`ToNumeric`æŠ½è±¡æ“ä½œ.è½¬æ¢çš„ç»“æœå¯èƒ½æ˜¯`number`ç±»å‹æˆ–è€…`BigInt`ç±»å‹.\n\nå¦‚è‹¥éœ€è¦å°†`x`è½¬æ¢ä¸ºæ•´å½¢,åˆ™ä½¿ç”¨æŠ½è±¡æ“ä½œ`ToInteger`.åœ¨ä½¿ç”¨`ä½æ“ä½œ`çš„æ—¶å€™æ‰§è¡Œçš„éšå¼è½¬æ¢åˆ™è§†æƒ…å½¢ä½¿ç”¨æŠ½è±¡æ“ä½œ`ToInt32`æˆ–è€…`ToUint32`.\n\nä¾‹å¦‚:\n\n```js\n'1' >> 1 // ä½¿ç”¨ ToInt32 æŠ½è±¡æ–¹æ³•è½¬ä¸º 32 ä½æ•´æ•°\n2 >> '1' // ä½¿ç”¨ ToUint32 æŠ½è±¡æ–¹æ³•è½¬ä¸ºæ— ç¬¦å· 32 ä½æ•´æ•°\n-2 >>> 0 // -2 çš„äºŒè¿›åˆ¶è¡¨ç¤ºå±äºæœ‰ç¬¦å·æ•°,å› æ­¤éœ€è¦ ToUint32 è½¬æ¢,æœ€åç»“æœæ˜¯ 4294967294\n```\n\næ›´å¤šç»†åˆ™å¦‚ä¸‹è¡¨æ‰€ç¤º:\n\n| operand        | left operand | right operand | result   |\n| :------------- | :----------- | :------------ | :------- |\n| `<<`           | `ToInt32()`  | `ToUint32()`  | `Int32`  |\n| signed `>>`    | `ToInt32()`  | `ToUint32()`  | `Int32`  |\n| unsigned `>>>` | `ToInt32()`  | `ToUint32()`  | `Uint32` |\n| `&`, `^`, `|`  | `ToInt32()`  | `ToUint32()`  | `Int32`  |\n| `~`            | â€”            | `ToInt32()`   | `Int32`  |\n\n\n\n### 3.3 è½¬æ¢ä¸ºå±æ€§`keys`å±æ€§\n\næŠ½è±¡æ“ä½œ`ToPropertyKey`è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…`Symbol`,å¸¸ç”¨äº:\n\n- æ‹¬å·æ“ä½œ\n- å¯¹è±¡å­—é¢é‡çš„è®¡ç®—å±æ€§\n- in æ“ä½œç¬¦çš„`left-hand side`,ç”¨äºåˆ¤å®š`in` çš„ç»“æœ\n- Object çš„å‡ ä¸ªéœ€è¦è®¿é—®`value`å’Œéå†`key`ç›¸å…³çš„å‡½æ•°\n  - Object.fromEntries\n  - Object.defineProperty\n  - Object.getOwnPropertyDescriptor\n  - Object.prototype.hasOwnProperty\n  - Object.prototype.propertyIsEnumerable\n- Reflect å¯¹è±¡çš„ç›¸å…³æ–¹æ³•\n\n\n\n### 3.4 è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼•(Array indices)\n\n- `ToLength()` ä¸»è¦ç”¨äºå­—ç¬¦ä¸²ç´¢å¼•è®¡ç®—\n  - æ­¤æŠ½è±¡æ–¹æ³•æ˜¯`ToIndex`æŠ½è±¡æ–¹æ³•çš„è¾…åŠ©æ–¹æ³•\n  - å…¶å€¼èŒƒå›´æ˜¯0 â‰¤ ? â‰¤ Math.MAX_SAVE_INTEGER\n- `ToIndex()` ä¸»è¦ç”¨äºç±»æ•°ç»„ç´¢å¼•è®¡ç®—\n  - ä¸ ToLength ä¸»è¦åŒºåˆ«åœ¨äº,æ­¤æŠ½è±¡æ–¹æ³•åœ¨ç´¢å¼•è¶Šç•Œçš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸\n  - å…¶å€¼èŒƒå›´æ˜¯0 â‰¤ ? â‰¤ Math.MAX_SAVE_INTEGER\n- `ToUint32()` ç”¨äºæ•°ç»„ç´¢å¼•è®¡ç®—\n  - å…¶å€¼èŒƒå›´æ˜¯0 â‰¤ ? < 2^32-1\n\n### 3.5 è½¬æ¢ä¸ºç±»æ•°ç»„å¯¹è±¡çš„å…ƒç´ \n\nå¦‚æœä½ è¦ä¸º`ç±»æ•°ç»„`å¯¹è±¡çš„æŸä¸ªå…ƒç´ è®¾ç½®å€¼,å°†å¯èƒ½ä½¿ç”¨å¦‚ä¸‹çš„æŠ½è±¡æ–¹æ³•:\n\n- `ToInt8()`\n- `ToUint8()`\n- `ToUint8Clamp()`\n- `ToInt16()`\n- `ToUint16()`\n- `ToInt32()`\n- `ToUint32()`\n- `ToBigInt64()`\n- `ToBigUint64()`\n\nä¾‹å¦‚:\n\n```js\nlet uint16 = new Int16Array;\nuint16 = Int16Array.from('12345');\n\nconsole.log(uint16);\n// expected output: Int16Array [1, 2, 3, 4, 5]\n```\n\næ­¤å¤„çš„å­—ç¬¦ä¸²`12345`åœ¨ `from`å‡½æ•°å†…éƒ¨è¿›è¡Œè¿­ä»£,å¹¶ä¸”è¿›è¡Œéšå¼çš„ç±»å‹è½¬æ¢,æœ€ç»ˆä¸º`Int16Array`å¯¹è±¡è®¾ç½®äº† 5 ä¸ªå…ƒç´ å€¼.\n\n## 4. ECMAScript è§„èŒƒç¤ºä¾‹è§£è¯»\n\n`ECMAScript`è§„èŒƒæ˜ç¡®æä¾›äº†`JavaScript`çš„æ‰€æœ‰å®ç°ç®—æ³•è¯¦ç»†è®¾è®¡.å¤§å¤šæ•°çš„`æŠ½è±¡æ–¹æ³•`å¹¶æ²¡æœ‰åœ¨`JavaScript `å¼•æ“ä¸­å®ç°,ä½†æ˜¯ä¾ç„¶æœ‰å°‘æ•°æŠ½è±¡æ–¹æ³•å¯ä»¥è¿‘ä¹ç†è§£ä¸º`JavaScript`å¼•æ“ä¸­å¯¹åº”çš„éƒ¨åˆ†å‡½æ•°å®ç°.ä¸¾ä¸ªä¾‹å­,å¦‚ä¸‹å†…å®¹æ˜¯`ECMAScript`è§„èŒƒçš„ä¸€éƒ¨åˆ†:\n\n**The `typeof` Operator**\n\n1.  Let val be the result of evaluating [UnaryExpression](https://tc39.es/ecma262/#prod-UnaryExpression). è®© val ä½œä¸ºè¯„ä¼°æ­¤ä¸€å…ƒè¡¨è¾¾å¼çš„ç»“æœ.\n\n2. If val is a [Reference Record](https://tc39.es/ecma262/#sec-reference-record-specification-type), then\n\n   a. If [IsUnresolvableReference](https://tc39.es/ecma262/#sec-isunresolvablereference)(val) is true, return \"undefined\". å¦‚æœè¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªå¼•ç”¨è®°å½•(ä»…å­˜äºè§„èŒƒä¸­çš„ç±»å‹),å¹¶ä¸”æ˜¯ä¸€ä¸ªä¸å¯è§£æçš„å¼•ç”¨(æ¯”å¦‚å£°æ˜å´æœªåˆå§‹åŒ–çš„å˜é‡),åˆ™è¿”å› `undefined`.\n\n3. Set val to ? [GetValue](https://tc39.es/ecma262/#sec-getvalue)(val). ä»¤ val ç­‰äº GetValue(val) æŠ½è±¡æ“ä½œçš„ç»“æœ.å¦‚æœ‰å¼‚å¸¸åˆ™æŠ›å‡º.\n\n4. Return a String according to [Table 38](https://tc39.es/ecma262/#table-typeof-operator-results). æŒ‰`val`çš„ç±»å‹é€‰æ‹©ä¸‹è¡¨ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²ç»“æœ.\n\n<h5 style=\"text-align:center\">Table 38: typeof Operator Results</h5>\n\n| Type of val                                                  | Result      |\n| ------------------------------------------------------------ | ----------- |\n| Undefined                                                    | \"undefined\" |\n| Null                                                         | \"object\"    |\n| Boolean                                                      | \"boolean\"   |\n| Number                                                       | \"number\"    |\n| String                                                       | \"string\"    |\n| Symbol                                                       | \"symbol\"    |\n| BigInt                                                       | \"bigint\"    |\n| Object (does not implement [[Call]]) `ä¸å¯è°ƒç”¨çš„å¯¹è±¡è¿”å› object` | \"object\"    |\n| Object (implements [[Call]])                                 | \"function\"  |\n\n> ECMAScript è§„èŒƒä¸­ä¸ºäº†æ–¹ä¾¿æè¿°ç®—æ³•å’Œè®¾è®¡é€»è¾‘,è®¾å®šäº†å¾ˆå¤šæŠ½è±¡æ“ä½œå’Œè§„èŒƒä¸­çš„ç±»å‹,å®šä¹‰äº†è®¸å¤šç®€å†™æ–¹å¼,ç±»ä¼¼: ? å’Œ ! ç­‰.\n\n## 5. éšå¼è½¬æ¢æŠ½è±¡æ–¹æ³•ç¤ºä¾‹\n\n### 5.1 ToPrimitive()\n\nè¿™ä¸ªæŠ½è±¡æ–¹æ³•åœ¨è®¸å¤šéšå¼è½¬æ¢ç®—æ³•ä¸­è¢«ä½¿ç”¨åˆ°,å®ƒå¯ä»¥æŠŠä»»æ„å€¼è½¬æ¢ä¸ºåŸå§‹ç±»å‹å€¼.ç”±äºè®¸å¤šæ“ä½œåªæ¥å—åŸå§‹ç±»å‹æ•°æ®(æˆ–æœ€ç»ˆå°†ä½¿ç”¨åŸå§‹ç±»å‹æ•°æ®),æ­¤æŠ½è±¡æ–¹æ³•åœ¨`ECMAScript`è§„èŒƒä¸­è¢«å¹¿æ³›è°ƒç”¨.\n\næ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ª JavaScript ç‰ˆæœ¬çš„ `ToPrimitive`å‡½æ•°.\n\n```js\nfunction ToPrimitive(input: any, hint: 'default' | 'string' | 'number' = 'default') {\n  if (Typeof(input) === 'object') {\n    let exoticToPrim = input[Symbol.toPrimitive];\n    if (exoticToPrim !== undefined) {\n      let result = exoticToPrim.call(input, hint);\n      if(Typeof(result) !== 'object') {\n        return result;\n      }\n      throw new TypeError();\n    }\n    if (hint === 'default') {\n      hint = 'number'\n    }\n    return OrdinaryToPrimitive(input, hint);\n  } else {\n    // input æ˜¯åŸå§‹æ•°æ®ç±»å‹\n    return input\n  }\n}\n```\n\nè¦ç†è§£è¿™ä¸ªå‡½æ•°,éœ€è¦äº†è§£ä¸€äº›å‰ç½®çŸ¥è¯†.\n\né¦–å…ˆ, `hint`å‚æ•°è¡¨ç¤ºè¦è½¬æ¢åˆ°åŸå§‹å€¼çš„é¢„æœŸç±»å‹,é»˜è®¤æ˜¯`number`.\n\n.å…¶æ¬¡,æ­¤å‡½æ•°çš„ç›®çš„æ˜¯ä¸ºäº†å°†æŸä¸ªå€¼è½¬ä¸ºåŸå§‹ç±»å‹æ•°æ®,å¦‚æ­¤ä¸€æ¥å¯¹äºæœ¬èº«å°±æ˜¯åŸå§‹ç±»å‹çš„æ•°æ®æ¥è¯´ç›´æ¥è¿”å›å³å¯.\n\nå¯¹äºå¯¹è±¡æ¥è¯´,åˆ™éœ€è¦æ£€æŸ¥æ­¤å¯¹è±¡æ˜¯å¦é‡å†™äº†`Symbol.toPrimitive`æ–¹æ³•.\n\n> `Symbol.toPrimitive` æ˜¯ä¸€ä¸ªå†…ç½®çš„ Symbol å€¼ï¼Œå®ƒæ˜¯ä½œä¸ºå¯¹è±¡çš„å‡½æ•°å€¼å±æ€§å­˜åœ¨çš„ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¯¹åº”çš„åŸå§‹å€¼æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚\n\nå¦‚æœç›®æ ‡å¯¹è±¡é‡å†™äº†æ–¹æ³•,åˆ™å°†`hint`å’Œ`input`ä½œä¸ºå‚æ•°æŒ‰é‡å†™çš„é€»è¾‘è¿›è¡Œè½¬æ¢,å‡ºç°å¼‚å¸¸åˆ™æŠ›å‡º.\n\nå¦‚æœæ­¤å¯¹è±¡æ²¡æœ‰`Symbol.toPrimitive`å‡½æ•°,åˆ™æŒ‰å¸¸è§„æŠ½è±¡æ–¹æ³•[OrdinaryToPrimitive](https://tc39.es/ecma262/#sec-ordinarytoprimitive)è¿›è¡Œè½¬æ¢.\n\næ¥ä¸‹æ¥çœ‹çœ‹ `OrdinaryToPrimitive`çš„ JavaScript å‡½æ•°å¯ä»¥å¦‚ä½•å®ç°.\n\n```js\nfunction OrdinaryToPrimitive(O: object, hint: 'string' | 'number') {\n  let methodNames;\n  if (hint === 'string') {\n    methodNames = ['toString', 'valueOf'];\n  } else {\n    methodNames = ['valueOf', 'toString'];\n  }\n  for (let name of methodNames) {\n    let method = O[name];\n    if (IsCallable(method)) {\n      let result = method.call(O);\n      if (TypeOf(result) !== 'object') {\n        return result;\n      }\n    }\n  }\n  throw new TypeError();\n}\n```\n\nğŸ‘†ä¸Šé¢çš„ä»£ç ç”¨åˆ°äº†å±æ€§ `key` å€¼,ä¸Šè¿°ä¸‰ä¸ªå…³é”®çš„å±æ€§ `key`åœ¨åŸå§‹ç±»å‹è½¬æ¢çš„æ—¶å€™ç”¨å¾—å¾ˆå¤š.åˆ†åˆ«æ˜¯:\n\n- toString\n- valueOf\n- Symbol.toPrimitive(é»˜è®¤åªæœ‰ Symbol å’Œ Date å¯¹è±¡æœ‰æ­¤æ–¹æ³•)\n\nä»`hint`å‚æ•°å¯çŸ¥, æœŸæœ›è½¬æ¢ç»“æœç±»å‹å’Œè°ƒç”¨çš„å¯¹è±¡æ–¹æ³•æœ‰ç›´æ¥å…³ç³».æ‰€ä»¥,æ ‡å‡†åº“ä¸­`Number()`å’Œ`String()`å‡½æ•°åœ¨å®ç°ä¸Šéƒ½æ˜¯æŒ‰æŠ½è±¡æ–¹æ³•`ToPrimitive`å»æ‰§è¡Œ,ä¸”è®¾ç½®`hint`ä¸º`number`æˆ–è€…`string`.\n\n**é‚£ä¹ˆ, ä½•ç§æƒ…å†µä¸‹ä½¿ç”¨å“ªä¸€ä¸ª`hint`å€¼å‘¢?**\n\nåœ¨éšå¼è½¬æ¢çš„æ—¶å€™,è®¾å®š`hint`ä¸º`number`çš„æƒ…å†µæœ‰ä»¥ä¸‹å‡ ä¸ªæŠ½è±¡æ–¹æ³•:\n\n- toNumeric\n- toNumber\n- toBigInt / BigInt\n- < æˆ–è€… > æŠ½è±¡å…³ç³»æ¯”è¾ƒ\n\nè®¾å®š`hint`ä¸º`string`çš„åˆ™æ˜¯:\n\n- toString\n- toPropertyKey\n\næœ€ååˆ™æ˜¯`hint`ä¸º`default`:\n\n- æŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒ( == )\n- åŠ æ“ä½œ(+)\n- new Date(value), value å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€… number\n\nä½†æˆ‘ä»¬å¯ä»¥å‘ç°,`default`å’Œ`number`ä½œä¸º`hint`çš„å€¼æ—¶,å‡ ä¹æ²¡æœ‰å·®åˆ«,äºŒè€…å¯ä»¥è§†ä¸ºä¸€è‡´.\n\nåœ¨æ ‡å‡†åº“ä¸­,åªæœ‰`Date`å’Œ`Symbol`çš„å®ä¾‹é‡å†™äº†å®ƒä»¬çš„é»˜è®¤è¡Œä¸º.\n\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹`Date`æ˜¯å¦‚ä½•é‡å†™çš„:\n\n```js\nDate.prototype[Symbol.toPrimitive] = function (\n  hint: 'default' | 'string' | 'number') {\n    let O = this;\n    if (TypeOf(O) !== 'object') {\n      throw new TypeError();\n    }\n    let tryFirst;\n    if (hint === 'string' || hint === 'default') {\n      tryFirst = 'string';\n    } else if (hint === 'number') {\n      tryFirst = 'number';\n    } else {\n      throw new TypeError();\n    }\n    return OrdinaryToPrimitive(O, tryFirst);\n  };\n```\n\n`tryFirst`é¦–é€‰é¡¹è®¾ç½®æˆäº†`string`,è€Œä¸æ˜¯é»˜è®¤çš„`default`ç­‰åŒäº`number`,åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç¤ºä¾‹:\n\n```js\nconst d = new Date('2222-03-27')\nd == 'Wed Mar 27 2222 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)' // true\n> 1 + d // '1Wed Mar 27 2222 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)'\n```\n\næ—¥æœŸç¤ºä¾‹åŒæ—¶å…·æœ‰`toString()`å’Œ`valueOf()`æ–¹æ³•,äºæ­¤å¯ä»¥ç†è§£å…¶é‡å†™é€»è¾‘æ˜¯åå‘`string`çš„.\n\n### 5.2 ToString()\n\næ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹`toString()`æ–¹æ³•çš„`JavaScript`ç‰ˆæœ¬å®ç°:\n\n```js\nfunction ToString(argument) {\n  if (argument === undefined) {\n    return 'undefined';\n  } else if (argument === null) {\n    return 'null';\n  } else if (argument === true) {\n    return 'true';\n  } else if (argument === false) {\n    return 'false';\n  } else if (TypeOf(argument) === 'number') {\n    return Number.toString(argument);\n  } else if (TypeOf(argument) === 'string') {\n    return argument;\n  } else if (TypeOf(argument) === 'symbol') {\n    throw new TypeError();\n  } else if (TypeOf(argument) === 'bigint') {\n    return BigInt.toString(argument);\n  } else {\n    // argument is an object\n    let primValue = ToPrimitive(argument, 'string'); // (A)\n    return ToString(primValue);\n  }\n}\n```\n\nç®€æ´æ˜äº†, åœ¨å°†åŸå§‹å€¼è½¬æ¢ä¸º`string`çš„ä¸­é—´,ä½¿ç”¨äº†`ToPrimitive`å‡½æ•°ä½œä¸ºè¿‡æ¸¡.å¹¶ä¸”å¯¹äºå„ç§`type`çš„å€¼æœ‰ä¸åŒçš„å¤„ç†.éœ€è¦æ³¨æ„çš„æ˜¯,å¯¹äº`Symbol`æ˜¯æŠ›å‡ºå¼‚å¸¸.ä½†è¿™å¹¶ä¸æ„å‘³ç€`Symbol`å¯¹è±¡æ— æ³•è½¬æ¢ä¸º`string`.\n\n`Symbol.prototype.toString()`å’Œ`String()`éƒ½è¢«é‡å†™äº†.æˆ‘ä»¬ä¸å¦¨çœ‹çœ‹å¦‚ä¸‹ç¤ºä¾‹:\n\n```js\n> const sym = Symbol('sym')\nundefined\n> ''+sym\nUncaught TypeError: Cannot convert a Symbol value to a string\n> `${sym}`\nUncaught TypeError: Cannot convert a Symbol value to a string\n```\n\néšå¼è½¬æ¢å’Œæ¨¡æ¿å­—ç¬¦ä¸²éƒ½ä¼šæŠ›å‡ºå¼‚å¸¸.ä½†æ˜¯æ˜¾ç¤ºè½¬æ¢å’Œè°ƒç”¨`toString`æ–¹æ³•éƒ½å¯ä»¥æ‰§è¡Œ.\n\n```js\n> String(sym)\n'Symbol(sym)'\n> sym.toString()\n'Symbol(sym)'\n```\n\n> ç”±æ­¤çœ‹æ¥,`Symbol`å®ä¾‹çš„è¿™ä¸¤ä¸ªæ–¹æ³•ç¡®å®ä¸ä¼—ä¸åŒ.\n\n**è®©æˆ‘ä»¬å°†ç›®å…‰è½¬åˆ°`String()`å’Œ`Symbol.prototype.toString()`çš„å®ç°é€»è¾‘:**\n\n- `String()`\n\n```js\nfunction String(value) {\n  let s;\n  if (value === undefined) {\n    s = '';\n  } else {\n    // new.target: æ£€æµ‹æ˜¯å¦é€šè¿‡ new å®ä¾‹åŒ–,å¦‚æœä¸æ˜¯åˆ™ä¸º undefined,æ˜¯åˆ™æŒ‡å‘æ„é€ æ–¹æ³•æˆ–å‡½æ•°\n    if (new.target === undefined && TypeOf(value) === 'symbol') {\n      // å¦‚æœ value æ˜¯ symbol,å¹¶ä¸”ä¸æ˜¯é€šè¿‡ new String è°ƒç”¨,åˆ™è¿”å› Symbol çš„æè¿°ç¬¦å‡½æ•°æ‰§è¡Œç»“æœ\n      return SymbolDescriptiveString(value);\n    }\n    s = ToString(value);\n  }\n  if (new.target === undefined) {\n    // Function call\n    return s;\n  }\n  // New call\n  return StringCreate(s, new.target.prototype); // simplified!\n}\n\nfunction StringCreate(value, prototype) {\n  // Create a new String instance that has the given prototype\n}\nfunction SymbolDescriptiveString(sym) {\n  assert.equal(TypeOf(sym), 'symbol');\n  let desc = sym.description;\n  if (desc === undefined) {\n    desc = '';\n  }\n  assert.equal(TypeOf(desc), 'string');\n  return 'Symbol('+desc+')';\n}\n```\n\næˆ‘ä»¬çŸ¥é“,`String`å¯ä»¥ç›´æ¥è°ƒç”¨,ä¹Ÿå¯ä»¥ä½¿ç”¨`new`å®ä¾‹åŒ–ä¸€ä¸ª`string object`.\n\n> new String(1) // å®ä¾‹åŒ–ç»“æœæ˜¯ä¸€ä¸ªå¯¹è±¡,è€Œä¸æ˜¯ string ç±»å‹å€¼,å¯ä»¥ä½¿ç”¨ `valueOf`æ–¹æ³•è·å–å…¶ string ç±»å‹å€¼.å­—é¢é‡å®šä¹‰çš„å­—ç¬¦ä¸²åœ¨ä½¿ç”¨çš„æ—¶å€™çœ‹èµ·æ¥ä¼¼ä¹æ‹¥æœ‰`String`å®ä¾‹çš„æ–¹æ³•,å…¶å®è´¨æ˜¯å…ˆè½¬ä¸º`String`å®ä¾‹,å†è°ƒç”¨æ–¹æ³•.è¯¦æƒ…å¯è§:[åŸºæœ¬å­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸²å¯¹è±¡çš„åŒºåˆ«.](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String#%E5%9F%BA%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB)\n\nå¦‚ä¸Šæ‰€ç¤º,`String`æ„é€ å‡½æ•°å°†`Symbol`å•ç‹¬æ‹å‡ºæ¥å¤„ç†,é’ˆå¯¹`Symbol`è¿”å›å…¶æè¿°ç¬¦å­—ç¬¦ä¸².\n\n- `Symbol.prototype.toString()`\n\n`Symbol`ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨`ToString`æ–¹æ³•è½¬æ¢ä¸ºå­—ç¬¦ä¸²,å…¶å®ç°é€»è¾‘å¤§è‡´å¦‚ä¸‹:\n\n```js\nSymbol.prototype.toString = function () {\n  let sym = thisSymbolValue(this);\n  return SymbolDescriptiveString(sym);\n};\nfunction thisSymbolValue(value) {\n  if (TypeOf(value) === 'symbol') {\n    return value;\n  }\n  if (TypeOf(value) === 'object' && '__SymbolData__' in value) {\n    let s = value.__SymbolData__;\n    assert.equal(TypeOf(s), 'symbol');\n    return s;\n  }\n}\n```\n\n> [å®˜æ–¹æè¿°: ECMAScriptÂ® 2022 Language Specification - Object.prototype.toString](https://tc39.es/ecma262/#sec-object.prototype.tostring)\n\n`Object.prototype.toString`çš„å®ç°è§„èŒƒç”¨ä»£ç æ¥æè¿°:\n\n```js\nObject.prototype.toString = function () {\n  if (this === undefined) {\n    return '[object Undefined]';\n  }\n  if (this === null) {\n    return '[object Null]';\n  }\n  let O = ToObject(this);\n  let isArray = Array.isArray(O);\n  let builtinTag;\n  if (isArray) {\n    builtinTag = 'Array';\n  } else if ('__ParameterMap__' in O) {\n    builtinTag = 'Arguments';\n  } else if ('__Call__' in O) {\n    builtinTag = 'Function';\n  } else if ('__ErrorData__' in O) {\n    builtinTag = 'Error';\n  } else if ('__BooleanData__' in O) {\n    builtinTag = 'Boolean';\n  } else if ('__NumberData__' in O) {\n    builtinTag = 'Number';\n  } else if ('__StringData__' in O) {\n    builtinTag = 'String';\n  } else if ('__DateValue__' in O) {\n    builtinTag = 'Date';\n  } else if ('__RegExpMatcher__' in O) {\n    builtinTag = 'RegExp';\n  } else {\n    builtinTag = 'Object';\n  }\n  let tag = O[Symbol.toStringTag];\n  if (TypeOf(tag) !== 'string') {\n    tag = builtinTag;\n  }\n  return '[object ' + tag + ']';\n};\n```\n\né¦–å…ˆå°†`undefined`å’Œ`null`è¿›è¡Œä¸¥æ ¼æ¯”è¾ƒåˆ¤æ–­,ç„¶åå°†ä¹‹è½¬åŒ–ä¸ºä¸€ä¸ª`Object`,å†é’ˆå¯¹å…¶å†…éƒ¨`æ’æ§½å±æ€§`(å¦‚ä¸Šæ‰€ç¤º, if else çš„åŒä¸‹åˆ’çº¿å¼€å§‹å’Œç»“æŸçš„å­—ç¬¦ä¸²åˆ¤æ–­æ¡ä»¶,å°±æ˜¯æ£€æŸ¥å¯¹è±¡å†…éƒ¨çš„`æ’æ§½å±æ€§`)å®šä¹‰ä¸€ä¸ª`å†…å»ºæ ‡ç­¾`,æœ€åæ ¹æ®`JS å¼•æ“`æä¾›çš„`Symbol.toStringTag`å±æ€§å€¼æ¥è®¾å®šæœ€ç»ˆçš„è¿”å›å­—ç¬¦ä¸²å†…å®¹.\n\nå¦‚æœæ˜¯è‡ªå®šä¹‰çš„ç±»,å¯ä»¥æ ¹æ®`Symbol.toStringTag`è¿™ä¸ª API æ¥å®ç°ç±»å‹æ£€å‡º:\n\n```js\nclass Yo {}\nYo.prototype[Symbol.toStringTag] = 'Yo'\nString(new Yo()) // '[object Yo]'\n```\n\n> å¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦é‡å†™å…¶å®ç°,ä½†ä¸é‡å†™ä¹Ÿä¾ç„¶æ— ç¢,æ¯•ç«Ÿæœ‰ Object å¯¹è±¡çš„åŸå‹å®ç°å…œåº•.\n\n\n\n### 5.3 ToPropertyKey()\n\n`ToPropertyKey`åœ¨è§„èŒƒä¸­å¸¸ç”¨äºæ‹¬å·æ“ä½œç›¸å…³çš„é€»è¾‘æè¿°æ­¥éª¤,å…¶å·¥ä½œæ–¹å¼å¦‚ä¸‹:\n\n```js\nfunction ToPropertyKey (argument) {\n  let key = ToPrimitive(argument, 'string'); // é¢„æœŸå€¼ç±»å‹ä¸º string\n  // é’ˆå¯¹ symbol ä½œä¸º key ç±»å‹çš„ç‰¹æ®Šè®¾è®¡\n  if(TypeOf(key) === 'symbol') {\n    return key;\n  }\n  return ToString(key);\n}\n```\n\n### 5.4 ToNumeric()\n\nå½“`number`ä½“ç³»ä¸­å¢åŠ äº†`BigInt`ä¹‹å,æ­¤æ–¹æ³•ä¹Ÿé’ˆå¯¹`BigInt`åšäº†è®¾è®¡:\n\n```js\nfunction ToNumeric(value) {\n  let primValue = ToPrimitive(value, 'number');\n  if (TypeOf(primValue) === 'bigint') {\n    return primValue;\n  }\n  return ToNumber(primValue);\n}\n```\n\nå¦‚æœå°†å…¶è½¬åŒ–ä¸ºåŸå§‹æ•°æ®ç±»å‹ä¹‹åæ˜¯`BigInt`,åˆ™ç›´æ¥è¿”å›,å¦åˆ™å°†ä½¿ç”¨`ToNumber`æŠ½è±¡æ“ä½œ:\n\n```js\nfunction ToNumber(argument) {\n  if (argument === undefined) {\n    return NaN;\n  } else if (argument === null) {\n    return +0;\n  } else if (argument === true) {\n    return 1;\n  } else if (argument === false) {\n    return +0;\n  } else if (TypeOf(argument) === 'number') {\n    return argument;\n  } else if (TypeOf(argument) === 'string') {\n    return parseTheString(argument); // æ­¤å‡½æ•°ç•¥\n  } else if (TypeOf(argument) === 'symbol') {\n    throw new TypeError(); // symbol å’Œ bigint å°†å¼•å‘ç±»å‹é”™è¯¯å¼‚å¸¸\n  } else if (TypeOf(argument) === 'bigint') {\n    throw new TypeError();\n  } else {\n    // argument is an object\n    let primValue = ToPrimitive(argument, 'number');\n    return ToNumber(primValue);\n  }\n}\n```\n\nä»ä¸Šè¿°å®ç°æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šç†è§£åˆ°æ—¥å¸¸å·¥ä½œä¸­å¯èƒ½ç”¨åˆ°çš„å˜é‡ç±»å‹éšå¼è½¬æ¢æ˜¯å¦‚ä½•å®ç°çš„,ä»¥åŠå‡ºç°`TypeError`çš„åŸå› .\n\n\n\n## 6. éšå¼è½¬æ¢èŒƒä¾‹\n\n### 6.1 Addition operator(+)\n\n> æ­¤åŠ æ³•è¿ç®—éœ€è¦å’Œä¸€å…ƒè¿ç®—ç¬¦ `+`åŒºåˆ†å¼€æ¥.ä¸€å…ƒè¿ç®—ç¬¦ä½¿ç”¨çš„æ˜¯`ToNumber`æŠ½è±¡æ“ä½œ.\n\n`JavaScript`ä¸­åŠ æ³•è¿ç®—ç¬¦çš„è§„å®šä»£ç å®ç°å¦‚ä¸‹:\n\n```js\nfunction Addition(leftHandSide, rightHandSide) {\n  let lprim = ToPrimitive(leftHandSide);\n  let rprim = ToPrimitive(rightHandSide);\n  if (TypeOf(lprim) === 'string' || TypeOf(rprim) === 'string') {\n    return ToString(lprim) + ToString(rprim);\n  }\n  let lnum = ToNumeric(lprim);\n  let rnum = ToNumeric(rprim);\n  if (TypeOf(lnum) !== TypeOf(rnum)) {\n    throw new TypeError();\n  }\n  let T = Type(lnum);\n  return T.add(lnum, rnum);\n}\n```\n\nç®—æ³•æ­¥éª¤:\n\n- å°†å·¦å³æ“ä½œæ•°è½¬åŒ–ä¸ºåŸå§‹æ•°æ®ç±»å‹\n- å¦‚æœå…¶ä¸­ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²,åˆ™éƒ½è½¬ä¸ºå­—ç¬¦ä¸²\n- å¦‚æœäºŒè€…çš„åŸå§‹æ•°æ®ç±»å‹åˆ†åˆ«æ˜¯`BigInt`å’Œ`Number`,åˆ™æŠ¥ç±»å‹å¼‚å¸¸é”™è¯¯\n- å¦åˆ™æ‰§è¡Œ`numeric`ç±»å‹çš„ç›¸åŠ æ“ä½œ.\n\nç¤ºä¾‹:\n\n```js\n> 1 + 2n\nUncaught TypeError: Cannot mix BigInt and other types, use explicit conversions\n> 1n + 1n\n2n\n> [1] + 2  // æ•°ç»„è½¬åŸå§‹æ•°æ®ç±»å‹,ä¼˜å…ˆè½¬ string\n'12'\n> 1 + true\n2\n> 1 + {}\n'1[object Object]'\n```\n\n### 6.2 Abstract Equality Comparison (==)\n\næŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒ,ä¸”å…è®¸æˆ‘å¦‚æ­¤ç¿»è¯‘,å…¶ä»£ç å®ç°å¦‚ä¸‹,ä¸€äº›å®ç°ç»†èŠ‚çš„ä½“ä¼šç›´æ¥å†™åœ¨æ³¨é‡Šä¸­.\n\n```js\n/** Loose equality (==) */\nfunction abstractEqualityComparison(x, y) {\n  // å¯¹äºç±»å‹ä¸€è‡´çš„ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰æ€§æ¯”è¾ƒ\n  if (TypeOf(x) === TypeOf(y)) {\n    // Use strict equality (===)\n    return strictEqualityComparison(x, y);\n  }\n\n  // Comparing null with undefined\n  if (x === null && y === undefined) {\n    return true;\n  }\n  if (x === undefined && y === null) {\n    return true;\n  }\n\n  // Comparing a number and a string\n  // æœ‰è¶£çš„æ•°å­—å’Œå­—ç¬¦ä¸²æ¯”è¾ƒ,éƒ½è½¬ä¸ºäº†æ•°å­—.\n  if (TypeOf(x) === 'number' && TypeOf(y) === 'string') {\n    return abstractEqualityComparison(x, Number(y));\n  }\n  if (TypeOf(x) === 'string' && TypeOf(y) === 'number') {\n    return abstractEqualityComparison(Number(x), y);\n  }\n\n  // Comparing a bigint and a string\n  // å­—ç¬¦ä¸²å’Œ BigInt çš„æ¯”è¾ƒ,å°†å­—ç¬¦ä¸²è½¬ä¸º BigInt\n  if (TypeOf(x) === 'bigint' && TypeOf(y) === 'string') {\n    let n = StringToBigInt(y);\n    if (Number.isNaN(n)) {\n      return false;\n    }\n    return abstractEqualityComparison(x, n);\n  }\n  if (TypeOf(x) === 'string' && TypeOf(y) === 'bigint') {\n    return abstractEqualityComparison(y, x);\n  }\n\n  // Comparing a boolean with a non-boolean\n  // è½¬ä¸ºæ•°å­—è¿›è¡Œæ¯”è¾ƒ\n  if (TypeOf(x) === 'boolean') {\n    return abstractEqualityComparison(Number(x), y);\n  }\n  if (TypeOf(y) === 'boolean') {\n    return abstractEqualityComparison(x, Number(y));\n  }\n\n  // Comparing an object with a primitive\n  // (other than undefined, null, a boolean)\n  // å¯¹è±¡å’Œå››å¤§åŸå§‹æ•°æ®ç±»å‹çš„æ¯”è¾ƒ,å°†å¯¹è±¡è½¬ä¸ºåŸå§‹æ•°æ®ç±»å‹\n  if (['string', 'number', 'bigint', 'symbol'].includes(TypeOf(x))\n    && TypeOf(y) === 'object') {\n      return abstractEqualityComparison(x, ToPrimitive(y));\n    }\n  if (TypeOf(x) === 'object'\n    && ['string', 'number', 'bigint', 'symbol'].includes(TypeOf(y)) {\n      return abstractEqualityComparison(ToPrimitive(x), y);\n    }\n  \n  // Comparing a bigint with a number\n\t// bigint å’Œæ•°å­—çš„æ¯”è¾ƒ,åˆ™åˆ¤å®šæ­£è´Ÿæ— ç©·æ€§å’Œ NaN,è¿™å‡ ä¸ªç±»å‹æ— æ³•æ¯”è¾ƒ,ä¸€å¾‹è¿”å› false\n  if ((TypeOf(x) === 'bigint' && TypeOf(y) === 'number')\n    || (TypeOf(x) === 'number' && TypeOf(y) === 'bigint')) {\n      if ([NaN, +Infinity, -Infinity].includes(x)\n        || [NaN, +Infinity, -Infinity].includes(y)) {\n          return false;\n        }\n    \t// å¦åˆ™æŒ‰æ•°å­¦æ€§å€¼çš„ç›¸ç­‰æ¯”è¾ƒ, 1 == 1n ä¸º true\n      if (isSameMathematicalValue(x, y)) {\n        return true;\n      } else {\n        return false;\n      }\n    }  \n  return false;\n}\n```\n\néƒ¨åˆ†æŠ½è±¡æ“ä½œå¯ä»¥æŸ¥çœ‹`ECMAScript æ–‡æ¡£`.\n\n## 7. æœ¯è¯­è¡¥å……\n\næœ¬æ–‡åˆ°æ­¤å³å°†ç»“æŸ,æˆ‘ä»¬åœ¨ç±»å‹è½¬æ¢çš„è§„èŒƒæè¿°ä¸­ç»å¸¸çœ‹åˆ°å¦‚ä¸‹å‡ ä¸ªæœ¯è¯­,åŠ æ·±å…¶ç†è§£å¯¹äºæˆ‘ä»¬ç†è§£`ECMAScript è§„èŒƒ`æœ‰ä¸€å®šçš„å¸®åŠ©.\n\n- *type conversion*: æˆ‘ä»¬å¸Œæœ›è¾“å‡ºçš„å€¼å…·å¤‡æŒ‡å®šçš„ç±»å‹,å¦‚æœè¾“å…¥å·²ç»ç”±ç±»å‹,é€šå¸¸ç±»å‹è½¬æ¢åªæ˜¯ç®€å•çš„è¿”å›å…¶ç±»å‹,å¦åˆ™å°†å…¶å€¼è½¬æ¢ä¸º`hint`é¢„æœŸç±»å‹.\n- *Explicit type conversion*: æ˜¾ç¤ºç±»å‹è½¬æ¢æŒ‡çš„æ˜¯è¯­è¨€æ–¹é¢é€šè¿‡æ”¯æŒä¸€äº›æ“ä½œæˆ–è€…å‡½æ•°å‡ºå‘ç±»å‹è½¬æ¢,ç±»ä¼¼`JavaScript`ä¸­çš„`Number()/String()/Boolean()`ç­‰ç­‰,æ˜¾ç¤ºçš„ç±»å‹è½¬æ¢æ˜“äºé˜…è¯»å’Œç†è§£,æ•…ç¤¾åŒºä¸­å¸¸æœ‰`æ˜¾ç¤ºå¤§äºéšå¼`çš„è¯´æ³•,å…¶æ”¯æŒè€…ç”šå¤š.åœ¨`JavaScript`ä¸­æ˜¾ç¤ºè½¬æ¢ä¼šå¯¹å€¼åšä¸¤ç§ç±»å‹çš„æ“ä½œ:\n  - Checked: æ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬æ¢,å¦‚æœä¸è¡Œåˆ™æŠ›å‡ºå¼‚å¸¸\n  - Unchecked: è¿”å›ä¸€ä¸ªè®¾è®¡æ€§é”™è¯¯çš„å€¼,å¦‚æœ¬æ–‡å¼€å¤´æ‰€è¿°`1 / false` è¿”å› `Infinity`.\n- *type casting*: ç±»å‹å®šä¹‰,ç±»ä¼¼äº`Java`ä¸­,åœ¨ä¸€ä¸ªèŒƒå›´å†…,ä¸å¯ä»¥å°†ä¸åŒç±»å‹çš„å€¼èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡.æŒ‰ç¼–ç¨‹è¯­è¨€çš„è®¾è®¡è€Œå®š, å…¶å®è´¨æ˜¯æ˜ç¡®çš„ç±»å‹æ£€æŸ¥.\n- *Type coercion*: éšå¼ç±»å‹è½¬æ¢, å¼±ç±»å‹è¯­è¨€çš„ç‰¹å¾ä¹‹ä¸€.\n\n## references\n\n- [Type coercion in JavaScript](https://2ality.com/2019/10/type-coercion.html)\n- [How to Read the ECMAScript Specification](https://timothygu.me/es-howto/)\n- [æ€æ ·é˜…è¯» ECMAScript è§„èŒƒï¼Ÿ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000019240609)\n- [è¯»æ‡‚ ECMAScript è§„æ ¼ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—](http://www.ruanyifeng.com/blog/2015/11/ecmascript-specification.html)\n- [jséšå¼è£…ç®±-ToPrimitive | {XFE}](https://sinaad.github.io/xfe/2016/04/15/ToPrimitive/)\n- [ã€è¯‘ã€‘å¦‚ä½•é˜…è¯»ECMAScriptè§„èŒƒ(ä¸€) | æå†¬ç³çš„åšå®¢](http://ldllidonglin.github.io/blog/2020/03/10/2020-03-10-%E3%80%90%E8%AF%91%E3%80%91%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BBECMAScript%E8%A7%84%E8%8C%83(%E4%B8%80)/)\n- [Cast to Number in Javascript using the Unary (+) Operator | by Nikhil John | Medium](https://medium.com/@nikjohn/cast-to-number-in-javascript-using-the-unary-operator-f4ca67c792ce)\n","title":"javascriptè¯­è¨€ä¸­çš„ç±»å‹è½¬æ¢","date":"2021/3/22","tags":["javascript","tc39"],"mainImg":"https://images.unsplash.com/photo-1472437774355-71ab6752b434?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MTY0MTAxMzQ&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1472437774355-71ab6752b434?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MTY0MTAxMzQ&ixlib=rb-1.2.1&q=80&w=400","intro":"ä½ å¥½,TC39.è¯·é—® JavaScript ä¸–ç•Œä¸­çš„å¯¹è±¡è½¬æ¢æ˜¯å¦‚ä½•å®ç°çš„å‘¢?"}},"__N_SSG":true}