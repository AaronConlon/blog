{"pageProps":{"post":{"slug":"Vue3-keyword","content":"\nå·¥ä½œéœ€è¦ï¼Œä»`React`è½¬ä¸»åŠ›`Vue`å¼€å‘ï¼Œå› æ­¤å†çœ‹ä¸€é`vue`çš„æ–‡æ¡£ï¼Œæ•…åœ¨æ­¤æ€»ç»“ã€‚\n\n### Base\n\n#### å®ä¾‹å’Œå¢å¼ºå‹åŠŸèƒ½\n\n> å¯ä»¥åŒæ—¶åˆ›å»ºå¤šå®ä¾‹\n\né€šè¿‡`createApp`å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ ¹ç»„ä»¶`App`æ¥åˆ›å»º`App`å®ä¾‹ï¼Œå†é€šè¿‡å®ä¾‹æ–¹æ³•`use()`é›†æˆæ’ä»¶åŠŸèƒ½ï¼Œä¾‹å¦‚`pinia`å’Œ`vue-router`ç­‰ï¼Œæœ€åä½¿ç”¨`mount()`æ–¹æ³•å¹¶ä¼ å…¥ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…`CSS`é€‰æ‹©å™¨ï¼Œæœ€ç»ˆæŒ‚è½½åœ¨ä¸€ä¸ªå®é™…çš„`DOM`èŠ‚ç‚¹ä¸Šã€‚\n\n```js\nconst app = createApp(App)\napp.use(router).use(createPinia()).mount('#root')\n```\n\n\n\n#### å…¨å±€é”™è¯¯ç›‘å¬\n\n```js\napp.config.errorHandle = (err) => {\n  // å¤„ç†åº”ç”¨çº§åˆ«çš„é”™è¯¯ï¼Œæ•è·æ‰€æœ‰å­ç»„ä»¶æœªå¤„ç†çš„é”™è¯¯\n \t// å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè®°å½•ä¿¡æ¯ï¼Œé‡å®šå‘åˆ°ç»Ÿä¸€çš„é”™è¯¯é¡µé¢\n}\n```\n\n#### å…¨å±€èµ„æºæ³¨å†Œ\n\næ³¨å†Œå…¨å±€å¯ç”¨çš„ç»„ä»¶ï¼š\n\n> å¯ä»¥å…¨å±€æ³¨å†Œä¸€äº›è‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œåç»­ä¸ç”¨é‡å¤å†™å¯¼å…¥è¯­å¥\n\n```js\napp.component('CustomButton', CustomButton);\n```\n\næ¯”å¦‚`element-plus`å¯ä»¥åœ¨è¿™é‡Œå…¨å±€æ³¨å†Œæ‰€æœ‰çš„`icon`ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‰éœ€å¼•å…¥ã€‚\n\n#### æ¨¡æ¿è¯­æ³•\n\n```vue\n<template>\n\t<!-- æ’å€¼ -->\n  <span>Message: {{ msg }}</span>\n\n\t<!-- å­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸²åŸå§‹æ ‡ç­¾æ¸²æŸ“ -->\n\t<p>Using text interpolation: {{ rawHtml }}</p>\n\t<p>Using v-html directive: <span v-html=\"rawHtml\"></span></p>\n\t\n\t<!-- v-xx æŒ‡ä»¤ï¼Œç»‘å®šæ ‡ç­¾çš„ id å±æ€§å’Œå€¼ï¼Œå¦‚ä¸‹çš„å€¼æ˜¯è¡¨è¾¾å¼ -->\n\t<div v-bind:id=\"dynamicId\"></div>\n\t<!-- æŒ‡ä»¤ç®€å†™ -->\n\t<div :id=\"dynamicId\"></div>\n\t<!-- åŠ¨æ€å‚æ•°ï¼Œçµæ´»è®¾ç½®å±æ€§ -->\n\t<a :[attributeName]=\"url\"> ... </a>\n\t<!-- åŠ¨æ€å‚æ•° + å‡½æ•°è¡¨è¾¾å¼ä½œä¸ºå€¼ï¼Œå€¼ä¸ºå‡½æ•°åˆ™ä¼šè°ƒç”¨å–è¿”å›å€¼ -->\n\t<a :[attributeName]=\"generateUrlFunction\"> ... </a>\n\t\n\t<!-- å¸ƒå°”å€¼çš„å±æ€§ï¼Œæ ¹æ®è¡¨è¾¾å¼è½¬å¸ƒå°”å€¼çš„ç»“æœå†³å®šæœ€ç»ˆæ˜¯å¦æ·»åŠ æ­¤å±æ€§ -->\n\t<button :disabled=\"isButtonDisabled\">Button</button>\n\n\t<!-- åŠ¨æ€ç»‘å®šå¤šå€¼ objectOfAttrs ä¸º {id: 'id', class: 'class'} -->\n\t<div v-bind=\"objectOfAttrs\"></div>\n\t<!-- ç®€å†™ -->\n\t<div :=\"objectOfAttrs\"></div>\n\n\t<!-- è¡¨è¾¾å¼ -->\n\t{{ number + 1 }}\n  {{ ok ? 'YES' : 'NO' }}\n  {{ message.split('').reverse().join('') }}\n  <div :id=\"`list-${id}`\"></div>\n\t\n\t<!-- æ–°æŒ‡ä»¤ v-on å’Œç®€å†™ï¼Œç›‘å¬äº‹ä»¶ -->\n  <a v-on:click=\"doSomething\"> ... </a>\n  <a @click=\"doSomething\"> ... </a>\n\t<!-- åŠ¨æ€äº‹ä»¶åï¼ŒåŠ¨æ€å‚æ•°éœ€è¦é¿å…ç©ºæ ¼å’Œå¼•å·è¿™äº›ä¸åˆæ³•çš„HTMLå±æ€§å -->\n\t<a @[eventName]=\"doSomething\">\n  \n  <!-- ä¿®é¥°ç¬¦åç¼€ï¼Œç®€åŒ–äº‹ä»¶å¤„ç†å‡½æ•°çš„å†…éƒ¨ä¼˜åŒ–é€»è¾‘ -->\n  <form @submit.prevent=\"onSubmit\">...</form>\n  \n  <!-- æ¡ä»¶æ¸²æŸ“ï¼Œç”šè‡³å¯ä»¥åœ¨ template ä¸Šè®¾ç½®æ¡ä»¶ v-if -->\n  <h1 v-if=\"awesome\">Vue is awesome!</h1>\n  <div v-else-if=\"type === 'C'\">\n    C\n  </div>\n\t<h1 v-else>Oh no ğŸ˜¢</h1>\n  <!-- ä½åˆ‡æ¢æˆæœ¬ -->\n  <h1 v-show=\"ok\">Hello!</h1>\n   \n  <!-- å¾ªç¯æ¸²æŸ“ï¼Œæ”¯æŒåœ¨ template ä¸Šè®¾ç½®ï¼Œç¡®ä¿ key -->\n  <li v-for=\"item in items\" :key=\"item.id\">\n    {{ item.message }}\n  </li>\n  <!-- 1..n å¥½å§ï¼ŒæŒºå¥½çš„ -->  \n  <span v-for=\"n in 10\">{{ n }}</span>\n\n</template>\n```\n\n\n\nåœ¨ Vue æ¨¡æ¿å†…ï¼ŒJavaScript è¡¨è¾¾å¼å¯ä»¥è¢«ä½¿ç”¨åœ¨å¦‚ä¸‹åœºæ™¯ä¸Šï¼š\n\n- åœ¨æ–‡æœ¬æ’å€¼ä¸­ (åŒå¤§æ‹¬å·)\n- åœ¨ä»»ä½• Vue æŒ‡ä»¤ (ä»¥ `v-` å¼€å¤´çš„ç‰¹æ®Š attribute) attribute çš„å€¼ä¸­\n\nç»‘å®šåœ¨è¡¨è¾¾å¼ä¸­çš„æ–¹æ³•æ¯æ¬¡æ›´æ–°éƒ½ä¼šæ‰§è¡Œï¼Œå› æ­¤ä¸åº”è¯¥äº§ç”Ÿæ¸²æŸ“ã€æ•°æ®æ”¹å˜ã€è§¦å‘å¼‚æ­¥äº‹ä»¶ï¼Œ**ä¸è¦å°†å‰¯ä½œç”¨æ–¹æ³•æ”¾åœ¨ç»„ä»¶è¡¨è¾¾å¼ä¸­**ã€‚\n\n> æ¨¡æ¿è¡¨è¾¾å¼è®¿é—®çš„å…¨å±€å¯¹è±¡æ˜¯ä¸€ä¸ªç™½åå•ï¼Œåˆ—äºæ­¤ï¼š[æœ‰é™çš„å…¨å±€å¯¹è±¡åˆ—è¡¨](https://github.com/vuejs/core/blob/main/packages/shared/src/globalsWhitelist.ts#L3)\n\nä¿®é¥°ç¬¦å›¾ç¤ºï¼š\n\n![](mdImgs/directive.69c37117.png)\n\n#### å“åº”å¼åŸºç¡€\n\nä¸€å¾‹ä½¿ç”¨`å£°æ˜å¼API`ã€‚\n\n> åœ¨ Vue ä¸­ï¼ŒçŠ¶æ€éƒ½æ˜¯é»˜è®¤æ·±å±‚å“åº”å¼çš„ã€‚ä¾é æ·±å±‚å“åº”æ€§ï¼Œå“åº”å¼å¯¹è±¡å†…çš„åµŒå¥—å¯¹è±¡ä¾ç„¶æ˜¯ä»£ç†ã€‚\n\n`vue3` æ•°æ®å“åº”å¼åŸºäº`Proxy`ï¼Œè¿™å°±æ„å‘³ç€åœ¨æŸä¸ªé˜¶æ®µåˆ›å»ºçš„å¯¹è±¡èµ‹å€¼ç»™ç»„ä»¶ä¹‹åï¼Œæ­¤å¯¹è±¡å’Œç»„ä»¶ä¸Šçš„ä»£ç†å¯¹è±¡æ˜¯ä¸ç›¸ç­‰çš„ã€‚\n\né‡ç”¨çš„ç»„ä»¶å†…éƒ¨å‡½æ•°å¯èƒ½ä¼šå…±äº«çŠ¶æ€ï¼Œå¤šä¸ªå®ä¾‹åŒæ—¶è®¿é—®å°†ä¼šå¯¼è‡´çŠ¶æ€ä¸å¯é¢„æµ‹ï¼Œè¦ä¿æŒç»„ä»¶å®ä¾‹æŸäº›çŠ¶æ€ç‹¬ç«‹æ€§ï¼Œå¯ä»¥åœ¨`created`ç”Ÿå‘½å‘¨æœŸä¸­åˆ›å»ºæŸäº›é™åˆ¶ã€‚\n\n```vue\n<script setup>\nimport { reactive } from 'vue'\n\nconst state = reactive({ count: 0 })\n\nfunction increment() {\n  state.count++\n}\n</script>\n\n<template>\n  <button @click=\"increment\">\n    {{ state.count }}\n  </button>\n</template>\n```\n\n>[nextTick()](https://staging-cn.vuejs.org/api/general.html#nexttick)ï¼šæ§åˆ¶æ›´æ–°æ—¶æœºï¼Œæ­¤æ–¹æ³•å°†å†…éƒ¨ä¼ å…¥çš„å‡½æ•°æ‰§è¡Œæ—¶æœºè®¾ç½®åœ¨ä¸‹ä¸€ä¸ª DOM æ›´æ–°å®Œæˆä¹‹åï¼Œç±»ä¼¼äº`React.useEffectLayout`\n\n##### reactive çš„å±€é™æ€§\n\n1. ä»…å¯¹å¯¹è±¡ç±»å‹æœ‰æ•ˆï¼ˆå¯¹è±¡ã€æ•°ç»„å’Œ `Map`ã€`Set` è¿™æ ·çš„[é›†åˆç±»å‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects#ä½¿ç”¨é”®çš„é›†åˆå¯¹è±¡)ï¼‰ï¼Œè€Œå¯¹ `string`ã€`number` å’Œ `boolean` è¿™æ ·çš„ [åŸå§‹ç±»å‹](https://developer.mozilla.org/zh-CN/docs/Glossary/Primitive) æ— æ•ˆã€‚\n2. å› ä¸º Vue çš„å“åº”å¼ç³»ç»Ÿæ˜¯é€šè¿‡ property è®¿é—®è¿›è¡Œè¿½è¸ªçš„ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å§‹ç»ˆä¿æŒå¯¹è¯¥å“åº”å¼å¯¹è±¡çš„ç›¸åŒå¼•ç”¨ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸å¯ä»¥éšæ„åœ°â€œæ›¿æ¢â€ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå› ä¸ºè¿™å°†å¯¼è‡´å¯¹åˆå§‹å¼•ç”¨çš„å“åº”æ€§è¿æ¥ä¸¢å¤±ã€‚\n\nä¹Ÿå°±æ˜¯è¯´å°†å“åº”å¼å¯¹è±¡çš„ property èµ‹å€¼æˆ–è§£æ„è‡³æœ¬åœ°å˜é‡æ—¶ï¼Œæˆ–æ˜¯å°†è¯¥ property ä¼ å…¥ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¼šå¤±å»å“åº”æ€§ã€‚\n\nè§£å†³å…¶å±€é™æ€§çš„æ›¿ä»£å“ï¼š`ref()`\n\n```react\nimport { ref } from 'vue'\n\nconst count = ref(0)\n```\n\n> `ref`åŒ…è£…äº†ä¸€ä¸ªå¸¦ `.value`å±æ€§çš„å€¼ï¼ˆæœªæ¥å¯èƒ½å¢åŠ ä¼˜åŒ–ä½“éªŒçš„è¯­æ³•ç³–ï¼‰\n\n`ref`è¿˜æœ‰å‡ ä¸ªç‰¹å¾ï¼š\n\n- åœ¨æ¨¡æ¿ä¸­çš„é¡¶å±‚å±æ€§æ’å€¼ä½¿ç”¨`ref`æ˜¯èƒ½è‡ªåŠ¨è§£åŒ…ï¼Œä¸å¿…ä½¿ç”¨`.value`å–å€¼ï¼Œå¦‚æœ`ref`æ˜¯æŸä¸ªå¯¹è±¡çš„å±æ€§å€¼ï¼Œåˆ™ä¾ç„¶éœ€è¦`.value`\n- å°†`ref`ä½œä¸º`reactive`å¯¹è±¡çš„å±æ€§å€¼æ—¶ä¹Ÿä¼šè‡ªåŠ¨è§£åŒ…ï¼Œè¿™é‡Œéœ€è¦å…³æ³¨å…¶æ·±å±‚å’Œæµ…å±‚`reactive`([æµ…å±‚å“åº”å¼å¯¹è±¡](https://staging-cn.vuejs.org/api/reactivity-advanced.html#shallowreactive))\n- Array å’Œ Map ä¸ä¼šè§£åŒ…\n\n\n\n#### è®¡ç®—å±æ€§\n\nè®¡ç®—å±æ€§(`computed`)ç”¨äº`æè¿°ä¾èµ–å“åº”å¼çŠ¶æ€çš„å¤æ‚é€»è¾‘`ï¼Œé¿å…åœ¨`template`ä¸­å†™å¤æ‚çš„è¡¨è¾¾å¼ã€‚\n\n> è®¡ç®—å±æ€§ä¸¥æ ¼ä¿æŒæ— å‰¯ä½œç”¨ï¼Œé¿å…ç›´æ¥ä¿®æ”¹è®¡ç®—å±æ€§å€¼ï¼Œå°¤å…¶æ˜¯æ— æ„è¯†çš„æ•°ç»„sort()/reverse()ç­‰æ“ä½œ\n\nä½¿ç”¨`computed()`ç¼“å­˜åŸºäºå“åº”å¼æ•°æ®ä¾èµ–çš„è®¡ç®—ç»“æœï¼Œä¾‹å¦‚ï¼š\n\n```vue\n<script setup>\nimport { reactive, computed } from 'vue'\n\nconst author = reactive({\n  name: 'John Doe',\n  books: [\n    'Vue 2 - Advanced Guide',\n    'Vue 3 - Basic Guide',\n    'Vue 4 - The Mystery'\n  ]\n})\n\n// ä¸€ä¸ªè®¡ç®—å±æ€§ ref\nconst publishedBooksMessage = computed(() => {\n  return author.books.length > 0 ? 'Yes' : 'No'\n})\n</script>\n\n<template>\n  <p>Has published books:</p>\n  <span>{{ publishedBooksMessage }}</span>\n</template>\n```\n\n#### ç±»ä¸æ ·å¼ç»‘å®š\n\n> ç±»ä¼¼ React ä¸­çš„ç¬¬ä¸‰æ–¹åº“ classnames\n\nåˆ‡æ¢åŠ¨æ€`class`çš„ç¤ºä¾‹ï¼š\n\nåŸºäº`isActive`çš„çœŸå‡æ¥è®¾ç½®ä»¥`key`ä¸ºç±»åçš„æ–¹æ¡ˆï¼Œå¹¶ä¸”å’ŒåŸæœ‰`class`è¿›è¡Œåˆå¹¶ã€‚\n\n```vue\n<div\n  class=\"static\"\n  :class=\"{ active: isActive, 'text-danger': hasError }\"\n></div>\n```\n\n> åœ¨å¤æ‚æƒ…å†µä¸‹å¯ä»¥å°†å†…è”çš„ç»‘å®šå¯¹è±¡å•ç‹¬æŠ½å‡ºæ¥ã€‚\n\n```vue\n<script setup>\n\tconst isActive = ref(true)\n  const error = ref(null)\n\n  const classObject = computed(() => ({\n    active: isActive.value && !error.value,\n    'text-danger': error.value && error.value.type === 'fatal'\n  }))\n</script>\n<template>\n\t<div :class=\"classObject\"></div>\n</template>\n```\n\n> ä¹Ÿå¯ä»¥ä¼ å…¥æ•°ç»„ï¼Œæ•°ç»„å°†ä¼šè½¬åŒ–è¡¨è¾¾å¼ä¸ºå…¶å€¼ï¼Œå¦å¤–éœ€è¦æ³¨æ„ç»„ä»¶å±æ€§é€ä¼ åˆå¹¶åˆ°å­ç»„ä»¶çš„æ ¹å…ƒç´ `class`å±æ€§ä¸Šï¼Œéœ€è¦åˆ¶å®šåˆå¹¶ä½ç½®åˆ™éœ€è¦å•ç‹¬è®¾ç½®`$attrs`è¡¨è¾¾å¼ã€‚\n\næ ·å¼æ–¹é¢éœ€è¦æ³¨æ„çš„æ˜¯`:style`æ”¯æŒé©¼å³°å‘½åæ³•å’ŒçŸ­æ¨ªçº¿å‘½åçš„å®é™…`CSS`åç§°ä½œä¸º`key`å€¼ï¼Œä¸ºå¤æ‚æ ·å¼ç»‘å®šæ ·å¼å¯¹è±¡æˆ–è€…è®¡ç®—å±æ€§èƒ½æé«˜å¯è¯»æ€§ï¼Œå¦‚æœç»‘å®šæ•°ç»„åˆ™ä¼šåˆå¹¶æ•°ç»„å…ƒç´ çš„æ ·å¼å¯¹è±¡ã€‚\n\n> Vue æ”¯æŒåœ¨è¿è¡Œæ—¶è‡ªåŠ¨ä¸º`:style`è®¾ç½®çš„æ ·å¼æ·»åŠ æµè§ˆå™¨å‰ç¼€ã€‚\n\næ ·å¼æ”¯æŒå¤šå€¼ï¼š\n\n```html\n<div :style=\"{ display: ['-webkit-box', '-ms-flexbox', 'flex'] }\"></div>\n```\n\næµè§ˆå™¨æ¸²æŸ“æ”¯æŒçš„æœ€åä¸€ä¸ªå€¼ã€‚\n\n#### äº‹ä»¶å¤„ç†\n\näº‹ä»¶å¤„ç†å™¨çš„å€¼åˆ†ä¸ºï¼š\n\n- å†…è”äº‹ä»¶å¤„ç†å™¨ï¼šå†…è”JavaScriptè¯­å¥\n- æ–¹æ³•äº‹ä»¶å¤„ç†å™¨ï¼šç»„ä»¶çš„æ–¹æ³•è®¿é—®\n\nå‰è€…åœ¨åœºæ™¯ç®€å•æ—¶ä½¿ç”¨ï¼Œåè€…æ›´å¸¸ç”¨ï¼Œä¹Ÿå¾ˆå®¹æ˜“è·å–åˆ°äº‹ä»¶ä¸Šçš„`DOM`å…ƒç´ ï¼ˆé€šè¿‡`event.target.tagName`ï¼‰ã€‚\n\næœ‰ä¸€ä¸ªç‰¹æ®Šçš„å†…è”åœºæ™¯ï¼Œéœ€è¦è®¿é—®åŸç”Ÿçš„`DOM`ï¼š\n\n```vue\n<template>\n\t<!-- ä½¿ç”¨ç‰¹æ®Šçš„ $event å˜é‡ -->\n  <button @click=\"warn('Form cannot be submitted yet.', $event)\">\n    Submit\n  </button>\n\n  <!-- ä½¿ç”¨å†…è”ç®­å¤´å‡½æ•° -->\n  <button @click=\"(event) => warn('Form cannot be submitted yet.', event)\">\n    Submit\n  </button>\n</template>\n```\n\nå³å¯æ´»åŠ¨`DOM`ã€‚\n\nå¸¸ç”¨çš„äº‹ä»¶ä¿®é¥°ç¬¦ï¼š\n\n- `.stop`\n- `.prevent`\n- `.self`\n- `.capture`\n- `.once`\n- `.passive`\n\nä½œç”¨å¦‚ä¸‹ï¼š\n\n```html\n<!-- å•å‡»äº‹ä»¶å°†åœæ­¢ä¼ é€’ -->\n<a @click.stop=\"doThis\"></a>\n\n<!-- æäº¤äº‹ä»¶å°†ä¸å†é‡æ–°åŠ è½½é¡µé¢ -->\n<form @submit.prevent=\"onSubmit\"></form>\n\n<!-- ä¿®é¥°è¯­å¯ä»¥ä½¿ç”¨é“¾å¼ä¹¦å†™ -->\n<a @click.stop.prevent=\"doThat\"></a>\n\n<!-- ä¹Ÿå¯ä»¥åªæœ‰ä¿®é¥°ç¬¦ -->\n<form @submit.prevent></form>\n\n<!-- ä»…å½“ event.target æ˜¯å…ƒç´ æœ¬èº«æ—¶æ‰ä¼šè§¦å‘äº‹ä»¶å¤„ç†å™¨ -->\n<!-- ä¾‹å¦‚ï¼šäº‹ä»¶å¤„ç†å™¨ä¸æ¥è‡ªå­å…ƒç´  -->\n<div @click.self=\"doThat\">...</div>\n\n<!-- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ï¼Œä½¿ç”¨ `capture` æ•è·æ¨¡å¼ -->\n<!-- ä¾‹å¦‚ï¼šæŒ‡å‘å†…éƒ¨å…ƒç´ çš„äº‹ä»¶ï¼Œåœ¨è¢«å†…éƒ¨å…ƒç´ å¤„ç†å‰ï¼Œå…ˆè¢«å¤–éƒ¨å¤„ç† -->\n<div @click.capture=\"doThis\">...</div>\n\n<!-- ç‚¹å‡»äº‹ä»¶æœ€å¤šè¢«è§¦å‘ä¸€æ¬¡ -->\n<a @click.once=\"doThis\"></a>\n\n<!-- æ»šåŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸º (scrolling) å°†ç«‹å³å‘ç”Ÿè€Œéç­‰å¾… `onScroll` å®Œæˆ -->\n<!-- ä»¥é˜²å…¶ä¸­åŒ…å« `event.preventDefault()` -->\n<div @scroll.passive=\"onScroll\">...</div>\n\n<!-- å½“æŒ‰ä¸‹ Ctrl æ—¶ï¼Œå³ä½¿åŒæ—¶æŒ‰ä¸‹ Alt æˆ– Shift ä¹Ÿä¼šè§¦å‘ -->\n<button @click.ctrl=\"onClick\">A</button>\n\n<!-- ä»…å½“æŒ‰ä¸‹ Ctrl ä¸”æœªæŒ‰ä»»ä½•å…¶ä»–é”®æ—¶æ‰ä¼šè§¦å‘ -->\n<button @click.ctrl.exact=\"onCtrlClick\">A</button>\n\n<!-- ä»…å½“æ²¡æœ‰æŒ‰ä¸‹ä»»ä½•ç³»ç»ŸæŒ‰é”®æ—¶è§¦å‘ -->\n<button @click.exact=\"onClick\">A</button>\n\n<!-- Alt + Enter -->\n<input @keyup.alt.enter=\"clear\" />\n\n<!-- Ctrl + ç‚¹å‡» -->\n<div @click.ctrl=\"doSomething\">Do something</div>\n```\n\n`.passive` ä¿®é¥°ç¬¦ä¸€èˆ¬ç”¨äºè§¦æ‘¸äº‹ä»¶çš„ç›‘å¬å™¨ï¼Œå¯ä»¥ç”¨æ¥[æ”¹å–„ç§»åŠ¨ç«¯è®¾å¤‡çš„æ»šå±æ€§èƒ½](https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener#ä½¿ç”¨_passive_æ”¹å–„çš„æ»šå±æ€§èƒ½)ã€‚\n\nè¿˜æœ‰éå¸¸æœ‰ç”¨çš„æŒ‰é”®ä¿®é¥°ç¬¦ï¼š\n\n- `.enter`\n- `.tab`\n- `.delete` (æ•è·â€œDeleteâ€å’Œâ€œBackspaceâ€ä¸¤ä¸ªæŒ‰é”®)\n- `.esc`\n- `.space`\n- `.up`\n- `.down`\n- `.left`\n- `.right`\n- `.ctrl`\n- `.alt`\n- `.shift`\n- `.meta`\n\nå’Œé¼ æ ‡ä¿®é¥°ç¬¦ï¼š\n\n- `.left`\n- `.right`\n- `.middle`\n\n\n\n#### è¡¨å•è¾“å…¥ç»‘å®š\n\n`react`éœ€è¦ä¸º`input`è®¾ç½®å€¼å’Œ`onChange`ç›‘å¬ä»¥æ”¹å˜å€¼ï¼Œ`vue`åšäº†ä¼˜åŒ–ï¼š\n\n```vue\n<template>\n\t<input v-model=\"text\" />\n</template>\n```\n\nä»¥ä¸‹å…ƒç´ éƒ½å…¼å®¹ï¼š\n\n- input\n- Textarea\n- select\n\n`textarea`ä¸æ”¯æŒæ’å€¼ï¼ŒåŠ¡å¿…ä½¿ç”¨`v-model`ï¼Œå¦‚ä¸‹å¤é€‰æ¡†éœ€è¦æ³¨æ„å€¼ï¼š\n\n```vue\n<template>\n\t<input\n  type=\"checkbox\"\n  v-model=\"toggle\"\n  true-value=\"yes\"\n  false-value=\"no\" />\n</template>\n```\n\nå•é€‰æ¡†ï¼š\n\n```html\n<input type=\"radio\" v-model=\"pick\" :value=\"first\" />\n<input type=\"radio\" v-model=\"pick\" :value=\"second\" />\n```\n\né€‰æ‹©å™¨ï¼š\n\n```html\n<select v-model=\"selected\">\n  <!-- å†…è”å¯¹è±¡å­—é¢é‡ -->\n  <option :value=\"{ number: 123 }\">123</option>\n</select>\n```\n\n##### ä¿®é¥°ç¬¦ \n\néå¸¸æœ‰ç”¨çš„ä¿®é¥°ç¬¦ï¼š\n\n- .trim\n- .lazy\n- .number\n\nè¡¨å•è¾“å…¥æœ‰ä¸¤ä¸ªæ ‡å‡†äº‹ä»¶ï¼š\n\n- oninput\n- onchange\n\n`vue`å¾ˆé…·ï¼ŒæŒ‰ç…§è§„èŒƒåŒºåˆ†äº†ä¸¤ä¸ªäº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰éœ€è¦ç›‘å¬ã€‚\n\n`oninput`å³åœ¨è¾“å…¥å˜åŒ–æ—¶è°ƒç”¨ç›‘å¬å‡½æ•°ï¼Œ`onchange`åœ¨æŒ‰ä¸‹`enter`æˆ–è€…è„±ç¦»è¾“å…¥æ¡†ä¹‹åè°ƒç”¨ç›‘å¬å‡½æ•°ï¼Œ`.lazy`ä¿®é¥°ç¬¦å¯ä»¥ä¼˜åŒ–æ¸²æŸ“æ¬¡æ•°ã€‚\n\n> React çš„`onChange`äº‹ä»¶å´è°ƒç”¨äº†åŸç”Ÿçš„`oninput`äº‹ä»¶ï¼Œä¸€ä¸ªæ— æ³•å†å¼¥è¡¥çš„é”™è¯¯ã€‚\n\n\n\n#### ç”Ÿå‘½å‘¨æœŸæµ…è§£\n\nç”Ÿå‘½å‘¨æœŸå‡½æ•°è®¾ç½®åœ¨æŸäº›æ—¶é—´æ®µã€æŸäº›çŠ¶æ€è¿‡ç¨‹èŠ‚ç‚¹æ‰§è¡Œã€‚\n\nç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![](mdImgs/lifecycle.16e4c08e.png)\n\n#### ä¾¦å¬å™¨\n\n`watch`åˆ¶å®šçš„å“åº”å¼æ•°æ®ï¼ˆå˜åŒ–çš„çŠ¶æ€ï¼‰ï¼Œæ‰§è¡Œåˆ¶å®šçš„å‡½æ•°ï¼Œç±»ä¼¼`react useEffect`ã€‚\n\nç¤ºä¾‹ï¼š\n\n```js\nconst x = ref(0)\nconst y = ref(0)\n\n// å•ä¸ª ref\nwatch(x, (newX) => {\n  console.log(`x is ${newX}`)\n})\n\n// getter å‡½æ•°\nwatch(\n  () => x.value + y.value,\n  (sum) => {\n    console.log(`sum of x + y is: ${sum}`)\n  }\n)\n\n// å¤šä¸ªæ¥æºç»„æˆçš„æ•°ç»„\nwatch([x, () => y.value], ([newX, newY]) => {\n  console.log(`x is ${newX} and y is ${newY}`)\n})\n```\n\nä¾¦å¬çš„ç›®æ ‡å°†ä¼šä¼ å…¥ä¾¦å¬å¤„ç†å‡½æ•°ï¼Œéœ€è¦æ³¨æ„ä¸èƒ½ä¾¦å¬`reactiveçš„property`ã€‚\n\n> watch æ”¯æŒå¼ºåˆ¶æ·±åº¦ä¾¦å¬ï¼Œæ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•°å³å¯\n>\n> ```js\n> {\n>   deep: true\n> }\n> ```\n\n`watch`æ˜¯æ‡’æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€æ¬¡ä¸ä¼šæ‰§è¡Œï¼Œåªæœ‰æºå˜åŒ–äº†æ‰æ‰§è¡Œã€‚\n\nå¦‚æœéœ€è¦åœ¨é¦–æ¬¡æ‰§è¡Œï¼Œåˆ™ä½¿ç”¨`watchEffect`ä»£æ›¿ã€‚\n\n> watchEffect å¯ä»¥è‡ªåŠ¨åˆ†æå‰¯ä½œç”¨å‘ç”ŸæœŸé—´çš„æºå¹¶ä¸”è¿½è¸ªä¾èµ–\n\n```js\nwatchEffect(async () => {\n  const response = await fetch(url.value)\n  data.value = await response.json()\n})\n```\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œä¾¦å¬å›è°ƒéƒ½ä¼šåœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼Œå› æ­¤å¯èƒ½ä¼šå‡ºç°ä¾¦å¬å™¨å›è°ƒä¸­è®¿é—®çš„`DOM`æ˜¯æ›´æ–°ä¹‹å‰çš„çŠ¶æ€ï¼Œå¦‚æœæƒ³ç¡®ä¿å…¶è®¿é—®çš„`DOM`æœ€æ–°ï¼Œåˆ™éœ€è¦åœ¨æœ€åä¸€ä¸ª`option`å¯¹è±¡`param`æŒ‡æ˜`flush: 'post'`é€‰é¡¹ï¼Œè¿™ç§è¡Œä¸ºç§°ä¸º`watchPostEffect`åˆ·æ–°ï¼ˆå¯ä»¥å¯¼å…¥æ­¤å‡½æ•°ç›´æ¥ä½¿ç”¨ï¼‰ã€‚\n\n> åŒæ­¥åˆ›å»ºçš„ä¾¦å¬å™¨ä¼šå†ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨åœæ­¢ï¼Œå¼‚æ­¥åˆ›å»ºçš„ä¾¦å¬å™¨åˆ™éœ€è¦è°ƒç”¨åˆ›å»ºå‡½æ•°è¿”å›çš„å‡½æ•°ï¼ˆå§‘ä¸”ç§°ä¸º`unwatch`)ä¸»åŠ¨åœæ­¢ä¾¦å¬å™¨ã€‚\n\n#### æ¨¡æ¿ Ref\n\n`template`ä¸­å…ƒç´ å¯ä»¥é€šè¿‡`ref`å±æ€§è·å–åˆ°`DOM`ã€‚\n\n```vue\n<script setup>\nimport { ref, onMounted } from 'vue'\n\n// å£°æ˜ä¸€ä¸ª ref æ¥å­˜æ”¾è¯¥å…ƒç´ çš„å¼•ç”¨\n// å¿…é¡»å’Œæ¨¡æ¿ ref åŒå\nconst input = ref(null)\n\nonMounted(() => {\n  input.value.focus()\n})\n</script>\n\n<template>\n  <input ref=\"input\" />\n</template>\n```\n\näº¦æˆ–æ˜¯å¤šä¸ª`DOM`ï¼ŒæŒ‚è½½åè‡ªåŠ¨å¡«å……ï¼š\n\n> ref å¯ä»¥æ˜¯å‡½æ•°ï¼Œref å¯ä»¥ç»™ç»„ä»¶å±æ€§èµ‹å€¼ï¼Œæ­¤æ—¶å¯ä»¥å–å¾—ç»„ä»¶å®ä¾‹ï¼ˆä¸æ¨èä½¿ç”¨æ­¤æ–¹æ³•å®ç°çˆ¶å­ç»„ä»¶çš„äº¤äº’ï¼‰ï¼Œå¹¶ä¸”`<secript setup>`è¯­æ³•ç³–çš„ç»„ä»¶é»˜è®¤ä¸æ”¯æŒæ­¤ç‰¹æ€§ï¼Œä½¿ç”¨æ­¤è¯­æ³•ç³–å°†é»˜è®¤è®¾ç½®ç»„ä»¶ä¸ºç§æœ‰çŠ¶æ€ï¼Œé™¤éå­ç»„ä»¶é€šè¿‡`defineExpose`è¿™ä¸»åŠ¨æš´éœ²è‡ªå·±çš„æ•°æ®ã€‚\n\n```vue\n<script setup>\nimport { ref, onMounted } from 'vue'\n\nconst list = ref([\n  /* ... */\n])\n\nconst itemRefs = ref([])\n\nonMounted(() => console.log(itemRefs.value))\n</script>\n\n<template>\n  <ul>\n    <li v-for=\"item in list\" ref=\"itemRefs\">\n      {{ item }}\n    </li>\n  </ul>\n</template>\n```\n\n> åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œref æ•°ç»„**ä¸èƒ½**ä¿è¯ä¸æºæ•°ç»„ç›¸åŒçš„é¡ºåºã€‚\n\n#### ç»„ä»¶åŸºç¡€\n\nå°†`vue`ç»„ä»¶å•ç‹¬å®šä¹‰åœ¨ä¸€ä¸ª`.vue`æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º`single file component`ï¼ˆå•æ–‡ä»¶ç»„ä»¶ï¼‰ã€‚\n\nåœ¨`setup`è¯­æ³•ç³–ä¸­ï¼Œä½¿ç”¨`defineProps`å‡½æ•°å®šä¹‰`props`ç±»å‹ã€‚\n\n> setup è¯­æ³•ç³–ä¸­ defineProps/defineEmits éƒ½æ˜¯å…¨å±€å®å®šä¹‰ï¼Œä¸éœ€è¦æ˜¾å¼å¼•å…¥\n\nç»„ä»¶å¯ä»¥é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬æ¥å®ç°çˆ¶ç»„ä»¶äº¤äº’ã€‚\n\n```vue\n// çˆ¶ç»„ä»¶\n<template>\n\t<BlogPost\n  ...\n  @enlarge-text=\"postFontSize += 0.1\"\n />\n</template>\n\n// å­ç»„ä»¶\n<!-- BlogPost.vue, çœç•¥äº† <script> -->\n<template>\n  <div class=\"blog-post\">\n    <h4>{{ title }}</h4>\n    <button @click=\"$emit('enlarge-text')\">Enlarge text</button>\n  </div>\n</template>\n```\n\nçˆ¶ç»„ä»¶ä¼ é€’è‡ªå®šä¹‰äº‹ä»¶`enlarge-text`ï¼Œå­ç»„ä»¶ç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œç›‘å¬å‡½æ•°æ˜¾ç¤ºåœ°è°ƒç”¨äº†`$emit('enlarge-text')`æ¥å¼•ç”¨çˆ¶ç»„ä»¶ä¼ é€’æ¥çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚\n\n`$emit`æ˜¯å†…ç½®çš„æ–¹æ³•ï¼Œè¿™äº›äº‹ä»¶ä¹Ÿå¯ä»¥æ˜¾ç¤ºåœ°å£°æ˜ï¼Œåœ¨`setup`è¯­æ³•ç³–ä¸­ï¼Œä½¿ç”¨`defineEmits`æ¥å£°æ˜ã€‚\n\n```vue\n<script setup>\n\tconst emit = defineEmits(['enlarge-text'])\n</script>\n<template>\n\t<button @click=\"emit('enlarge-text')\">\n    change\n  </button>\n</template>\n```\n\n##### æ’æ§½\n\nç»„ä»¶ä¸­å¯ä»¥ä¼ é€’ HTML å†…å®¹æˆ–å…¶ä»–ç»„ä»¶ï¼š\n\n```html\n<AlertBox>\n  Something bad happened.\n</AlertBox>\n```\n\nä¼ å…¥çš„å†…å®¹åœ¨ç»„ä»¶å†…ä½•å¤„æ˜¾ç¤ºï¼Œå–å†³äºç»„ä»¶å†…`slot`å…ƒç´ çš„ä½ç½®ã€‚\n\n`HTML`åªå…è®¸å°‘æ•°çš„ç‰¹æ®Šå…ƒç´ çœç•¥å…¶å…³é—­æ ‡ç­¾ï¼Œæœ€å¸¸è§çš„æ˜¯`input`å’Œ`img`ï¼Œå…¶ä»–çš„å…ƒç´ æœ€ä½³å®è·µå°±æ˜¯ä¸»åŠ¨ä¿æŒé—­åˆæ ‡ç­¾ã€‚\n\n\n\n### æ·±å…¥\n\n\n\n#### ç»„ä»¶æ³¨å†Œ\n\nå…¨å±€æ³¨å†Œä¹‹å‰è¯´è¿‡ï¼Œå®ƒçš„ç¼ºé™·åœ¨äºæ„å»ºç³»ç»Ÿæ— æ³•ç§»é™¤æœªä½¿ç”¨çš„ç»„ä»¶ï¼ˆtree-shakingï¼‰ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­ä¾èµ–å…³ç³»å°†ä¼šå› æ­¤å˜å¾—æ¨¡ç³Šï¼Œå…¨å±€å˜é‡çš„æ•°é‡éª¤å¢ã€‚\n\nè€Œåœ¨å•æ–‡ä»¶ç»„ä»¶ä¸­ä½¿ç”¨`setup`è¯­æ³•ç³–ï¼Œå¯¼å…¥çš„ç»„ä»¶å¯ä»¥ç›´æ¥åœ¨`template`ä¸­ä½¿ç”¨ï¼Œå³ä½¿ç»„ä»¶åæ˜¯å¤§é©¼å³°æ ¼å¼ï¼Œä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨æ—¶ç›´æ¥ç”¨çŸ­æ¨ªçº¿å‘½åè°ƒç”¨ã€‚\n\n\n\n#### Props\n\nåŒºåˆ†ç»„ä»¶é€ä¼ å’Œç»„ä»¶æœ¬èº«çš„å‚æ•°ä¾èµ–äº`props`å£°æ˜ï¼Œä½¿ç”¨`setup`è¯­æ³•ç³–æ—¶éœ€è¦ç”¨`defineProps`æ˜¾å¼å£°æ˜ã€‚\n\n`props`åå­—å»ºè®®ä½¿ç”¨å°é©¼å³°æ ¼å¼ï¼ŒåŒæ—¶å¯ä»¥é¿å…åœ¨å…¶ä½œä¸ºå±æ€§`key`æ—¶å¿…é¡»å¸¦å¼•å·ã€‚åœ¨å­ç»„ä»¶ä¼ é€’`props`æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºçŸ­æ¨ªçº¿å‘½åã€‚\n\né™æ€å’ŒåŠ¨æ€ä¼ å€¼çš„åŒºåˆ«åœ¨äºæ˜¯å¦ä½¿ç”¨`v-bind`æˆ–è€…ç¼©å†™æ ¼å¼ï¼Œä»»ä½•ç±»å‹çš„å€¼éƒ½å¯ä»¥ä½œä¸º`props`ä¼ é€’ã€‚\n\n> ç±»å‹ä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„ç±»æˆ–è€…æ„é€ å‡½æ•°\n\né€šå¸¸æ˜¾å¼çš„ç±»å‹å¦‚ä¸‹ï¼š\n\n- `String`\n- `Number`\n- `Boolean`\n- `Array`\n- `Date`\n- `Function`\n- `Symbol`\n\n- Object(ä¼ é€’å¯¹è±¡æ—¶ï¼Œä¸è¦åœ¨å­ç»„ä»¶ä¿®æ”¹å¯¹è±¡å†…éƒ¨çš„æ•°æ®)\n\n`Props`çš„ä¼ é€’éµå¾ª`å•é¡¹æ•°æ®æµ`çš„åŸåˆ™ï¼Œä¿æŒäº†æ•°æ®æµçš„æ¸…æ™°åº¦ï¼Œé™ä½å¤æ‚æ•°æ®æµçš„å¿ƒæ™ºè´Ÿæ‹…ã€‚\n\nå¦‚æœå­ç»„ä»¶ä»…ä»…éœ€è¦çˆ¶ç»„ä»¶ä¼ ä¸€ä¸ªåˆå§‹å€¼ï¼Œåˆ™å­ç»„ä»¶åº”è¯¥åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªå±€éƒ¨å±æ€§ä¿å­˜åˆå§‹å€¼ï¼Œäº¦æˆ–æ˜¯å®šä¹‰ä¸€ä¸ªåŸºäº`props`çš„è®¡ç®—å±æ€§ã€‚\n\n\n\næ‰€æœ‰çš„ç±»å‹ä¾‹å­ï¼š\n\n```js\ndefineProps({\n  // åŸºç¡€ç±»å‹æ£€æŸ¥\n  // ï¼ˆç»™å‡º `null` å’Œ `undefined` å€¼åˆ™ä¼šè·³è¿‡ä»»ä½•ç±»å‹æ£€æŸ¥ï¼‰\n  propA: Number,\n  // å¤šç§å¯èƒ½çš„ç±»å‹\n  propB: [String, Number],\n  // å¿…ä¼ ï¼Œä¸”ä¸º String ç±»å‹\n  propC: {\n    type: String,\n    required: true\n  },\n  // Number ç±»å‹çš„é»˜è®¤å€¼\n  propD: {\n    type: Number,\n    default: 100\n  },\n  // å¯¹è±¡ç±»å‹çš„é»˜è®¤å€¼\n  propE: {\n    type: Object,\n    // å¯¹è±¡æˆ–æ•°ç»„çš„é»˜è®¤å€¼\n    // å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è¿”å›ã€‚\n    // è¯¥å‡½æ•°æ¥æ”¶ç»„ä»¶æ‰€æ¥æ”¶åˆ°çš„åŸå§‹ prop ä½œä¸ºå‚æ•°ã€‚\n    default(rawProps) {\n      return { message: 'hello' }\n    }\n  },\n  // è‡ªå®šä¹‰ç±»å‹æ ¡éªŒå‡½æ•°\n  propF: {\n    validator(value) {\n      // The value must match one of these strings\n      return ['success', 'warning', 'danger'].includes(value)\n    }\n  },\n  // å‡½æ•°ç±»å‹çš„é»˜è®¤å€¼\n  propG: {\n    type: Function,\n    // ä¸åƒå¯¹è±¡æˆ–æ•°ç»„çš„é»˜è®¤ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ã€‚è¿™ä¼šæ˜¯ä¸€ä¸ªç”¨æ¥ä½œä¸ºé»˜è®¤å€¼çš„å‡½æ•°\n    default() {\n      return 'Default function'\n    }\n  }\n})\n```\n\né€šå¸¸æˆ‘ä»¬åªéœ€è¦ç”¨åˆ°æœ€ç®€å•çš„å‡ ä¸ªç±»å‹ï¼Œå¦‚æœè¿‡äºå¤æ‚ï¼Œæˆ–è®¸å¯ä»¥æƒ³æƒ³æœ‰æ²¡æœ‰ä»€ä¹ˆå¯ä»¥ä¼˜åŒ–çš„ã€‚\n\n","title":"Vue3 keyword","date":"2022/6/16","tags":["Vue"],"mainImg":"https://images.unsplash.com/photo-1518818608552-195ed130cdf4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NTUzNDc3OTI&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1518818608552-195ed130cdf4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NTUzNDc3OTI&ixlib=rb-1.2.1&q=80&w=400","intro":"Vue3 æ–‡æ¡£å…³é”®å†…å®¹æ€»ç»“"}},"__N_SSG":true}