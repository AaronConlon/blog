{"pageProps":{"post":{"slug":"JavaScriptçš„åŸå‹é“¾","content":"\n### å‰è¨€\n\næ¯«æ— ç–‘é—®ï¼æ¯ä¸€ä¸ª JavaScript å·¥ç¨‹å¸ˆéƒ½åº”è¯¥äº†è§£ä»€ä¹ˆæ˜¯åŸå‹é“¾ã€‚\n\n\n\n### åŸå‹\n\nåœ¨è°ˆåŸå‹é“¾ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè°ˆè°ˆåŸå‹ï¼Œåœ¨è°ˆåŸå‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹æ„é€ å‡½æ•°ã€‚\n\nåœ¨ JavaScript çš„ä¸–ç•Œä¸­ï¼Œå®ä¾‹éƒ½æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ‰§è¡Œå¾—æ¥çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼š\n\n```js\nfunction Person() {\n  this.age = 100;\n  this.sayAge = function() {\n    console.log(this.age);\n  }\n}\n```\n\næˆ‘ä»¬é€šè¿‡`new`å»åˆ›å»ºä¸¤ä¸ªå®ä¾‹:\n\n```js\nconst p1 = new Person();\nconst p2 = new Person();\n```\n\næ­¤æ—¶ï¼Œ`p1`å’Œ`p2`éƒ½å…·æœ‰åŒåçš„æ–¹æ³•`sayAge()`ï¼Œä½†æ˜¯åœ¨åˆ›å»ºæ˜¯å®ä¾‹çš„æ—¶å€™ï¼Œè¿™ä¸ªåŒåçš„æ–¹æ³•è¢«åˆ›å»ºäº†ä¸¤æ¬¡ã€‚\n\n`p1.sayAge !== p2.sayAge`ï¼\n\nå…¶é€»è¾‘ç­‰åŒäº`new Function(\"console.log(this.age)\")`ï¼Œè¿™å°±é€ å°±äº†ä¸¤ä¸ªåŒåå´ä¸ç›¸ç­‰çš„å‡½æ•°ã€‚\n\nåœ¨åŠŸèƒ½ä¸ŠäºŒè€…éƒ½æ˜¯æ‰“å°`age`ï¼Œæ²¡æœ‰å¿…è¦åˆ›å»ºä¸¤ä¸ªå‡½æ•°å»å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†æ­¤å‡½æ•°ç›´æ¥å®šä¹‰åœ¨`Person`æ„é€ å‡½æ•°ä¹‹å¤–ï¼Œç„¶ååœ¨å†…éƒ¨å¼•ç”¨å³å¯ã€‚\n\nä½†æ˜¯è¿™æ ·ä¸€æ¥åˆä¼šè®©å¤–éƒ¨ä½œç”¨åŸŸæ›´ä¸ºæ··ä¹±ï¼Œå•ä¸ªæ–¹æ³•è¿˜å¥½ï¼Œå¦‚æœéœ€è¦åˆ›å»ºå¤šä¸ªè¿™æ ·çš„å‡½æ•°ï¼Œåˆ™ä¸å®¹æ˜“è®©è¿™éƒ¨åˆ†ä»£ç èšåˆèµ·æ¥ã€‚\n\né’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨`åŸå‹æ¨¡å¼`æ¥è§£å†³ã€‚\n\n#### åŸå‹æ¨¡å¼\n\næ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰`prototype`å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªåŒ…å«åº”è¯¥ç”±ç‰¹å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•çš„`å¯¹è±¡`ã€‚\n\nåœ¨ä½¿ç”¨`new`æ“ä½œç¬¦æ„å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå®ä¾‹æš´éœ²å‡º`__proto__`å±æ€§å°†æ„é€ å‡½æ•°åŸå‹ä¸Šå°†å…±äº«çš„å±æ€§å’Œæ–¹æ³•å¤åˆ¶äº†ä¸‹æ¥ï¼Œå¦‚æ­¤ä¸€æ¥åªè¦æˆ‘ä»¬ä¸ºæ„é€ å‡½æ•°æ·»åŠ å¥½`prototype`å±æ€§å¯¹è±¡ï¼Œé‚£ä¹ˆå®ä¾‹å°±å¯ä»¥å…±äº«åˆ°è¿™äº›å±æ€§å’Œæ–¹æ³•äº†ã€‚\n\nä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š\n\n```js\nfunction Person() {}\nPerson.prototype.age = 100;\nPerson.prototype.sayAge = function() {\n  console.log(this.age);\n}\n// å®ä¾‹åŒ–\nconst p1 = new Person();\nconst p2 = new Person();\np1.sayAge === p2.sayAge; // true\n```\n\nä¸Šè¿°ä¾‹å­æ„é€ å‡½æ•°æ˜¯ç©ºå‡½æ•°ï¼Œä½†æ˜¯å®ä¾‹ä¾ç„¶æœ‰å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚\n\n#### ç†è§£åŸå‹\n\nåˆ›å»ºå‡½æ•°çš„åŒæ—¶ï¼Œæ­¤å‡½æ•°ä¾¿å…·æœ‰æŒ‡å‘å…¶`åŸå‹å¯¹è±¡`çš„`prototype`å±æ€§ï¼\n\nå¹¶ä¸”ï¼Œæ¯ä¸€ä¸ªå‡½æ•°çš„`åŸå‹å¯¹è±¡`éƒ½è‡ªåŠ¨å…·æœ‰ä¸€ä¸ª`constructor`å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘ä¸ä¹‹å…³è”çš„æ„é€ å‡½æ•°ï¼\n\n`Person.prototype.constructor === Person`!\n\næ¢å¥è¯è¯´ï¼Œæ„é€ å‡½æ•°å…·æœ‰`prototype`æŒ‡å‘åŸå‹ï¼Œè€Œå…¶åŸå‹å…·æœ‰`constructor`æŒ‡å‘æ„é€ å‡½æ•°ï¼ŒäºŒè€…æ˜¯ä¸€ä¸ªäº’ç›¸å¼•ç”¨çš„ç¯ã€‚\n\n> `Function`çš„æ„é€ å‡½æ•°ä¹Ÿæ˜¯`Function`!\n>\n> `Function.constructor === Function; // true`\n\nåœ¨è‡ªå®šä¹‰æ„é€ å‡½æ•°çš„æ—¶å€™ï¼ŒåŸå‹é»˜è®¤è·å¾—`constructor`å±æ€§ï¼Œå…¶ä»–çš„æ–¹æ³•ï¼ˆè¯¸å¦‚`toString()`ï¼‰ç»§æ‰¿è‡ª`Object`ï¼\n\nåœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ï¼Œæ­¤å¯¹è±¡å¯ä»¥é€šè¿‡`__proto__`å±æ€§è®¿é—®åˆ°æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚\n\n> JavaScript é«˜çº§ç¨‹åºè®¾è®¡ï¼šâ€œå®ä¾‹ä¸æ„é€ å‡½æ•°åŸå‹ä¹‹é—´æœ‰ç›´æ¥çš„è”ç³»ï¼Œä½†å®ä¾‹ä¸æ„é€ å‡½æ•°ä¹‹é—´æ²¡æœ‰ï¼â€\n\n### åŸå‹é“¾\n\nè®©æˆ‘ä»¬æ¥çœ‹ä¸€å¼ æµä¼ å¾ˆå¹¿çš„å›¾ç¤ºå»å­¦ä¹ åŸå‹é“¾ï¼š\n\n![](https://clarkdo.js.org/public/img/jsobj_full.jpg)\n\nè‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼Œé€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œå®ä¾‹åŒ–å¾—åˆ°å¯¹è±¡çš„è¿‡ç¨‹æˆ‘ä»¬å·²ç»è¯´è¿‡äº†ã€‚\n\nç°åœ¨å…³æ³¨ä»¥ä¸‹å›¾ä¸­`Foo()`è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°ä¹Ÿæ˜¯`å®ä¾‹`ï¼\n\nä¸€åˆ‡è‡ªå®šä¹‰å‡½æ•°çš„`__proto__`å±æ€§éƒ½æŒ‡å‘äº†`Function`çš„åŸå‹å¯¹è±¡ï¼Œå› æ­¤ï¼š\n\n`Foo.__proto__ === Function.prototype`!\n\nå¹¶ä¸”ï¼Œ`Function.__proto__ === Function.prototype`ï¼\n\nè¿™æˆ–è®¸ä¼šè®©äººéå¸¸è¿·æƒ‘ï¼Œä½†äº‹å®å°±æ˜¯å¦‚æ­¤ã€‚\n\n`Function çš„æ„é€ å‡½æ•°æ˜¯å…¶æœ¬èº«`ï¼\n\næœ€å`Function.prorotype.__proto__ === Object.prototype`!\n\n`Object.prototype.__proto__ === null`å°±æ˜¯å°½å¤´ã€‚\n\nåŸå‹ä¹‹åŸå‹ï¼Œæ„æˆäº†ä¸€æ¡æ¡é“¾ï¼Œä»`Object`åˆ°è‡ªå®šä¹‰æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹ï¼Œå¯¹è±¡ä¹‹é—´çš„åŸå‹å…³ç³»ä¾¿æ˜¯è¿™äº›é“¾è¿æ¥èµ·æ¥çš„ã€‚\n\nè¿™å¼ å›¾èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç†è§£åŸå‹å’ŒåŸå‹é“¾ï¼Œå€¼å¾—æ”¶è—~\n\n### æ€»ç»“\n\næˆ‘ä»¬é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºäº†å®ä¾‹ï¼Œå®ä¾‹ä¹‹é—´å…±äº«ç€æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œæ¯ä¸€ä¸ªå®ä¾‹åœ¨`new`çš„è¿‡ç¨‹ä¸­å°†è¿™äº›å±æ€§å’Œæ–¹æ³•æ”¾åˆ°äº†`__proto__`ä¸Šã€‚\n\næ­¤å¤–ï¼Œæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡å’Œæ„é€ å‡½æ•°ä¹‹é—´å…·æœ‰ç›¸äº’å¼•ç”¨çš„ç¯ã€‚\n\n> ç®­å¤´å‡½æ•°ä¸å­˜åœ¨åŸå‹å¯¹è±¡ï¼Œä¸èƒ½ä½¿ç”¨`new`å»å°è¯•å®ä¾‹åŒ–ï¼\n\n\n\n### å‚è€ƒ\n\n- [å½»åº•å¼„æ‡‚prototype, __proto__, constructor, instanceofçš„æ¸Šæº](https://mp.weixin.qq.com/s/5Pc7tuAyUGeMn7-ws0wBcA)\n","title":"JavaScriptçš„åŸå‹é“¾","date":"2022/1/10","tags":["JavaScript","é¢è¯•é¢˜"],"mainImg":"https://images.unsplash.com/photo-1547658719-da2b51169166?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDE4MTc4NjY&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1547658719-da2b51169166?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2NDE4MTc4NjY&ixlib=rb-1.2.1&q=80&w=400","intro":"æµ…è§£ JavaScript åŸå‹é“¾ï¼"}},"__N_SSG":true}