{"pageProps":{"post":{"slug":"æ„å»ºtypescriptç»ƒä¹ ç¯å¢ƒ","contentHtml":"<p>æˆ‘è¯•ç€ç¼©å°è§£å†³çš„é—®é¢˜çš„èŒƒå›´,ä¸è¦è€ƒè™‘\"å¤ªå¤šç»†èŠ‚\",å³ä½¿è¿™äº›æœ¬æ¥å°±æ²¡æœ‰ä»€ä¹ˆç»†èŠ‚,ä½†æ˜¯ä»æˆ‘çš„æ°´å¹³æ¥è¯´,ä¹Ÿè®¸éœ€è¦å‡å°ä¸€äº›èŒƒå›´,ä»¥è‡³äºæˆ‘èƒ½å¤Ÿå¿«é€Ÿå¤„ç†é—®é¢˜,å¹¶ä¸”æœ‰ä¸€äº›æ€è€ƒå’Œæˆæœ.</p>\n<p>ä»Šå¤©çš„é—®é¢˜æ˜¯,å¦‚ä½•ä½¿ç”¨<code>webpack</code>æ„å»ºä¸€ä¸ª<code>typescript</code>è”ç³»ç¯å¢ƒ,å¹¶ä¸”é€šè¿‡å°†<code>typescript</code>ä»£ç è½¬ä¸º<code>ES6</code>çš„<code>JavaScript</code>ä»£ç ,ä¸”è¿è¡Œç¯å¢ƒæ˜¯<code>node</code>.</p>\n<h1>å®è·µ</h1>\n<pre><code class=\"hljs language-bash\"><span class=\"lineNumber\">1</span><span class=\"hljs-comment\"># å½“å‰å¤„äº test ç›®å½•</span>\n<span class=\"lineNumber\">2</span><span class=\"hljs-comment\"># åˆå§‹åŒ– package.json</span>\n<span class=\"lineNumber\">3</span>yarn init -y\n<span class=\"lineNumber\">4</span><span class=\"hljs-comment\"># åˆ›å»ºæ–‡ä»¶å’Œç›®å½•</span>\n<span class=\"lineNumber\">5</span>mkdir src\n<span class=\"lineNumber\">6</span>touch src/index.ts\n<span class=\"lineNumber\">7</span><span class=\"hljs-comment\"># æœ¬åœ°å®‰è£… webpack</span>\n<span class=\"lineNumber\">8</span>yarn add -D webpack webpack-cli\n<span class=\"lineNumber\">9</span><span class=\"hljs-comment\"># å®‰è£… typescript</span>\n<span class=\"lineNumber\">10</span>yarn add -D typescript\n<span class=\"lineNumber\">11</span><span class=\"hljs-comment\"># eslint</span>\n<span class=\"lineNumber\">12</span>yarn add -D eslint\n<span class=\"lineNumber\">13</span><span class=\"hljs-comment\"># eslint init,npx è°ƒç”¨æœ¬åœ°å®‰è£…çš„ eslint</span>\n<span class=\"lineNumber\">14</span>npx eslint --init\n<span class=\"lineNumber\">15</span>âœ” How would you like to use ESLint? Â· style\n<span class=\"lineNumber\">16</span>âœ” What <span class=\"hljs-built_in\">type</span> of modules does your project use? Â· esm\n<span class=\"lineNumber\">17</span>âœ” Which framework does your project use? Â· none\n<span class=\"lineNumber\">18</span>âœ” Does your project use TypeScript? Â· No / Yes\n<span class=\"lineNumber\">19</span>âœ” Where does your code run? Â· browser, node\n<span class=\"lineNumber\">20</span>âœ” How would you like to define a style <span class=\"hljs-keyword\">for</span> your project? Â· guide\n<span class=\"lineNumber\">21</span>âœ” Which style guide <span class=\"hljs-keyword\">do</span> you want to follow? Â· airbnb\n<span class=\"lineNumber\">22</span>âœ” What format <span class=\"hljs-keyword\">do</span> you want your config file to be <span class=\"hljs-keyword\">in</span>? Â· JavaScript\n<span class=\"lineNumber\">23</span>Checking peerDependencies of eslint-config-airbnb-base@latest\n<span class=\"lineNumber\">24</span>The config that you<span class=\"hljs-string\">'ve selected requires the following dependencies:\n<span class=\"lineNumber\">25</span> \n<span class=\"lineNumber\">26</span>@typescript-eslint/eslint-plugin@latest eslint-config-airbnb-base@latest eslint@^5.16.0 || ^6.8.0 || ^7.2.0 eslint-plugin-import@^2.22.1 @typescript-eslint/parser@latest\n<span class=\"lineNumber\">27</span>âœ” Would you like to install them now with npm? Â· No / Yes\n<span class=\"lineNumber\">28</span>Installing @typescript-eslint/eslint-plugin@latest, eslint-config-airbnb-base@latest, eslint@^5.16.0 || ^6.8.0 || ^7.2.0, eslint-plugin-import@^2.22.1, @typescript-eslint/parser@latest\n<span class=\"lineNumber\">29</span> \n<span class=\"lineNumber\">30</span>added 99 packages in 5s\n<span class=\"lineNumber\">31</span> \n<span class=\"lineNumber\">32</span>29 packages are looking for funding\n<span class=\"lineNumber\">33</span>  run `npm fund` for details\n<span class=\"lineNumber\">34</span>Successfully created .eslintrc.js file in /Users/yi/test\n<span class=\"lineNumber\">35</span># ç°åœ¨åˆå§‹åŒ–å®Œæˆ,è‡ªåŠ¨ç”Ÿæˆäº† eslint çš„é…ç½®æ–‡ä»¶ .eslintrc.js</span></code></pre> \n\n<p>ç°åœ¨,æ¥ç›´æ¥å†™ä¸€ä¸ª<code>webpack</code> é…ç½®æ–‡ä»¶,ä¸ä½¿ç”¨ webpack cli åˆå§‹åŒ–é…ç½®æ–‡ä»¶æ˜¯å› ä¸ºæˆ‘æƒ³é€šè¿‡è‡ªå·±å†™ä¸€ä¸ªæ¥åŠ æ·±å°è±¡,å¹¶ä¸”ä¸ä½¿ç”¨é»˜è®¤çš„<code>ts-loader</code>å¤„ç† <code>typescript</code>ä»£ç .</p>\n<p><strong>æˆ‘æƒ³ç”¨ swc-loader</strong>.</p>\n<p>å½“æˆ‘å¼€å§‹åˆ›å»ºå¹¶ä¸”ç¼–è¾‘è¿™ä¸ª js é…ç½®æ–‡ä»¶çš„æ—¶å€™,æˆ‘å‘ç°<code>eslint</code>å·²ç»å¼€å§‹å®¡æŸ¥è¿™ä¸ªæ–‡ä»¶äº†.</p>\n<p>äºæ˜¯æˆ‘åœ¨<code>package.json</code>é‡Œæ·»åŠ äº†<code>eslintIgnore</code>å­—æ®µé€‰é¡¹,ä¸æ£€æŸ¥<code>js</code>æ–‡ä»¶:</p>\n<pre><code class=\"hljs language-json\"><span class=\"lineNumber\">1</span>{\n<span class=\"lineNumber\">2</span>  <span class=\"hljs-attr\">\"name\"</span>: <span class=\"hljs-string\">\"yi\"</span>,\n<span class=\"lineNumber\">3</span>  <span class=\"hljs-attr\">\"version\"</span>: <span class=\"hljs-string\">\"1.0.0\"</span>,\n<span class=\"lineNumber\">4</span>  <span class=\"hljs-attr\">\"description\"</span>: <span class=\"hljs-string\">\"typescript enviroument\"</span>,\n<span class=\"lineNumber\">5</span>  <span class=\"hljs-attr\">\"main\"</span>: <span class=\"hljs-string\">\"./src/index.ts\"</span>,\n<span class=\"lineNumber\">6</span>  <span class=\"hljs-attr\">\"license\"</span>: <span class=\"hljs-string\">\"MIT\"</span>,\n<span class=\"lineNumber\">7</span>  <span class=\"hljs-attr\">\"devDependencies\"</span>: {\n<span class=\"lineNumber\">8</span>    <span class=\"hljs-comment\">// something</span>\n<span class=\"lineNumber\">9</span>  },\n<span class=\"lineNumber\">10</span>  <span class=\"hljs-attr\">\"eslintIgnore\"</span>: [\n<span class=\"lineNumber\">11</span>    <span class=\"hljs-string\">\"*.js\"</span>\n<span class=\"lineNumber\">12</span>  ]\n<span class=\"lineNumber\">13</span>}\n<span class=\"lineNumber\">14</span></code></pre> \n\n<p>ç»§ç»­ç¼–å†™<code>webpack</code>é…ç½®æ–‡ä»¶:</p>\n<pre><code class=\"hljs language-js\"><span class=\"lineNumber\">1</span><span class=\"hljs-comment\">// webpack.config.js</span>\n<span class=\"lineNumber\">2</span><span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)\n<span class=\"lineNumber\">3</span> \n<span class=\"lineNumber\">4</span><span class=\"hljs-built_in\">module</span>.exports = {\n<span class=\"lineNumber\">5</span>  <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">\"development\"</span>,\n<span class=\"lineNumber\">6</span>  <span class=\"hljs-attr\">entry</span>: <span class=\"hljs-string\">\"./src/index.ts\"</span>,\n<span class=\"lineNumber\">7</span>  <span class=\"hljs-attr\">output</span>: {\n<span class=\"lineNumber\">8</span>    <span class=\"hljs-attr\">path</span>: path.resolve(__dirname, <span class=\"hljs-string\">'dist'</span>),\n<span class=\"lineNumber\">9</span>    <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">'[contenthash].bundle.js'</span>,\n<span class=\"lineNumber\">10</span>  },\n<span class=\"lineNumber\">11</span>  <span class=\"hljs-attr\">module</span>: {\n<span class=\"lineNumber\">12</span>    <span class=\"hljs-attr\">rules</span>: [\n<span class=\"lineNumber\">13</span>      {\n<span class=\"lineNumber\">14</span>        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.ts$/</span>,\n<span class=\"lineNumber\">15</span>        exclude: <span class=\"hljs-string\">'/node_modules/'</span>,\n<span class=\"lineNumber\">16</span>        <span class=\"hljs-attr\">use</span>: {\n<span class=\"lineNumber\">17</span>          <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-string\">'swc-loader'</span>,          \n<span class=\"lineNumber\">18</span>          <span class=\"hljs-attr\">options</span>: {\n<span class=\"lineNumber\">19</span>            <span class=\"hljs-attr\">sync</span>: <span class=\"hljs-literal\">true</span>,\n<span class=\"lineNumber\">20</span>            <span class=\"hljs-attr\">jsc</span>: {\n<span class=\"lineNumber\">21</span>              <span class=\"hljs-attr\">parser</span>: {\n<span class=\"lineNumber\">22</span>                <span class=\"hljs-attr\">syntax</span>: <span class=\"hljs-string\">'typescript'</span>\n<span class=\"lineNumber\">23</span>              }\n<span class=\"lineNumber\">24</span>            }\n<span class=\"lineNumber\">25</span>          }\n<span class=\"lineNumber\">26</span>        }\n<span class=\"lineNumber\">27</span>      }\n<span class=\"lineNumber\">28</span>    ]\n<span class=\"lineNumber\">29</span>  }\n<span class=\"lineNumber\">30</span>}</code></pre> \n\n<p>å¦‚ä¸Šé…ç½®æŒ‡å®š<code>swc-loader</code>å¤„ç†<code>ts</code>æ–‡ä»¶,å¹¶ä¸”è§£æè¯­æ³•æ˜¯<code>typescript</code>.</p>\n<p>æ¥ä¸‹æ¥,<code>swc-loader</code>ä½¿ç”¨çš„æ˜¯<code>swc</code>å»å°†<code>ts</code>ä»£ç è½¬æˆ<code>JavaScript</code>ä»£ç ,é¦–å…ˆéœ€è¦å®‰è£…è¿™äº›å¿…è¦çš„åº“.</p>\n<pre><code class=\"hljs language-bash\"><span class=\"lineNumber\">1</span>yarn add -D @swc/core swc-loader</code></pre> \n\n<p>ç°åœ¨,ç»§ç»­æ›´æ–°<code>webpack.config.js</code>æ–‡ä»¶å†…å®¹:</p>\n<pre><code class=\"hljs language-js\"><span class=\"lineNumber\">1</span>{\n<span class=\"lineNumber\">2</span>  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"yi\"</span>,\n<span class=\"lineNumber\">3</span>  <span class=\"hljs-string\">\"version\"</span>: <span class=\"hljs-string\">\"1.0.0\"</span>,\n<span class=\"lineNumber\">4</span>  <span class=\"hljs-string\">\"description\"</span>: <span class=\"hljs-string\">\"typescript enviroument\"</span>,\n<span class=\"lineNumber\">5</span>  <span class=\"hljs-string\">\"main\"</span>: <span class=\"hljs-string\">\"./src/index.ts\"</span>,\n<span class=\"lineNumber\">6</span>  <span class=\"hljs-string\">\"license\"</span>: <span class=\"hljs-string\">\"MIT\"</span>,\n<span class=\"lineNumber\">7</span>  <span class=\"hljs-string\">\"devDependencies\"</span>: {\n<span class=\"lineNumber\">8</span>    <span class=\"hljs-string\">\"@swc/core\"</span>: <span class=\"hljs-string\">\"^1.2.47\"</span>,\n<span class=\"lineNumber\">9</span>    <span class=\"hljs-string\">\"@typescript-eslint/eslint-plugin\"</span>: <span class=\"hljs-string\">\"^4.14.1\"</span>,\n<span class=\"lineNumber\">10</span>    <span class=\"hljs-string\">\"@typescript-eslint/parser\"</span>: <span class=\"hljs-string\">\"^4.14.1\"</span>,\n<span class=\"lineNumber\">11</span>    <span class=\"hljs-string\">\"typescript\"</span>: <span class=\"hljs-string\">\"^4.1.3\"</span>,\n<span class=\"lineNumber\">12</span>    <span class=\"hljs-string\">\"eslint\"</span>: <span class=\"hljs-string\">\"^7.19.0\"</span>,\n<span class=\"lineNumber\">13</span>    <span class=\"hljs-string\">\"eslint-config-airbnb-base\"</span>: <span class=\"hljs-string\">\"^14.2.1\"</span>,\n<span class=\"lineNumber\">14</span>    <span class=\"hljs-string\">\"eslint-plugin-import\"</span>: <span class=\"hljs-string\">\"^2.22.1\"</span>,\n<span class=\"lineNumber\">15</span>    <span class=\"hljs-string\">\"swc-loader\"</span>: <span class=\"hljs-string\">\"^0.1.12\"</span>,\n<span class=\"lineNumber\">16</span>    <span class=\"hljs-string\">\"webpack\"</span>: <span class=\"hljs-string\">\"^5.19.0\"</span>,\n<span class=\"lineNumber\">17</span>    <span class=\"hljs-string\">\"webpack-cli\"</span>: <span class=\"hljs-string\">\"^4.4.0\"</span>\n<span class=\"lineNumber\">18</span>  },\n<span class=\"lineNumber\">19</span>  <span class=\"hljs-string\">\"scripts\"</span>: {\n<span class=\"lineNumber\">20</span>    <span class=\"hljs-string\">\"dev\"</span>: <span class=\"hljs-string\">\"webpack --config webpack.config.js\"</span>\n<span class=\"lineNumber\">21</span>  },\n<span class=\"lineNumber\">22</span>  <span class=\"hljs-string\">\"eslintIgnore\"</span>: [\n<span class=\"lineNumber\">23</span>    <span class=\"hljs-string\">\"*.js\"</span>\n<span class=\"lineNumber\">24</span>  ]\n<span class=\"lineNumber\">25</span>}</code></pre> \n\n<p>å½“æˆ‘æ„å»ºçš„æ—¶å€™å‘ç°æ²¡æœ‰æ¸…é™¤æ—§çš„æ‰“åŒ…æ–‡ä»¶,äºæ˜¯æƒ³åˆ°ä¸¤ä¸ªåŠæ³•:</p>\n<ul>\n<li>åœ¨ scripts ä¸­ä½¿ç”¨ <code>rm -rf dist</code>ä½œä¸º<code>webpack</code>å‘½ä»¤å‰ç½®å‘½ä»¤,åˆ æ‰<code>dist</code>ç›®å½•</li>\n<li>ä½¿ç”¨ <code>clean-webpack-plugin</code>æ’ä»¶.</li>\n</ul>\n<p>äºæ˜¯é€‰ç”¨æ’ä»¶æ–¹æ¡ˆ,å› ä¸º<code>windows</code>ä¸‹æ— æ³•ä½¿ç”¨ shell å‘½ä»¤åˆ é™¤<code>dist</code>ç›®å½•,<code>scripts</code>æ˜¯ä¸º<code>Unix</code>ç³»ç»Ÿå‡†å¤‡çš„.</p>\n<pre><code class=\"hljs language-bash\"><span class=\"lineNumber\">1</span>yarn add -D clean-webpack-plugin</code></pre> \n\n<p>æ¥ç€,ä¿®æ”¹<code>webpack.config.js</code>æ–‡ä»¶:</p>\n<pre><code class=\"hljs language-js\"><span class=\"lineNumber\">1</span><span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>)\n<span class=\"lineNumber\">2</span><span class=\"hljs-keyword\">const</span> { CleanWebpackPlugin } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'clean-webpack-plugin'</span>);\n<span class=\"lineNumber\">3</span> \n<span class=\"lineNumber\">4</span><span class=\"hljs-built_in\">module</span>.exports = {\n<span class=\"lineNumber\">5</span>  <span class=\"hljs-attr\">mode</span>: <span class=\"hljs-string\">\"development\"</span>,\n<span class=\"lineNumber\">6</span>  <span class=\"hljs-attr\">entry</span>: <span class=\"hljs-string\">\"./src/index.ts\"</span>,\n<span class=\"lineNumber\">7</span>  <span class=\"hljs-attr\">output</span>: {\n<span class=\"lineNumber\">8</span>    <span class=\"hljs-attr\">path</span>: path.resolve(__dirname, <span class=\"hljs-string\">'dist'</span>),\n<span class=\"lineNumber\">9</span>    <span class=\"hljs-attr\">filename</span>: <span class=\"hljs-string\">'[contenthash].bundle.js'</span>,\n<span class=\"lineNumber\">10</span>  },\n<span class=\"lineNumber\">11</span>  <span class=\"hljs-attr\">devtool</span>: <span class=\"hljs-string\">\"source-map\"</span>, <span class=\"hljs-comment\">// è¿˜åŠ äº† source-map,ä¸è¿‡ä¹Ÿè®¸ç”¨ä¸ä¸Š</span>\n<span class=\"lineNumber\">12</span>  <span class=\"hljs-attr\">module</span>: {\n<span class=\"lineNumber\">13</span>    <span class=\"hljs-attr\">rules</span>: [\n<span class=\"lineNumber\">14</span>      {\n<span class=\"lineNumber\">15</span>        <span class=\"hljs-attr\">test</span>: <span class=\"hljs-regexp\">/\\.ts$/</span>,\n<span class=\"lineNumber\">16</span>        exclude: <span class=\"hljs-string\">'/node_modules/'</span>,\n<span class=\"lineNumber\">17</span>        <span class=\"hljs-attr\">use</span>: {\n<span class=\"lineNumber\">18</span>          <span class=\"hljs-attr\">loader</span>: <span class=\"hljs-string\">'swc-loader'</span>,          \n<span class=\"lineNumber\">19</span>          <span class=\"hljs-attr\">options</span>: {\n<span class=\"lineNumber\">20</span>            <span class=\"hljs-attr\">sync</span>: <span class=\"hljs-literal\">true</span>,\n<span class=\"lineNumber\">21</span>            <span class=\"hljs-attr\">jsc</span>: {\n<span class=\"lineNumber\">22</span>              <span class=\"hljs-attr\">parser</span>: {\n<span class=\"lineNumber\">23</span>                <span class=\"hljs-attr\">syntax</span>: <span class=\"hljs-string\">'typescript'</span>\n<span class=\"lineNumber\">24</span>              }\n<span class=\"lineNumber\">25</span>            }\n<span class=\"lineNumber\">26</span>          }\n<span class=\"lineNumber\">27</span>        }\n<span class=\"lineNumber\">28</span>      }\n<span class=\"lineNumber\">29</span>    ]\n<span class=\"lineNumber\">30</span>  },\n<span class=\"lineNumber\">31</span>  <span class=\"hljs-attr\">plugins</span>: [\n<span class=\"lineNumber\">32</span>    <span class=\"hljs-keyword\">new</span> CleanWebpackPlugin(),\n<span class=\"lineNumber\">33</span>  ]\n<span class=\"lineNumber\">34</span>}</code></pre> \n\n<p>ç°åœ¨,å·²ç»å¯ä»¥å°†<code>ts</code>æ–‡ä»¶æ‰“åŒ…æˆ<code>js</code>æ–‡ä»¶äº†,ä½†æ˜¯è¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³:</p>\n<ul>\n<li>typescript ä»£ç çš„é…ç½®,æˆ‘æƒ³ä½¿ç”¨<code>ECMAScript</code>æ¯”è¾ƒæ–°çš„è¯­æ³•,ç¼–è¾‘å™¨æ— æ³•ç»™å‡ºæç¤º,å¹¶ä¸”æŠ¥é”™æŒ‡å‡ºæ–¹æ³•ä¸å­˜åœ¨.</li>\n<li>typescript ä»£ç æç¤ºè¯­æ³•é£æ ¼é—®é¢˜,æœ‰ä¸€äº›æ˜¯æˆ‘ä¸æƒ³éµå¾ª Airbnb çš„é£æ ¼çš„éƒ¨åˆ†.</li>\n<li>æˆ‘æƒ³åœ¨ä¿å­˜çš„æ—¶å€™,ç¼–è¾‘å™¨è‡ªåŠ¨æ ¼å¼åŒ–å¹¶ä¸”ä¿®å¤ä»£ç é£æ ¼çš„é—®é¢˜.</li>\n<li>swcç¼–è¯‘çš„JavaScript æ–‡ä»¶æ˜¯ es5 çš„å†…å®¹,æˆ‘ä¸ç®¡ IE æµè§ˆå™¨æ˜¯ä»€ä¹ˆä¸œè¥¿,åªè¦èƒ½åœ¨æ–°ç‰ˆçš„chrome æµè§ˆå™¨ä¸Šè¿è¡Œå°±å¥½,æˆ–è€…åœ¨è¾ƒæ–°çš„ nodejs ä¸Šè¿è¡Œè‰¯å¥½å°±è¡Œ.</li>\n</ul>\n<h1>è§£ç–‘</h1>\n<blockquote>\n<p><code>tsconfig.json</code>æ–‡ä»¶ä¸­æŒ‡å®šäº†ç”¨æ¥ç¼–è¯‘è¿™ä¸ªé¡¹ç›®çš„æ ¹æ–‡ä»¶å’Œç¼–è¯‘é€‰é¡¹ã€‚</p>\n</blockquote>\n<p>ç¬¬ä¸€ä¸ªé—®é¢˜,ç›´æ¥åœ¨æ ¹ç›®å½•åˆ›å»º<code>tsconfig.json</code>æ–‡ä»¶,ä½œä¸º typescript çš„é…ç½®æ–‡ä»¶,å¢åŠ æŒ‡å®š <code>target</code>çš„é…ç½®é¡¹.</p>\n<pre><code class=\"hljs language-json\"><span class=\"lineNumber\">1</span>{\n<span class=\"lineNumber\">2</span>  <span class=\"hljs-attr\">\"compilerOptions\"</span>: {\n<span class=\"lineNumber\">3</span>    <span class=\"hljs-attr\">\"target\"</span>: <span class=\"hljs-string\">\"esnext\"</span>,\n<span class=\"lineNumber\">4</span>    <span class=\"hljs-attr\">\"removeComments\"</span>: <span class=\"hljs-literal\">true</span>\n<span class=\"lineNumber\">5</span>  },\n<span class=\"lineNumber\">6</span>  <span class=\"hljs-attr\">\"exclude\"</span>: [\n<span class=\"lineNumber\">7</span>    <span class=\"hljs-string\">\"node_modules\"</span>\n<span class=\"lineNumber\">8</span>  ],\n<span class=\"lineNumber\">9</span>  <span class=\"hljs-attr\">\"include\"</span>: [<span class=\"hljs-string\">\"src/*.ts\"</span>]\n<span class=\"lineNumber\">10</span>}</code></pre> \n\n<p>å…³äº<code>typescript</code>ä»£ç çš„é’ˆå¯¹æ€§é…ç½®éƒ½åœ¨è¿™é‡Œ.è¿™ä¸ªçŸ¥è¯†ç‚¹çœŸçš„éå¸¸å¤æ‚çš„æ„Ÿè§‰,æƒ³è¦æ·±å…¥äº†è§£éœ€è¦æ—¶é—´.</p>\n<p>æˆ‘çœ‹åˆ°<code>swc</code>æ ¸å¿ƒå¼€å‘è€…å¤§ä½¬è¯´ç§»æ¤äº†<code>tsc</code>,å› ä¸ºåŸæ¥çš„<code>tsc</code>å¤ªæ…¢.æ‰€ä»¥,å…·ä½“å¦‚ä½•ç¼–è¯‘<code>ts</code>ä»£ç ,æ˜¯å¦æ²¿ç”¨<code>tsconfig.json</code>çš„æ‰€æœ‰é…ç½®,æˆ‘ä¸æ¸…æ¥š,å¦‚æœä½ çŸ¥é“çš„è¯,è¯·å‘Šè¯‰æˆ‘,éå¸¸æ„Ÿè°¢.</p>\n<p>ç¬¬äºŒä¸ªé—®é¢˜æ¯”è¾ƒç®€å•,æ¥çœ‹çœ‹<code>.eslintrc.js</code>:</p>\n<pre><code class=\"hljs language-js\"><span class=\"lineNumber\">1</span><span class=\"hljs-built_in\">module</span>.exports = {\n<span class=\"lineNumber\">2</span>  <span class=\"hljs-attr\">env</span>: {\n<span class=\"lineNumber\">3</span>    <span class=\"hljs-attr\">browser</span>: <span class=\"hljs-literal\">true</span>,\n<span class=\"lineNumber\">4</span>    <span class=\"hljs-attr\">es2021</span>: <span class=\"hljs-literal\">true</span>,\n<span class=\"lineNumber\">5</span>    <span class=\"hljs-attr\">node</span>: <span class=\"hljs-literal\">true</span>,\n<span class=\"lineNumber\">6</span>  },\n<span class=\"lineNumber\">7</span>  <span class=\"hljs-attr\">extends</span>: [\n<span class=\"lineNumber\">8</span>    <span class=\"hljs-string\">'airbnb-base'</span>,\n<span class=\"lineNumber\">9</span>  ],\n<span class=\"lineNumber\">10</span>  <span class=\"hljs-attr\">parser</span>: <span class=\"hljs-string\">'@typescript-eslint/parser'</span>,\n<span class=\"lineNumber\">11</span>  <span class=\"hljs-attr\">parserOptions</span>: {\n<span class=\"lineNumber\">12</span>    <span class=\"hljs-attr\">ecmaVersion</span>: <span class=\"hljs-number\">12</span>,\n<span class=\"lineNumber\">13</span>    <span class=\"hljs-attr\">sourceType</span>: <span class=\"hljs-string\">'module'</span>,\n<span class=\"lineNumber\">14</span>  },\n<span class=\"lineNumber\">15</span>  <span class=\"hljs-attr\">plugins</span>: [\n<span class=\"lineNumber\">16</span>    <span class=\"hljs-string\">'@typescript-eslint'</span>,\n<span class=\"lineNumber\">17</span>  ],\n<span class=\"lineNumber\">18</span>  <span class=\"hljs-attr\">rules</span>: {\n<span class=\"lineNumber\">19</span>    <span class=\"hljs-string\">\"no-console\"</span>: <span class=\"hljs-number\">0</span>\n<span class=\"lineNumber\">20</span>  },\n<span class=\"lineNumber\">21</span>};</code></pre> \n\n<p>è¿™æ˜¯æˆ‘æ ¹æ®<code>eslint init</code>ç”Ÿæˆçš„,è¯è¯´å›æ¥,æƒ³è¦ä½¿ç”¨è‡ªå®šä¹‰çš„é¢å¤–è§„åˆ™,åªéœ€è¦åœ¨<code>rules</code>å†…é€ä¸€æ·»åŠ å³å¯.</p>\n<p>ä¾‹å¦‚,é»˜è®¤ Airbnb å¯¹ console.log ä»£ç ä¼šè­¦å‘Š,å¯ä»¥å¦‚ä¸Šæ‰€è¿°,å–æ¶ˆè­¦å‘Š.</p>\n<p>ç¬¬ä¸‰ä¸ªé—®é¢˜,é¦–å…ˆè¦ç†è§£ç¼–è¾‘å™¨æ’ä»¶:<code>ESLint</code>æ’ä»¶çš„ä½œç”¨æ˜¯è®©å¼€å‘è€…åœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­å‘ç°é—®é¢˜,è€Œä¸æ˜¯åœ¨æ‰§è¡Œä¸­å‘ç°é—®é¢˜,<code>eslint</code>åŒ…å¦‚æœä¸æ‰§è¡Œ<code>cli</code>å‘½ä»¤,æ˜¯æ— æ³•æŠ¥å‘Šå’Œä¿®å¤ä¸åˆè§„èŒƒçš„ä»£ç çš„.</p>\n<p><code>ESLint</code>æ’ä»¶å¯ä»¥.</p>\n<p>é¦–å…ˆä¿è¯å®‰è£…å¥½<code>ESLint</code>æ’ä»¶,å¹¶ä¸”å®‰è£…å¥½<code>ESLint</code>åŒ…,æ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯å…¨å±€,æ’ä»¶é€šè¿‡<code>eslint</code>åŒ…å’Œé…ç½®æ–‡ä»¶å»è°ƒç”¨<code>cli</code>è¿›è¡Œä»£ç è§„èŒƒè®¾ç½®å’Œä¿®å¤.</p>\n<blockquote>\n<p>Integrates <a href=\"http://eslint.org/\">ESLint</a> into VS Code. If you are new to ESLint check the <a href=\"http://eslint.org/\">documentation</a>.</p>\n<p>The extension uses the ESLint library installed in the opened workspace folder. If the folder doesn't provide one the extension looks for a global install version. If you haven't installed ESLint either locally or globally do so by running <code>npm install eslint</code> in the workspace folder for a local install or <code>npm install -g eslint</code> for a global install.</p>\n<p>On new folders you might also need to create a <code>.eslintrc</code> configuration file. You can do this by either using the VS Code command <code>Create ESLint configuration</code> or by running the <code>eslint</code> command in a terminal. If you have installed ESLint globally (see above) then run <a href=\"http://eslint.org/docs/user-guide/command-line-interface\"><code>eslint --init</code></a> in a terminal. If you have installed ESLint locally then run <a href=\"http://eslint.org/docs/user-guide/command-line-interface\"><code>.\\node_modules\\.bin\\eslint --init</code></a> under Windows and <a href=\"http://eslint.org/docs/user-guide/command-line-interface\"><code>./node_modules/.bin/eslint --init</code></a> under Linux and Mac.</p>\n</blockquote>\n<p>ä¸Šè¿°æ–‡ç« ä¸­å·²ç»å®‰è£…äº†<code>package</code>,è®¾ç½®äº†<code>.eslintrc.js</code>é…ç½®æ–‡ä»¶,æ¥ç€éœ€è¦æ‰“å¼€<code>vscode</code>çš„ä¸ªäºº<code>settings.json</code>é…ç½®æ–‡ä»¶,æ·»åŠ ä¸€ä¸‹é…ç½®:</p>\n<pre><code class=\"hljs language-json\"><span class=\"lineNumber\">1</span>{\n<span class=\"lineNumber\">2</span>    <span class=\"hljs-attr\">\"[typescript]\"</span>: {\n<span class=\"lineNumber\">3</span>    <span class=\"hljs-attr\">\"editor.formatOnSave\"</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-comment\">// ä¿å­˜åæ ¼å¼åŒ–</span>\n<span class=\"lineNumber\">4</span>    <span class=\"hljs-attr\">\"editor.autoIndent\"</span>: <span class=\"hljs-string\">\"full\"</span>,\n<span class=\"lineNumber\">5</span>    <span class=\"hljs-attr\">\"editor.codeActionsOnSave\"</span>: {\n<span class=\"lineNumber\">6</span>      <span class=\"hljs-attr\">\"source.fixAll\"</span>: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\">// å…¨å±€ä¿®å¤</span>\n<span class=\"lineNumber\">7</span>    },\n<span class=\"lineNumber\">8</span>    <span class=\"hljs-comment\">// é»˜è®¤æ ¼å¼åŒ–å·¥å…·</span>\n<span class=\"lineNumber\">9</span>    <span class=\"hljs-attr\">\"editor.defaultFormatter\"</span>: <span class=\"hljs-string\">\"dbaeumer.vscode-eslint\"</span>\n<span class=\"lineNumber\">10</span>  },\n<span class=\"lineNumber\">11</span>}</code></pre> \n\n<p>è‡ªæ­¤,ä¿å­˜ä»£ç åå°±èƒ½æ ¹æ®<code>eslint</code>é…ç½®æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–å’Œä¿®å¤,å¯¹äºæ‡’ç™Œæ™šæœŸå¼€å‘è€…æ¥è¯´å®åœ¨æ˜¯å¤ªæœ‰ç”¨äº†.</p>\n<blockquote>\n<p>å¯¹äºéƒ¨åˆ†ä¸æƒ³è¦ä½¿ç”¨ eslint é…ç½®çš„ä»£ç ,å¯ä»¥ä½¿ç”¨ eslint çš„æ³¨é‡ŠæŒ‡æ˜ä¸éœ€è¦ eslint è§„èŒƒåŒ–.</p>\n</blockquote>\n<p>ä¾‹å¦‚:</p>\n<pre><code class=\"hljs language-typescript\"><span class=\"lineNumber\">1</span><span class=\"hljs-keyword\">let</span> a = <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\">// eslint-disable-line</span></code></pre> \n\n<p>ä¸Šè¿°é…ç½®åˆ™ä¸ä¼šå¼ºåˆ¶ä»¥åˆ†å·ç»“å°¾,å¦‚æœä½ çš„é…ç½®æ˜¯å¿…é¡»åˆ†å·ç»“å°¾çš„è¯.æ›´å¤šæ³¨é‡Šçœ‹è¿™é‡Œ: <a href=\"https://eslint.org/docs/user-guide/configuring/configuration-files#configuration-file-formats\">Configuration Files - ESLint - Pluggable JavaScript linter</a>.</p>\n<p>æœ€åä¸€ä¸ªé—®é¢˜æ˜¯æˆ‘è§‰å¾—å¯¹æ–°æ‰‹æœ‹å‹æ¥è¯´éå¸¸è¿·æƒ‘çš„ä¸€ä¸ªé—®é¢˜.</p>\n<p>ä¸ºäº†å‰ç«¯å…¼å®¹ç¯å¢ƒ,æˆ‘ä»¬ç»å¸¸éœ€è¦åšéå¸¸å¤šçš„é…ç½®,è‡ªåŠ¨æ·»åŠ <code>polyfill</code>ä»£ç æ¥è®©ä¸æ”¯æŒæ–°æ–¹æ³•å’Œé€šç”¨è§„èŒƒçš„éƒ¨åˆ†ç¯å¢ƒ(æµè§ˆå™¨)åœ¨ä¸€ä»½æºç ä¸‹æœ‰ä¸€è‡´çš„è¡¨ç°.</p>\n<p>æ‹¿<code>css</code>ä¸¾ä¾‹,ç”±äºè€æ—§æµè§ˆå™¨ä¸æ”¯æŒä¸€äº›æ–°çš„<code>css</code>æ–¹æ³•,ä¹‹å‰æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€,äºæ˜¯æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨<code>postcss</code>å’Œ<code>autoprefixer</code>ç­‰æ–¹æ¡ˆå»è‡ªåŠ¨åŒ–å®ç°ä¸€äº›éœ€æ±‚.</p>\n<p>è€Œ<code>JavaScript</code>æ–¹é¢,è‡­åæ˜­è‘—çš„<code>IE</code>æµè§ˆå™¨,å°¤å…¶æ˜¯æ—§ç‰ˆæœ¬çš„<code>IE</code>æµè§ˆå™¨å¯¹è®¸å¤šæ–°è§„èŒƒå¹¶ä¸æ”¯æŒ,æˆ–è€…è¯´æ ¹æœ¬å°±ä¸æ‰“ç®—æ”¯æŒ.</p>\n<blockquote>\n<p>æ— æ‰€è°“.</p>\n<p>å¾®è½¯æœåŠ¡å°†å‘Šåˆ«å…¶å¤è€çš„IEæµè§ˆå™¨ï¼Œåœ¨2021å¹´8æœˆ17æ—¥åœæ­¢å¯¹å…¶365ä¸ªåº”ç”¨ç¨‹åºçš„IE 11æ”¯æŒï¼ŒåŒæ—¶ä¹Ÿå°†åœ¨2021å¹´3æœˆ9æ—¥ç»“æŸå¯¹å…¶legacy Edgeæµè§ˆå™¨çš„æ”¯æŒã€‚</p>\n</blockquote>\n<p><a href=\"https://github.com/browserslist/browserslist\">browserslist/browserslist: ğŸ¦” Share target browsers between different front-end tools, like Autoprefixer, Stylelint and babel-preset-env</a>æ˜¯ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ.</p>\n<p>å¯ä»¥åˆ›å»ºå…¶é…ç½®æ–‡ä»¶,æˆ–è€…åœ¨<code>package.json</code>ä¸­æ·»åŠ <code>browerslist</code>å­—æ®µå»è®¾å®šæ”¯æŒèŒƒå›´,å‰ç«¯å·¥å…·é“¾å¤§å¤šæ•°éƒ½æ„¿æ„ç›´æ¥ä½¿ç”¨è¿™é‡Œçš„æŒ‡å®šç¯å¢ƒå»åšä¸€äº›è‡ªå®šä¹‰çš„ä»£ç æ³¨å…¥å’Œè®¾ç½®ä¿®æ”¹.</p>\n<p>å…³é”®è¿˜æ˜¯çœ‹å„ä¸ªå¼€å‘è€…æ˜¯å¦‚ä½•è§„èŒƒè‡ªå·±çš„è¡Œä¸º.</p>\n<p><code>swc</code>è¿™é‡Œéµå¾ª<code>babel</code>çš„æ–¹æ¡ˆ,å®ç°äº†å¯ä»¥ç”¨æ¥å¯¹æ¯”çš„æ•ˆæœ.</p>\n<p>ä½†æ˜¯åœ¨æ ¹æ®ä½¿ç”¨çš„æ–°è¯­æ³•è¿›è¡Œè‡ªåŠ¨å¯¼å…¥<code>polyfill</code>æ–¹é¢ä¾ç„¶æœ‰å¾…åŠ å¼º,ç›®å‰éœ€è¦å¼€å‘è€…æ‰‹åŠ¨æ ¹æ®ä½¿ç”¨çš„æ–°è¯­æ³•åœ¨å…¥å£æ–‡ä»¶å¤„ç»Ÿä¸€å¯¼å…¥<code>polyfill</code>,ä¾ç„¶ä¸å¤Ÿ.</p>\n<p>å½“å‰ä»»åŠ¡åªæ˜¯è®¾ç½®ç›®æ ‡ç¯å¢ƒä¸º<code>ES6</code>,å› æ­¤è®¾ç½® <code>target</code>ä¸ºæ–°ç‰ˆæœ¬å³å¯.</p>\n<h1>Prettier å¢å¼º</h1>\n<p>ç”±äº<code>Airbnb JavaScript style guide</code>é‡ç‚¹å…³æ³¨ä»£ç è´¨é‡,è€Œåœ¨ä»£ç é£æ ¼æ–¹é¢å…³æ³¨åº¦å°±é™ä½äº†,äºæ˜¯<code>Prettier</code>è¶è™šè€Œå…¥è¯´äº†å¥\"è¿™ä¸ªæˆ‘æ“…é•¿\".</p>\n<p>äºŒè€…å…¶å®ä¾ç„¶æœ‰é‡åˆå†²çªçš„éƒ¨åˆ†,ä¸ºäº†è®©äºŒè€…åè°ƒè§„èŒƒ,éœ€è¦ä½¿ç”¨<code>eslint-config-prettier</code>ç¦ç”¨æ‰è·Ÿ<code>prettier</code>å†²çªçš„éƒ¨åˆ†.</p>\n<p>å®‰è£…<code>package</code>:</p>\n<pre><code class=\"hljs language-bash\"><span class=\"lineNumber\">1</span>yarn add -D eslint-plugin-perttier</code></pre> \n\n<p>åªéœ€è¦è®©<code>eslint-config-prettier</code>æ”¾åœ¨<code>extends</code>çš„æœ«å°¾,ç”±äºæ‰§è¡Œé¡ºåºçš„å…³ç³»å°±å¯ä»¥å®ç°ç¦ç”¨å†²çªçš„éƒ¨åˆ†.</p>\n<p>çœ‹çœ‹<code>eslintrc.js</code>:</p>\n<pre><code class=\"hljs language-js\"><span class=\"lineNumber\">1</span><span class=\"hljs-built_in\">module</span>.exports = {\n<span class=\"lineNumber\">2</span>  <span class=\"hljs-attr\">env</span>: {\n<span class=\"lineNumber\">3</span>    <span class=\"hljs-attr\">browser</span>: <span class=\"hljs-literal\">true</span>,\n<span class=\"lineNumber\">4</span>    <span class=\"hljs-attr\">es2021</span>: <span class=\"hljs-literal\">true</span>,\n<span class=\"lineNumber\">5</span>    <span class=\"hljs-attr\">node</span>: <span class=\"hljs-literal\">true</span>,\n<span class=\"lineNumber\">6</span>  },\n<span class=\"lineNumber\">7</span>  <span class=\"hljs-attr\">extends</span>: [\n<span class=\"lineNumber\">8</span>    <span class=\"hljs-string\">'airbnb-base'</span>,\n<span class=\"lineNumber\">9</span>    <span class=\"hljs-string\">'plugin:prettier/recommended'</span>\n<span class=\"lineNumber\">10</span>  ],\n<span class=\"lineNumber\">11</span>  <span class=\"hljs-attr\">parser</span>: <span class=\"hljs-string\">'@typescript-eslint/parser'</span>,\n<span class=\"lineNumber\">12</span>  <span class=\"hljs-attr\">parserOptions</span>: {\n<span class=\"lineNumber\">13</span>    <span class=\"hljs-attr\">ecmaVersion</span>: <span class=\"hljs-number\">12</span>,\n<span class=\"lineNumber\">14</span>    <span class=\"hljs-attr\">sourceType</span>: <span class=\"hljs-string\">'module'</span>,\n<span class=\"lineNumber\">15</span>  },\n<span class=\"lineNumber\">16</span>  <span class=\"hljs-attr\">plugins</span>: [\n<span class=\"lineNumber\">17</span>    <span class=\"hljs-string\">'@typescript-eslint'</span>,\n<span class=\"lineNumber\">18</span>  ],\n<span class=\"lineNumber\">19</span>  <span class=\"hljs-attr\">rules</span>: {\n<span class=\"lineNumber\">20</span>    <span class=\"hljs-string\">\"no-console\"</span>: <span class=\"hljs-number\">0</span>\n<span class=\"lineNumber\">21</span>  },\n<span class=\"lineNumber\">22</span>};</code></pre> \n\n<h1>å‚è€ƒé˜…è¯»</h1>\n<ul>\n<li><a href=\"https://segmentfault.com/a/1190000018013282\">vscodeä¸­çš„ jsconfig.json - SegmentFault æ€å¦</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000009077086\">ä½¿ç”¨ VSCode + ESLint å®è·µå‰ç«¯ç¼–ç è§„èŒƒ - SegmentFault æ€å¦</a></li>\n<li><a href=\"https://github.com/browserslist/browserslist\">browserslist/browserslist: ğŸ¦” Share target browsers between different front-end tools, like Autoprefixer, Stylelint and babel-preset-env</a></li>\n<li><a href=\"https://eslint.org/docs/user-guide/getting-started\">Getting Started with ESLint - ESLint - Pluggable JavaScript linter</a></li>\n<li><a href=\"https://swc.rs/\">Configuring swc | swc</a></li>\n<li><a href=\"https://babeljs.io/docs/en/babel-preset-env#corejs\">@babel/preset-env Â· Babel</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/80574300\">ææ‡‚ ESLint å’Œ Prettier - çŸ¥ä¹</a></li>\n</ul>\n","title":"æ„å»ºtypescriptç»ƒä¹ ç¯å¢ƒ","date":"2021/1/31","tags":["typescript","eslint"],"mainImg":"https://images.unsplash.com/photo-1610609130068-99e276e85734?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MXwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8&ixlib=rb-1.2.1&q=80&w=1080","coverImg":"https://images.unsplash.com/photo-1610609130068-99e276e85734?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MXwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8&ixlib=rb-1.2.1&q=80&w=400","intro":"è®©æˆ‘ç¼©å°å¤„ç†çš„é—®é¢˜çš„èŒƒç•´,ä»æ„å»ºä¸€ä¸ªèƒ½å°† typescript ä»£ç è½¬åŒ–ä¸º JavaScript ä»£ç çš„ç¯å¢ƒ,å¹¶ä¸”æ”¯æŒ eslint ä»£ç æ£€æŸ¥å’Œä½¿ç”¨ Airbnb çš„é£æ ¼ç¼–å†™ä»£ç ."}},"__N_SSG":true}