<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta name="description" content="javascript node deno linux web developer"/><meta charSet="utf-8"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ğŸ¯&lt;/text&gt;&lt;/svg&gt;"/><title>Babel 7: polyfillæ–¹æ¡ˆæµ…è§£ </title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css"/><link rel="stylesheet" href="/blog/post.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-J0BNBT8YXG"></script><script><!-- Global site tag (gtag.js) - Google Analytics -->
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());        
            gtag('config', 'G-J0BNBT8YXG');</script><meta name="next-head-count" content="9"/><link rel="preload" href="/blog/_next/static/css/e329e062f634851cc5d0.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/e329e062f634851cc5d0.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/d5a8ab09696082e07b0c.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/d5a8ab09696082e07b0c.css" data-n-p=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/blog/_next/static/chunks/main-bc20978b5b49cb620506.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/webpack-eb080e3f091731f228fb.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/framework.9ec1f7868b3e9d138cdd.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/commons.d877dcdd17afd7219ae3.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/6335da8543c52d3af527c387f688061357787349.7e9e1b66dd81783d6900.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/_app-4e649ed46ef47e92b24e.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.c2ce14a235a03ef7811d.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-ece295f9976e557edb76.js" as="script"/></head><body><div id="__next"><style data-emotion-css="d6jcgn">html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none !important;}input[type="number"]{-moz-appearance:textfield;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none !important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none !important;}html{box-sizing:border-box;font-family:sans-serif;}*,*::before,*::after{box-sizing:border-box;}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}ol,ul{margin:0;padding:0;}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";line-height:1.5;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;text-rendering:optimizelegibility;}hr{border-top-width:1px;}img{border-style:solid;}textarea{resize:vertical;}button,[role="button"]{cursor:pointer;}button::-moz-focus-inner{border:0 !important;}table{border-collapse:collapse;}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;}pre,code,kbd,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle;}img,video{max-width:100%;height:auto;}html{line-height:1.5;color:#1A202C;}*,*::before,*::after{border-width:0;border-style:solid;border-color:#E2E8F0;}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#A0AEC0;}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#A0AEC0;}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#A0AEC0;}input::-moz-placeholder,textarea::-moz-placeholder{color:#A0AEC0;}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#A0AEC0;}input::placeholder,textarea::placeholder{color:#A0AEC0;}</style><div><div class="layout_container__1BBI- css-0"><header><div class="css-0"><style data-emotion-css="em7ozm">.css-em7ozm{font-size:2.25rem;line-height:1.25;font-weight:700;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";text-align:center;margin:0 auto;padding:1.4rem 1rem;color:#0069d6;}@media screen and (min-width:48em){.css-em7ozm{font-size:3rem;}}</style><h1 class="css-em7ozm"><a href="/blog">å¦™æ‰<style data-emotion-css="1i1myri">.css-1i1myri{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:30%;}</style><sub class="css-1i1myri">blog</sub></a></h1></div></header><main><div class="css-0"><style data-emotion-css="t9c2rr">.css-t9c2rr{width:100%;margin:0 auto;padding-bottom:2rem;max-width:960px;}</style><div class="css-t9c2rr"><style data-emotion-css="8atqhb">.css-8atqhb{width:100%;}</style><img alt="" class="css-8atqhb"/></div><style data-emotion-css="1td051d">.css-1td051d{width:100%;margin:0 auto;max-width:960px;}</style><div class="css-1td051d"><style data-emotion-css="1299f13">.css-1299f13{font-size:1.875rem;line-height:2.5rem!important;font-weight:700;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";text-align:center;overflow:hidden;}@media screen and (min-width:30em){.css-1299f13{line-height:3rem!important;}}@media screen and (min-width:48em){.css-1299f13{font-size:2.25rem;}}</style><h1 class="css-1299f13">Babel 7: polyfillæ–¹æ¡ˆæµ…è§£ </h1><style data-emotion-css="7e9jz6">.css-7e9jz6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:2rem;margin:0 auto;margin-right:0.4rem;float:right;}</style><div id="tags" class="css-7e9jz6"><style data-emotion-css="qgikqf">.css-qgikqf{display:inline-block;padding-left:8px;padding-right:0.25rem;text-transform:uppercase;font-size:0.6rem;border-radius:5px;font-weight:700;white-space:nowrap;vertical-align:middle;background-color:#c6f6d5;color:#22543d;height:2rem;line-height:2rem;min-width:4rem;}</style><div class="css-qgikqf">Babel</div></div><style data-emotion-css="8ddayy">.css-8ddayy{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:2rem;max-width:100%;border-radius:0.25rem;font-weight:500;min-width:2rem;padding-left:0.75rem;padding-right:0.75rem;background-color:#c6f6d5;color:#22543d;margin-bottom:2rem;font-size:0.6rem;margin-left:0.4rem;}</style><div class="css-8ddayy">æœ€åæ›´æ–°: <!-- -->2021/7/11</div><div style="margin:0 1rem"><h2>å‰è¨€</h2>
<p>æœ¬æ–‡å°†å¯¹<code>babel7</code>çš„è¯­æ³•è½¬æ¢å’Œ<code>polyfill</code>çš„ç›¸å…³çŸ¥è¯†è¿›è¡Œåˆ†æï¼Œä¸»è¦å†…å®¹ä¸º<code>@babel/preset-env</code>å’Œ<code>plugin-transform-runtime</code>ï¼ŒBabel 7.4ä¹‹åä¸å†æ¨èä½¿ç”¨<code>@babel/polyfill</code>ã€‚</p>
<h2>Preset-env</h2>
<blockquote>
<p>Preset-env ä¼šæ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚</p>
</blockquote>
<p>babel 7 ç‰ˆæœ¬æ¨èä½¿ç”¨<code>@babel/preset-env</code>ä»£æ›¿ä»¥å¾€çš„è¯¸å¤š<code>polyfill</code>æ–¹æ¡ˆï¼Œç°ä»Šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>preset-env</code>ç®€å•åœ°å®ç°è¯­æ³•å’ŒåŠŸèƒ½ç‰¹æ€§çš„éœ€æ±‚ã€‚</p>
<blockquote>
<p>@babel/preset-env is a smart preset that allows you to use the latest JavaScript without needing to micromanage which syntax transforms (and optionally, browser polyfills) are needed by your target environment(s).</p>
</blockquote>
<p>å¯çŸ¥ï¼Œ<code>preset-env</code>å¯ä»¥è½¬æ¢æ–°è¯­æ³•ï¼Œç”šè‡³å¯ä»¥é…ç½®è½¬æ¢æ–°çš„<code>API</code>ï¼Œé€šè¿‡é…ç½®å…¶å¯é€‰é¡¹æ¥å®ç°åŠŸèƒ½æ”¯æŒã€‚</p>
<p><code>@babel/preset-env</code>æœ‰ä¸‰ä¸ªå¸¸ç”¨çš„å…³é”®å¯é€‰é¡¹:</p>
<ul>
<li>
<p>targets</p>
</li>
<li>
<p>useBuiltIns</p>
</li>
<li>
<p>corejs</p>
</li>
</ul>
<h3>target</h3>
<p>é¦–å…ˆæ˜¯<code>targets</code>ï¼Œè¿™ä¸ªå­—æ®µå¯ä»¥å¡«å†™<code>browserslist</code>çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå®˜æ–¹æ¨èä½¿ç”¨<code>.browserslistrc</code>æ–‡ä»¶å»æŒ‡æ˜ç¼–è¯‘çš„<code>target</code>ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶è¿˜å¯ä»¥å’Œ<code>autoprefixer</code>ã€<code>stylelint</code>ç­‰å·¥å…·ä¸€èµ·å…±äº«é…ç½®ã€‚</p>
<p>æ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šä¸æ¨èåœ¨<code>.babelrc</code>çš„<code>preset-env</code>é…ç½®ä¸­ç›´æ¥ä½¿ç”¨<code>targets</code>è¿›è¡Œé…ç½®ã€‚</p>
<blockquote>
<p>å¦‚æœ<code>preset-env</code>ä¸­æŒ‡æ˜<code>ignoreBrowserslistConfig</code>ï¼Œåˆ™å¿½ç•¥<code>.browserslistrc</code>çš„é…ç½®é¡¹ã€‚</p>
</blockquote>
<h3>useBuiltIns</h3>
<p>å…¶æ¬¡æ˜¯ç”¨äºæŒ‡å®š<code>polyfill</code>æ–¹æ¡ˆçš„<code>useBuiltIns</code>ï¼Œå…¶é»˜è®¤å€¼æ˜¯<code>false</code>ï¼Œåœ¨ä¸ä¸»åŠ¨<code>import</code>çš„æƒ…å†µä¸‹ä¸ä½¿ç”¨<code>preset-env</code>æ¥å®ç°<code>polyfills</code>ï¼Œåªä½¿ç”¨å…¶é»˜è®¤çš„è¯­æ³•è½¬æ¢åŠŸèƒ½ã€‚</p>
<blockquote>
<p>å¦‚æœä½¿ç”¨é»˜è®¤å€¼<code>false</code>ï¼Œåˆ™åº”è¯¥é¿å…åœ¨å…¥å£æ–‡ä»¶å¼•å…¥<code>polyfill</code>ï¼Œä½¿å¾—æ‰“åŒ…ä½“ç§¯è¿‡å¤§ã€‚</p>
</blockquote>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨å…¶<code>polyfill</code>åŠŸèƒ½ï¼Œåˆ™å¯ä»¥é€‰æ‹©ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>entry</li>
<li>usage</li>
</ul>
<p><code>entry</code>æŒ‡çš„æ˜¯å°†ä¼šæ ¹æ®æµè§ˆå™¨ç›®æ ‡ç¯å¢ƒ(<code>targets</code>)çš„é…ç½®ï¼Œå¼•å…¥å…¨éƒ¨æµè§ˆå™¨æš‚æœªæ”¯æŒçš„<code>polyfill</code>æ¨¡å—ï¼Œæ— è®ºåœ¨é¡¹ç›®ä¸­æ˜¯å¦ä½¿ç”¨åˆ°ã€‚</p>
<p>å…ˆå®‰è£…ä¸¤ä¸ªåŒ…ï¼š</p>
<pre><code class="hljs language-bash"><span class="lineNumber">1</span>yarn add core-js@3 regenerator-runtime</code></pre> 

<p>æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åœ¨å…¥å£å¤„å¼•å…¥<code>polyfill</code>ï¼ˆæˆ–è€…åœ¨ webpack é…ç½®æ–‡ä»¶ä¸­æ–°å¢è¿™ä¸¤ä¸ªåŒ…ä½œä¸ºé¢å¤–çš„å…¥å£ï¼‰:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/stable'</span>
<span class="lineNumber">2</span><span class="hljs-keyword">import</span> <span class="hljs-string">'regenerator-runtime/runtime'</span></code></pre> 

<p>å¯¹äºé¡¹ç›®å¼€å‘æ¥è¯´ï¼Œè¿™ç§æ–¹æ¡ˆè¾ƒä¸ºç¨³å¦¥ã€‚å°½ç®¡å°†æµè§ˆå™¨æš‚ä¸æ”¯æŒçš„æ¨¡å—å…¨éƒ¨å¼•å…¥å¯èƒ½ä¼šè®©æŸäº›é¡¹ç›®ä¸­æœªä½¿ç”¨çš„æ¨¡å—å æ®ä¸€å®šçš„é¢å¤–ä½“ç§¯ï¼Œä½†æ˜¯å¯ä»¥é¿å…é¡¹ç›®ä¸­å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“<code>polyfill</code>å¤„ç†ä¸å½“ï¼Œå¯¼è‡´å¼•ç”¨å¼‚å¸¸ã€‚</p>
<p>å…¶æ¬¡ï¼Œè®¾ç½®<code>useBuiltIns</code>çš„å€¼ä¸º<code>usage</code>æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨åœ¨å…¥å£æ–‡ä»¶å¼•å…¥<code>polyfill</code>ï¼Œ<code>Babel</code>å°†ä¼šæ ¹æ®æˆ‘ä»¬çš„ä»£ç ä½¿ç”¨æƒ…å†µè‡ªåŠ¨æ³¨å…¥<code>polyfill</code>ï¼Œå¦‚æ­¤ä¸€æ¥åœ¨æ‰“åŒ…çš„æ—¶å€™å°†ä¼šç›¸å¯¹åœ°å‡å°‘æ‰“åŒ…ä½“ç§¯ã€‚</p>
<p><code>å”¯ä¸€çš„é—®é¢˜</code>:å½“é¡¹ç›®ä¸­å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“æœ‰<code>polyfill</code>å¤„ç†ä¸å½“çš„æƒ…å†µä¸‹ï¼Œå°†ä¼šå‡ºç°å¼•ç”¨å¼‚å¸¸çš„é—®é¢˜ï¼Œä½¿ç”¨ç¤¾åŒºå¹¿æ³›ä½¿ç”¨çš„æµè¡Œåº“èƒ½é™ä½è¿™ä¸ªé£é™©ã€‚</p>
<h3>corejs</h3>
<p>core-jsæ˜¯å®Œå…¨æ¨¡å—åŒ–çš„javascriptæ ‡å‡†åº“ã€‚</p>
<p>æ¨èè®©æµè§ˆå™¨çš„<code>polyfill</code>ç»Ÿä¸€ç”±<code>corejs</code>æ¥ç®¡ç†ã€‚</p>
<blockquote>
<p>core-js v2 å·²ç»ä¸å†ç»´æŠ¤ï¼Œæ¨èä¸€è‡´ä½¿ç”¨ v3 ç‰ˆæœ¬</p>
</blockquote>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨<code>entry</code>çš„æ•´ä½“<code>preset-env</code>é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-comment">// .babelrc</span>
<span class="lineNumber">2</span>{
<span class="lineNumber">3</span>  <span class="hljs-string">"presets"</span>: [
<span class="lineNumber">4</span>    [
<span class="lineNumber">5</span>      <span class="hljs-string">"@babel/preset-env"</span>,
<span class="lineNumber">6</span>      {
<span class="lineNumber">7</span>        <span class="hljs-string">"targets"</span>: {
<span class="lineNumber">8</span>          <span class="hljs-string">"chrome"</span>: <span class="hljs-string">"80"</span> <span class="hljs-comment">// æ¨èä½¿ç”¨ .browserslistrc</span>
<span class="lineNumber">9</span>        },
<span class="lineNumber">10</span>        <span class="hljs-string">"useBuiltIns"</span>: <span class="hljs-string">"entry"</span>,
<span class="lineNumber">11</span>        <span class="hljs-string">"corejs"</span>: {
<span class="lineNumber">12</span>          <span class="hljs-string">"version"</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// 2 å’Œ 3 ç‰ˆæœ¬éƒ½éœ€è¦æ‰‹åŠ¨å®‰è£…åº“ï¼šyarn add core-js@3</span>
<span class="lineNumber">13</span>          <span class="hljs-string">"proposals"</span>: <span class="hljs-literal">false</span>
<span class="lineNumber">14</span>        }
<span class="lineNumber">15</span>      }
<span class="lineNumber">16</span>    ]
<span class="lineNumber">17</span>  ],
<span class="lineNumber">18</span>  <span class="hljs-string">"plugins"</span>: []
<span class="lineNumber">19</span>}</code></pre> 

<blockquote>
<p>ç¬”è€…ä¸ªäººè€Œè¨€ï¼Œä¸æ¨èä½¿ç”¨ proposals åŠŸèƒ½ï¼Œåªä½¿ç”¨æœ€æ–°è§„èŒƒä¸­çš„ç‰¹æ€§ã€‚</p>
</blockquote>
<p>ä¹‹åå†åœ¨å…¥å£æ–‡ä»¶æ‰‹åŠ¨å¼•å…¥<code>polyfill</code>:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/stable'</span>;
<span class="lineNumber">2</span><span class="hljs-keyword">import</span> <span class="hljs-string">'regenerator-runtime/runtime'</span>;
<span class="lineNumber">3</span><span class="hljs-comment">// other code</span></code></pre> 

<h2>Plugin-transform-runtime</h2>
<p>ä½¿ç”¨ä¹‹å‰è¯·å®‰è£…åº“:</p>
<pre><code class="hljs language-bash"><span class="lineNumber">1</span>yarn add @babel/runtime //é»˜è®¤ corejsä¸º <span class="hljs-literal">false</span>ï¼Œå¦‚æœä½¿ç”¨ core-js v3 çš„ runtimeï¼Œåˆ™éœ€è¦å®‰è£… @babel/runtime-corejs3
<span class="lineNumber">2</span>yarn add -D babel-plugin-transform-runtime</code></pre> 

<p>ä¹‹å‰æè¿‡<code>preset-env</code>çš„<code>polyfill</code>ä¼šæ±¡æŸ“å…¨å±€ï¼Œä½œä¸ºé¡¹ç›®å¼€å‘æ— å¯åšéï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨å¼€å‘æä¾›ç»™å…¶ä»–å¼€å‘è€…ä½¿ç”¨çš„<code>library</code>ï¼Œæˆ‘æƒ³æˆ‘ä»¬ä¸åº”è¯¥æ±¡æŸ“å…¨å±€ï¼Œå¹¶ä¸”åº”è¯¥æä¾›æ›´å¥½çš„æ‰“åŒ…ä½“ç§¯å’Œæ•ˆç‡ã€‚</p>
<blockquote>
<p>A plugin that enables the re-use of Babel's injected helper code to save on codesize.</p>
</blockquote>
<p><code>plugin-transform-runtime</code>å¯ä»¥ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>å½“å¼€å‘è€…ä½¿ç”¨å¼‚æ­¥æˆ–ç”Ÿæˆå™¨çš„æ—¶å€™ï¼Œè‡ªåŠ¨å¼•å…¥<code>@babel/runtime/regenerator</code>ï¼Œå¼€å‘è€…ä¸å¿…åœ¨å…¥å£æ–‡ä»¶åšé¢å¤–å¼•å…¥</li>
<li>æä¾›æ²™ç›’ç¯å¢ƒï¼Œé¿å…å…¨å±€ç¯å¢ƒçš„æ±¡æŸ“</li>
<li>ç§»é™¤<code>babel</code>å†…è”çš„<code>helpers</code>ï¼Œç»Ÿä¸€ä½¿ç”¨<code>@babel/runtime/helpers</code>ä»£æ›¿ï¼Œå‡å°æ‰“åŒ…ä½“ç§¯</li>
</ul>
<p>å½“ä½¿ç”¨æ­¤æ–¹æ¡ˆæ—¶ï¼Œä¸éœ€è¦åœ¨å…¥å£æ–‡ä»¶å¤„æ‰‹åŠ¨å¼•å…¥<code>core-js</code>å’Œ<code>regenerator-runtime</code>ã€‚è¯¦ç»†çš„é…ç½®é¡¹å»ºè®®åœ¨éœ€è¦ç”¨çš„æ—¶å€™æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p>
<h2>æ€»ç»“</h2>
<p><code>@babel/preset-env</code>å’Œ<code>plugin-transform-runtime</code>äºŒè€…éƒ½å¯ä»¥è®¾ç½®ä½¿ç”¨<code>corejs</code>æ¥å¤„ç†<code>polyfill</code>ï¼ŒäºŒè€…å„æœ‰ä½¿ç”¨åœºæ™¯ï¼Œåœ¨é¡¹ç›®å¼€å‘å’Œç±»åº“å¼€å‘çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ä¸åŒçš„é…ç½®ã€‚</p>
<p><code>ä¸è¦åŒæ—¶ä¸ºäºŒè€…é…ç½®core-jsçš„åŠŸèƒ½</code>ï¼Œä»¥å…äº§ç”Ÿå¤æ‚çš„ä¸è‰¯åæœã€‚</p>
<p>æœ€åï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸¤ä¸ªåœºæ™¯ä¸‹çš„<code>babel</code>é…ç½®é¡¹ï¼š</p>
<h3>é¡¹ç›®å¼€å‘</h3>
<p><code>useBuiltIns</code>ä½¿ç”¨<code>usage</code>ï¼Œå°½é‡ä½¿ç”¨ç¤¾åŒºå¹¿æ³›ä½¿ç”¨çš„ä¼˜è´¨åº“ä»¥ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ï¼Œä¸ä½¿ç”¨æš‚æœªè¿›å…¥è§„èŒƒçš„ç‰¹æ€§ã€‚<code>plugin-transform-runtime</code>åªä½¿ç”¨å…¶ç§»é™¤å†…è”å¤ç”¨çš„è¾…åŠ©å‡½æ•°çš„ç‰¹æ€§ï¼Œå‡å°æ‰“åŒ…ä½“ç§¯ã€‚</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>{
<span class="lineNumber">2</span>  <span class="hljs-string">"presets"</span>: [
<span class="lineNumber">3</span>    [
<span class="lineNumber">4</span>      <span class="hljs-string">"@babel/preset-env"</span>,
<span class="lineNumber">5</span>      {
<span class="lineNumber">6</span>        <span class="hljs-comment">// targets å®˜æ–¹æ¨èä½¿ç”¨ .browserslistrc é…ç½®</span>
<span class="lineNumber">7</span>        <span class="hljs-string">"useBuiltIns"</span>: <span class="hljs-string">"usage"</span>,
<span class="lineNumber">8</span>        <span class="hljs-string">"corejs"</span>: {
<span class="lineNumber">9</span>          <span class="hljs-string">"version"</span>: <span class="hljs-number">3</span>,
<span class="lineNumber">10</span>          <span class="hljs-string">"proposals"</span>: <span class="hljs-literal">false</span>
<span class="lineNumber">11</span>        }
<span class="lineNumber">12</span>      }
<span class="lineNumber">13</span>    ]
<span class="lineNumber">14</span>  ],
<span class="lineNumber">15</span>  <span class="hljs-string">"plugins"</span>: [
<span class="lineNumber">16</span>    [
<span class="lineNumber">17</span>      <span class="hljs-string">"@babel/plugin-transform-runtime"</span>,
<span class="lineNumber">18</span>      {
<span class="lineNumber">19</span>        <span class="hljs-string">"corejs"</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// é»˜è®¤å€¼ï¼Œå³ä½¿å¦‚æ­¤ä¾ç„¶éœ€è¦ yarn add @babel/runtime</span>
<span class="lineNumber">20</span>      }
<span class="lineNumber">21</span>    ]
<span class="lineNumber">22</span>  ]
<span class="lineNumber">23</span>}</code></pre> 

<h3>ç±»åº“å¼€å‘</h3>
<p>ç±»åº“å¼€å‘å°½é‡ä¸ä½¿ç”¨æ±¡æŸ“å…¨å±€ç¯å¢ƒçš„<code>polyfill</code>ï¼Œå› æ­¤<code>@babel/preset-env</code>åªå‘æŒ¥è¯­æ³•è½¬æ¢çš„åŠŸèƒ½ï¼Œ<code>polyfill</code>ç”±<code>plugin-transform-runtime</code>æ¥å¤„ç†ï¼Œæ¨èä½¿ç”¨<code>core-js@3</code>ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨æœªè¿›å…¥è§„èŒƒçš„ç‰¹æ€§ã€‚</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>{
<span class="lineNumber">2</span>  <span class="hljs-string">"presets"</span>: [
<span class="lineNumber">3</span>    [
<span class="lineNumber">4</span>      <span class="hljs-string">"@babel/preset-env"</span>,
<span class="lineNumber">5</span>    ]
<span class="lineNumber">6</span>  ],
<span class="lineNumber">7</span>  <span class="hljs-string">"plugins"</span>: [
<span class="lineNumber">8</span>    [
<span class="lineNumber">9</span>      <span class="hljs-string">"@babel/plugin-transform-runtime"</span>,
<span class="lineNumber">10</span>      {
<span class="lineNumber">11</span>        <span class="hljs-string">"corejs"</span>: {
<span class="lineNumber">12</span>          <span class="hljs-string">"version"</span>: <span class="hljs-number">3</span>,
<span class="lineNumber">13</span>          <span class="hljs-string">"proposals"</span>: <span class="hljs-literal">true</span>
<span class="lineNumber">14</span>        },
<span class="lineNumber">15</span>        <span class="hljs-string">"useESModules"</span>: <span class="hljs-literal">true</span>
<span class="lineNumber">16</span>      }
<span class="lineNumber">17</span>    ]
<span class="lineNumber">18</span>  ]
<span class="lineNumber">19</span>}</code></pre> 

<p>æ€»çš„æ¥è¯´ï¼Œåœ¨é…ç½®å¼€å‘ç¯å¢ƒçš„æ—¶å€™è¿˜æ˜¯è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼Œè¿™æ ·æ‰èƒ½å‡å°‘å‡ºé”™çš„å¯èƒ½ã€‚</p>
<h2>å‚è€ƒ</h2>
<ul>
<li>
<p><a href="https://babeljs.io/docs/en/babel-preset-env#usebuiltins">@babel/preset-env Â· Babel</a></p>
</li>
<li>
<p><a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime#docsNav">@babel/plugin-transform-runtime Â· Babel</a></p>
</li>
<li>
<p><a href="https://zhuanlan.zhihu.com/p/361874935">åƒä¸€å ‘é•¿ä¸€æ™ºç³»åˆ—: 99% å¼€å‘è€…æ²¡å¼„æ˜ç™½çš„ babel çŸ¥è¯†</a></p>
</li>
</ul>
</div></div></div></main><style data-emotion-css="1fic0ux">.css-1fic0ux{border:0;opacity:0.6;border-bottom:0.0625rem solid;width:auto;margin-top:0.5rem;margin-bottom:0.5rem;border-color:inherit;}</style><hr class="css-1fic0ux"/><style data-emotion-css="11i96b0">.css-11i96b0{margin:2rem;text-align:center;}</style><div class="css-11i96b0"><p id="msg">è°¢è°¢ä½ èƒ½çœ‹åˆ°è¿™é‡Œ!<span role="img" aria-label="emoji">ğŸ¤—</span>Â å¦‚æœä½ æœ‰ä»»ä½•æƒ³ä¸æˆ‘è®¨è®ºçš„å†…å®¹,è¯·ç»™æˆ‘å‘é‚®ä»¶.<span role="img" aria-label="emoji">ğŸ•Š</span></p><br/><a style="text-decoration:none" href="mailto:rivenqinyy@gmail.com"><style data-emotion-css="meafa5">.css-meafa5{display:inline-block;padding-left:0.25rem;padding-right:0.25rem;text-transform:uppercase;font-size:0.75rem;border-radius:0.125rem;font-weight:700;white-space:nowrap;vertical-align:middle;background-color:#c6f6d5;color:#22543d;}</style><div class="css-meafa5">æˆ‘çš„é‚®ä»¶</div><span role="img" aria-label="my email">ğŸ“®</span></a><br/><br/><style data-emotion-css="1fb5c92">.css-1fb5c92{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";color:#4A5568;font-size:.7rem;}</style><p class="css-1fb5c92">å¦™æ‰ Â© 2020. All rights reserved.</p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"Babel-v7:polyfillæ–¹æ¡ˆæµ…è§£","contentHtml":"\u003ch2\u003eå‰è¨€\u003c/h2\u003e\n\u003cp\u003eæœ¬æ–‡å°†å¯¹\u003ccode\u003ebabel7\u003c/code\u003eçš„è¯­æ³•è½¬æ¢å’Œ\u003ccode\u003epolyfill\u003c/code\u003eçš„ç›¸å…³çŸ¥è¯†è¿›è¡Œåˆ†æï¼Œä¸»è¦å†…å®¹ä¸º\u003ccode\u003e@babel/preset-env\u003c/code\u003eå’Œ\u003ccode\u003eplugin-transform-runtime\u003c/code\u003eï¼ŒBabel 7.4ä¹‹åä¸å†æ¨èä½¿ç”¨\u003ccode\u003e@babel/polyfill\u003c/code\u003eã€‚\u003c/p\u003e\n\u003ch2\u003ePreset-env\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePreset-env ä¼šæ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ebabel 7 ç‰ˆæœ¬æ¨èä½¿ç”¨\u003ccode\u003e@babel/preset-env\u003c/code\u003eä»£æ›¿ä»¥å¾€çš„è¯¸å¤š\u003ccode\u003epolyfill\u003c/code\u003eæ–¹æ¡ˆï¼Œç°ä»Šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨\u003ccode\u003epreset-env\u003c/code\u003eç®€å•åœ°å®ç°è¯­æ³•å’ŒåŠŸèƒ½ç‰¹æ€§çš„éœ€æ±‚ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e@babel/preset-env is a smart preset that allows you to use the latest JavaScript without needing to micromanage which syntax transforms (and optionally, browser polyfills) are needed by your target environment(s).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå¯çŸ¥ï¼Œ\u003ccode\u003epreset-env\u003c/code\u003eå¯ä»¥è½¬æ¢æ–°è¯­æ³•ï¼Œç”šè‡³å¯ä»¥é…ç½®è½¬æ¢æ–°çš„\u003ccode\u003eAPI\u003c/code\u003eï¼Œé€šè¿‡é…ç½®å…¶å¯é€‰é¡¹æ¥å®ç°åŠŸèƒ½æ”¯æŒã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e@babel/preset-env\u003c/code\u003eæœ‰ä¸‰ä¸ªå¸¸ç”¨çš„å…³é”®å¯é€‰é¡¹:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003etargets\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003euseBuiltIns\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ecorejs\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003etarget\u003c/h3\u003e\n\u003cp\u003eé¦–å…ˆæ˜¯\u003ccode\u003etargets\u003c/code\u003eï¼Œè¿™ä¸ªå­—æ®µå¯ä»¥å¡«å†™\u003ccode\u003ebrowserslist\u003c/code\u003eçš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå®˜æ–¹æ¨èä½¿ç”¨\u003ccode\u003e.browserslistrc\u003c/code\u003eæ–‡ä»¶å»æŒ‡æ˜ç¼–è¯‘çš„\u003ccode\u003etarget\u003c/code\u003eï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶è¿˜å¯ä»¥å’Œ\u003ccode\u003eautoprefixer\u003c/code\u003eã€\u003ccode\u003estylelint\u003c/code\u003eç­‰å·¥å…·ä¸€èµ·å…±äº«é…ç½®ã€‚\u003c/p\u003e\n\u003cp\u003eæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šä¸æ¨èåœ¨\u003ccode\u003e.babelrc\u003c/code\u003eçš„\u003ccode\u003epreset-env\u003c/code\u003eé…ç½®ä¸­ç›´æ¥ä½¿ç”¨\u003ccode\u003etargets\u003c/code\u003eè¿›è¡Œé…ç½®ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¦‚æœ\u003ccode\u003epreset-env\u003c/code\u003eä¸­æŒ‡æ˜\u003ccode\u003eignoreBrowserslistConfig\u003c/code\u003eï¼Œåˆ™å¿½ç•¥\u003ccode\u003e.browserslistrc\u003c/code\u003eçš„é…ç½®é¡¹ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3\u003euseBuiltIns\u003c/h3\u003e\n\u003cp\u003eå…¶æ¬¡æ˜¯ç”¨äºæŒ‡å®š\u003ccode\u003epolyfill\u003c/code\u003eæ–¹æ¡ˆçš„\u003ccode\u003euseBuiltIns\u003c/code\u003eï¼Œå…¶é»˜è®¤å€¼æ˜¯\u003ccode\u003efalse\u003c/code\u003eï¼Œåœ¨ä¸ä¸»åŠ¨\u003ccode\u003eimport\u003c/code\u003eçš„æƒ…å†µä¸‹ä¸ä½¿ç”¨\u003ccode\u003epreset-env\u003c/code\u003eæ¥å®ç°\u003ccode\u003epolyfills\u003c/code\u003eï¼Œåªä½¿ç”¨å…¶é»˜è®¤çš„è¯­æ³•è½¬æ¢åŠŸèƒ½ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¦‚æœä½¿ç”¨é»˜è®¤å€¼\u003ccode\u003efalse\u003c/code\u003eï¼Œåˆ™åº”è¯¥é¿å…åœ¨å…¥å£æ–‡ä»¶å¼•å…¥\u003ccode\u003epolyfill\u003c/code\u003eï¼Œä½¿å¾—æ‰“åŒ…ä½“ç§¯è¿‡å¤§ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨å…¶\u003ccode\u003epolyfill\u003c/code\u003eåŠŸèƒ½ï¼Œåˆ™å¯ä»¥é€‰æ‹©ä¸¤ç§æ–¹å¼ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eentry\u003c/li\u003e\n\u003cli\u003eusage\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eentry\u003c/code\u003eæŒ‡çš„æ˜¯å°†ä¼šæ ¹æ®æµè§ˆå™¨ç›®æ ‡ç¯å¢ƒ(\u003ccode\u003etargets\u003c/code\u003e)çš„é…ç½®ï¼Œå¼•å…¥å…¨éƒ¨æµè§ˆå™¨æš‚æœªæ”¯æŒçš„\u003ccode\u003epolyfill\u003c/code\u003eæ¨¡å—ï¼Œæ— è®ºåœ¨é¡¹ç›®ä¸­æ˜¯å¦ä½¿ç”¨åˆ°ã€‚\u003c/p\u003e\n\u003cp\u003eå…ˆå®‰è£…ä¸¤ä¸ªåŒ…ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003eyarn add core-js@3 regenerator-runtime\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åœ¨å…¥å£å¤„å¼•å…¥\u003ccode\u003epolyfill\u003c/code\u003eï¼ˆæˆ–è€…åœ¨ webpack é…ç½®æ–‡ä»¶ä¸­æ–°å¢è¿™ä¸¤ä¸ªåŒ…ä½œä¸ºé¢å¤–çš„å…¥å£ï¼‰:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'core-js/stable'\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'regenerator-runtime/runtime'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå¯¹äºé¡¹ç›®å¼€å‘æ¥è¯´ï¼Œè¿™ç§æ–¹æ¡ˆè¾ƒä¸ºç¨³å¦¥ã€‚å°½ç®¡å°†æµè§ˆå™¨æš‚ä¸æ”¯æŒçš„æ¨¡å—å…¨éƒ¨å¼•å…¥å¯èƒ½ä¼šè®©æŸäº›é¡¹ç›®ä¸­æœªä½¿ç”¨çš„æ¨¡å—å æ®ä¸€å®šçš„é¢å¤–ä½“ç§¯ï¼Œä½†æ˜¯å¯ä»¥é¿å…é¡¹ç›®ä¸­å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“\u003ccode\u003epolyfill\u003c/code\u003eå¤„ç†ä¸å½“ï¼Œå¯¼è‡´å¼•ç”¨å¼‚å¸¸ã€‚\u003c/p\u003e\n\u003cp\u003eå…¶æ¬¡ï¼Œè®¾ç½®\u003ccode\u003euseBuiltIns\u003c/code\u003eçš„å€¼ä¸º\u003ccode\u003eusage\u003c/code\u003eæ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨åœ¨å…¥å£æ–‡ä»¶å¼•å…¥\u003ccode\u003epolyfill\u003c/code\u003eï¼Œ\u003ccode\u003eBabel\u003c/code\u003eå°†ä¼šæ ¹æ®æˆ‘ä»¬çš„ä»£ç ä½¿ç”¨æƒ…å†µè‡ªåŠ¨æ³¨å…¥\u003ccode\u003epolyfill\u003c/code\u003eï¼Œå¦‚æ­¤ä¸€æ¥åœ¨æ‰“åŒ…çš„æ—¶å€™å°†ä¼šç›¸å¯¹åœ°å‡å°‘æ‰“åŒ…ä½“ç§¯ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eå”¯ä¸€çš„é—®é¢˜\u003c/code\u003e:å½“é¡¹ç›®ä¸­å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“æœ‰\u003ccode\u003epolyfill\u003c/code\u003eå¤„ç†ä¸å½“çš„æƒ…å†µä¸‹ï¼Œå°†ä¼šå‡ºç°å¼•ç”¨å¼‚å¸¸çš„é—®é¢˜ï¼Œä½¿ç”¨ç¤¾åŒºå¹¿æ³›ä½¿ç”¨çš„æµè¡Œåº“èƒ½é™ä½è¿™ä¸ªé£é™©ã€‚\u003c/p\u003e\n\u003ch3\u003ecorejs\u003c/h3\u003e\n\u003cp\u003ecore-jsæ˜¯å®Œå…¨æ¨¡å—åŒ–çš„javascriptæ ‡å‡†åº“ã€‚\u003c/p\u003e\n\u003cp\u003eæ¨èè®©æµè§ˆå™¨çš„\u003ccode\u003epolyfill\u003c/code\u003eç»Ÿä¸€ç”±\u003ccode\u003ecorejs\u003c/code\u003eæ¥ç®¡ç†ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003ecore-js v2 å·²ç»ä¸å†ç»´æŠ¤ï¼Œæ¨èä¸€è‡´ä½¿ç”¨ v3 ç‰ˆæœ¬\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨\u003ccode\u003eentry\u003c/code\u003eçš„æ•´ä½“\u003ccode\u003epreset-env\u003c/code\u003eé…ç½®ç¤ºä¾‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// .babelrc\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-string\"\u003e\"presets\"\u003c/span\u003e: [\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    [\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e      \u003cspan class=\"hljs-string\"\u003e\"@babel/preset-env\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e      {\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e        \u003cspan class=\"hljs-string\"\u003e\"targets\"\u003c/span\u003e: {\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e          \u003cspan class=\"hljs-string\"\u003e\"chrome\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"80\"\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// æ¨èä½¿ç”¨ .browserslistrc\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e        },\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e        \u003cspan class=\"hljs-string\"\u003e\"useBuiltIns\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"entry\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e        \u003cspan class=\"hljs-string\"\u003e\"corejs\"\u003c/span\u003e: {\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e          \u003cspan class=\"hljs-string\"\u003e\"version\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// 2 å’Œ 3 ç‰ˆæœ¬éƒ½éœ€è¦æ‰‹åŠ¨å®‰è£…åº“ï¼šyarn add core-js@3\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e          \u003cspan class=\"hljs-string\"\u003e\"proposals\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e        }\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e      }\n\u003cspan class=\"lineNumber\"\u003e16\u003c/span\u003e    ]\n\u003cspan class=\"lineNumber\"\u003e17\u003c/span\u003e  ],\n\u003cspan class=\"lineNumber\"\u003e18\u003c/span\u003e  \u003cspan class=\"hljs-string\"\u003e\"plugins\"\u003c/span\u003e: []\n\u003cspan class=\"lineNumber\"\u003e19\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cblockquote\u003e\n\u003cp\u003eç¬”è€…ä¸ªäººè€Œè¨€ï¼Œä¸æ¨èä½¿ç”¨ proposals åŠŸèƒ½ï¼Œåªä½¿ç”¨æœ€æ–°è§„èŒƒä¸­çš„ç‰¹æ€§ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eä¹‹åå†åœ¨å…¥å£æ–‡ä»¶æ‰‹åŠ¨å¼•å…¥\u003ccode\u003epolyfill\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'core-js/stable'\u003c/span\u003e;\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'regenerator-runtime/runtime'\u003c/span\u003e;\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// other code\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \n\n\u003ch2\u003ePlugin-transform-runtime\u003c/h2\u003e\n\u003cp\u003eä½¿ç”¨ä¹‹å‰è¯·å®‰è£…åº“:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003eyarn add @babel/runtime //é»˜è®¤ corejsä¸º \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003eï¼Œå¦‚æœä½¿ç”¨ core-js v3 çš„ runtimeï¼Œåˆ™éœ€è¦å®‰è£… @babel/runtime-corejs3\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003eyarn add -D babel-plugin-transform-runtime\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¹‹å‰æè¿‡\u003ccode\u003epreset-env\u003c/code\u003eçš„\u003ccode\u003epolyfill\u003c/code\u003eä¼šæ±¡æŸ“å…¨å±€ï¼Œä½œä¸ºé¡¹ç›®å¼€å‘æ— å¯åšéï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨å¼€å‘æä¾›ç»™å…¶ä»–å¼€å‘è€…ä½¿ç”¨çš„\u003ccode\u003elibrary\u003c/code\u003eï¼Œæˆ‘æƒ³æˆ‘ä»¬ä¸åº”è¯¥æ±¡æŸ“å…¨å±€ï¼Œå¹¶ä¸”åº”è¯¥æä¾›æ›´å¥½çš„æ‰“åŒ…ä½“ç§¯å’Œæ•ˆç‡ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA plugin that enables the re-use of Babel's injected helper code to save on codesize.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003eplugin-transform-runtime\u003c/code\u003eå¯ä»¥ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå½“å¼€å‘è€…ä½¿ç”¨å¼‚æ­¥æˆ–ç”Ÿæˆå™¨çš„æ—¶å€™ï¼Œè‡ªåŠ¨å¼•å…¥\u003ccode\u003e@babel/runtime/regenerator\u003c/code\u003eï¼Œå¼€å‘è€…ä¸å¿…åœ¨å…¥å£æ–‡ä»¶åšé¢å¤–å¼•å…¥\u003c/li\u003e\n\u003cli\u003eæä¾›æ²™ç›’ç¯å¢ƒï¼Œé¿å…å…¨å±€ç¯å¢ƒçš„æ±¡æŸ“\u003c/li\u003e\n\u003cli\u003eç§»é™¤\u003ccode\u003ebabel\u003c/code\u003eå†…è”çš„\u003ccode\u003ehelpers\u003c/code\u003eï¼Œç»Ÿä¸€ä½¿ç”¨\u003ccode\u003e@babel/runtime/helpers\u003c/code\u003eä»£æ›¿ï¼Œå‡å°æ‰“åŒ…ä½“ç§¯\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå½“ä½¿ç”¨æ­¤æ–¹æ¡ˆæ—¶ï¼Œä¸éœ€è¦åœ¨å…¥å£æ–‡ä»¶å¤„æ‰‹åŠ¨å¼•å…¥\u003ccode\u003ecore-js\u003c/code\u003eå’Œ\u003ccode\u003eregenerator-runtime\u003c/code\u003eã€‚è¯¦ç»†çš„é…ç½®é¡¹å»ºè®®åœ¨éœ€è¦ç”¨çš„æ—¶å€™æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚\u003c/p\u003e\n\u003ch2\u003eæ€»ç»“\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e@babel/preset-env\u003c/code\u003eå’Œ\u003ccode\u003eplugin-transform-runtime\u003c/code\u003eäºŒè€…éƒ½å¯ä»¥è®¾ç½®ä½¿ç”¨\u003ccode\u003ecorejs\u003c/code\u003eæ¥å¤„ç†\u003ccode\u003epolyfill\u003c/code\u003eï¼ŒäºŒè€…å„æœ‰ä½¿ç”¨åœºæ™¯ï¼Œåœ¨é¡¹ç›®å¼€å‘å’Œç±»åº“å¼€å‘çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ä¸åŒçš„é…ç½®ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eä¸è¦åŒæ—¶ä¸ºäºŒè€…é…ç½®core-jsçš„åŠŸèƒ½\u003c/code\u003eï¼Œä»¥å…äº§ç”Ÿå¤æ‚çš„ä¸è‰¯åæœã€‚\u003c/p\u003e\n\u003cp\u003eæœ€åï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸¤ä¸ªåœºæ™¯ä¸‹çš„\u003ccode\u003ebabel\u003c/code\u003eé…ç½®é¡¹ï¼š\u003c/p\u003e\n\u003ch3\u003eé¡¹ç›®å¼€å‘\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003euseBuiltIns\u003c/code\u003eä½¿ç”¨\u003ccode\u003eusage\u003c/code\u003eï¼Œå°½é‡ä½¿ç”¨ç¤¾åŒºå¹¿æ³›ä½¿ç”¨çš„ä¼˜è´¨åº“ä»¥ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ï¼Œä¸ä½¿ç”¨æš‚æœªè¿›å…¥è§„èŒƒçš„ç‰¹æ€§ã€‚\u003ccode\u003eplugin-transform-runtime\u003c/code\u003eåªä½¿ç”¨å…¶ç§»é™¤å†…è”å¤ç”¨çš„è¾…åŠ©å‡½æ•°çš„ç‰¹æ€§ï¼Œå‡å°æ‰“åŒ…ä½“ç§¯ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-string\"\u003e\"presets\"\u003c/span\u003e: [\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e    [\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e      \u003cspan class=\"hljs-string\"\u003e\"@babel/preset-env\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e      {\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e        \u003cspan class=\"hljs-comment\"\u003e// targets å®˜æ–¹æ¨èä½¿ç”¨ .browserslistrc é…ç½®\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e        \u003cspan class=\"hljs-string\"\u003e\"useBuiltIns\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"usage\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e        \u003cspan class=\"hljs-string\"\u003e\"corejs\"\u003c/span\u003e: {\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e          \u003cspan class=\"hljs-string\"\u003e\"version\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e          \u003cspan class=\"hljs-string\"\u003e\"proposals\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e        }\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e      }\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e    ]\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e  ],\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e  \u003cspan class=\"hljs-string\"\u003e\"plugins\"\u003c/span\u003e: [\n\u003cspan class=\"lineNumber\"\u003e16\u003c/span\u003e    [\n\u003cspan class=\"lineNumber\"\u003e17\u003c/span\u003e      \u003cspan class=\"hljs-string\"\u003e\"@babel/plugin-transform-runtime\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e18\u003c/span\u003e      {\n\u003cspan class=\"lineNumber\"\u003e19\u003c/span\u003e        \u003cspan class=\"hljs-string\"\u003e\"corejs\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// é»˜è®¤å€¼ï¼Œå³ä½¿å¦‚æ­¤ä¾ç„¶éœ€è¦ yarn add @babel/runtime\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e20\u003c/span\u003e      }\n\u003cspan class=\"lineNumber\"\u003e21\u003c/span\u003e    ]\n\u003cspan class=\"lineNumber\"\u003e22\u003c/span\u003e  ]\n\u003cspan class=\"lineNumber\"\u003e23\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003ch3\u003eç±»åº“å¼€å‘\u003c/h3\u003e\n\u003cp\u003eç±»åº“å¼€å‘å°½é‡ä¸ä½¿ç”¨æ±¡æŸ“å…¨å±€ç¯å¢ƒçš„\u003ccode\u003epolyfill\u003c/code\u003eï¼Œå› æ­¤\u003ccode\u003e@babel/preset-env\u003c/code\u003eåªå‘æŒ¥è¯­æ³•è½¬æ¢çš„åŠŸèƒ½ï¼Œ\u003ccode\u003epolyfill\u003c/code\u003eç”±\u003ccode\u003eplugin-transform-runtime\u003c/code\u003eæ¥å¤„ç†ï¼Œæ¨èä½¿ç”¨\u003ccode\u003ecore-js@3\u003c/code\u003eï¼Œå¹¶ä¸”ä¸ä½¿ç”¨æœªè¿›å…¥è§„èŒƒçš„ç‰¹æ€§ã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-string\"\u003e\"presets\"\u003c/span\u003e: [\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e    [\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e      \u003cspan class=\"hljs-string\"\u003e\"@babel/preset-env\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    ]\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  ],\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e  \u003cspan class=\"hljs-string\"\u003e\"plugins\"\u003c/span\u003e: [\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e    [\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e      \u003cspan class=\"hljs-string\"\u003e\"@babel/plugin-transform-runtime\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e      {\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e        \u003cspan class=\"hljs-string\"\u003e\"corejs\"\u003c/span\u003e: {\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e          \u003cspan class=\"hljs-string\"\u003e\"version\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e          \u003cspan class=\"hljs-string\"\u003e\"proposals\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e        },\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e        \u003cspan class=\"hljs-string\"\u003e\"useESModules\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e16\u003c/span\u003e      }\n\u003cspan class=\"lineNumber\"\u003e17\u003c/span\u003e    ]\n\u003cspan class=\"lineNumber\"\u003e18\u003c/span\u003e  ]\n\u003cspan class=\"lineNumber\"\u003e19\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eæ€»çš„æ¥è¯´ï¼Œåœ¨é…ç½®å¼€å‘ç¯å¢ƒçš„æ—¶å€™è¿˜æ˜¯è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼Œè¿™æ ·æ‰èƒ½å‡å°‘å‡ºé”™çš„å¯èƒ½ã€‚\u003c/p\u003e\n\u003ch2\u003eå‚è€ƒ\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://babeljs.io/docs/en/babel-preset-env#usebuiltins\"\u003e@babel/preset-env Â· Babel\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://babeljs.io/docs/en/babel-plugin-transform-runtime#docsNav\"\u003e@babel/plugin-transform-runtime Â· Babel\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://zhuanlan.zhihu.com/p/361874935\"\u003eåƒä¸€å ‘é•¿ä¸€æ™ºç³»åˆ—: 99% å¼€å‘è€…æ²¡å¼„æ˜ç™½çš„ babel çŸ¥è¯†\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","title":"Babel 7: polyfillæ–¹æ¡ˆæµ…è§£ ","date":"2021/7/11","tags":["Babel"],"mainImg":"https://images.unsplash.com/photo-1550482781-48d477e61c72?crop=entropy\u0026cs=tinysrgb\u0026fit=max\u0026fm=jpg\u0026ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjYwMTE2Mzg\u0026ixlib=rb-1.2.1\u0026q=80\u0026w=1080","coverImg":"https://images.unsplash.com/photo-1550482781-48d477e61c72?crop=entropy\u0026cs=tinysrgb\u0026fit=max\u0026fm=jpg\u0026ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjYwMTE2Mzg\u0026ixlib=rb-1.2.1\u0026q=80\u0026w=400","intro":"å‰ç«¯å·¥ç¨‹åŒ–ä¸­ï¼Œä½¿ç”¨ babel å¯¹æ–°è¯­æ³•å’Œ API é¢„ç½® polyfill æ˜¯éå¸¸æµè¡Œçš„åšæ³•ä¹‹ä¸€ï¼Œä½†ä¹‹å‰ç¬”è€…å¯¹è¿™ä¸ªè¿‡ç¨‹å’Œå…¶ä¸­ä½¿ç”¨åˆ°çš„æ’ä»¶ä¸å¤Ÿäº†è§£ï¼Œå› æ­¤åœ¨ç½‘ä¸Šæœå¯»äº†ä¸€äº›åšå®¢å’ŒçŸ¥è¯†åˆ†äº«ï¼Œå­¦ä¹ ä¸€ç•ªï¼Œå†æ¬¡æ€»ç»“ä¸€ä¸‹ã€‚"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"Babel-v7:polyfillæ–¹æ¡ˆæµ…è§£"},"buildId":"F3j8U59NoJXkniaxV9yEw","assetPrefix":"/blog","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/blog/_next/static/chunks/polyfills-86dac49abe0e0232b575.js"></script><script src="/blog/_next/static/chunks/main-bc20978b5b49cb620506.js" async=""></script><script src="/blog/_next/static/chunks/webpack-eb080e3f091731f228fb.js" async=""></script><script src="/blog/_next/static/chunks/framework.9ec1f7868b3e9d138cdd.js" async=""></script><script src="/blog/_next/static/chunks/commons.d877dcdd17afd7219ae3.js" async=""></script><script src="/blog/_next/static/chunks/6335da8543c52d3af527c387f688061357787349.7e9e1b66dd81783d6900.js" async=""></script><script src="/blog/_next/static/chunks/pages/_app-4e649ed46ef47e92b24e.js" async=""></script><script src="/blog/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.c2ce14a235a03ef7811d.js" async=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-ece295f9976e557edb76.js" async=""></script><script src="/blog/_next/static/F3j8U59NoJXkniaxV9yEw/_buildManifest.js" async=""></script><script src="/blog/_next/static/F3j8U59NoJXkniaxV9yEw/_ssgManifest.js" async=""></script></body></html>