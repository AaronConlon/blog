<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta name="description" content="javascript node deno linux web developer"/><meta charSet="utf-8"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ğŸ¯&lt;/text&gt;&lt;/svg&gt;"/><title>Javascript-ES6-å‡½æ•°å¼ç¼–ç¨‹é˜…è¯»éšå†™</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css"/><link rel="stylesheet" href="/blog/post.css"/><meta name="next-head-count" content="7"/><link rel="preload" href="/blog/_next/static/css/e329e062f634851cc5d0.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/e329e062f634851cc5d0.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/d5a8ab09696082e07b0c.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/d5a8ab09696082e07b0c.css" data-n-p=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/blog/_next/static/chunks/main-bc20978b5b49cb620506.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/webpack-eb080e3f091731f228fb.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/framework.9ec1f7868b3e9d138cdd.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/commons.d877dcdd17afd7219ae3.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/6335da8543c52d3af527c387f688061357787349.7e9e1b66dd81783d6900.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/_app-4e649ed46ef47e92b24e.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.c2ce14a235a03ef7811d.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-3688e52283fbbc34d9ae.js" as="script"/></head><body><div id="__next"><style data-emotion-css="d6jcgn">html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none !important;}input[type="number"]{-moz-appearance:textfield;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none !important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none !important;}html{box-sizing:border-box;font-family:sans-serif;}*,*::before,*::after{box-sizing:border-box;}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}ol,ul{margin:0;padding:0;}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";line-height:1.5;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;text-rendering:optimizelegibility;}hr{border-top-width:1px;}img{border-style:solid;}textarea{resize:vertical;}button,[role="button"]{cursor:pointer;}button::-moz-focus-inner{border:0 !important;}table{border-collapse:collapse;}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;}pre,code,kbd,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle;}img,video{max-width:100%;height:auto;}html{line-height:1.5;color:#1A202C;}*,*::before,*::after{border-width:0;border-style:solid;border-color:#E2E8F0;}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#A0AEC0;}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#A0AEC0;}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#A0AEC0;}input::-moz-placeholder,textarea::-moz-placeholder{color:#A0AEC0;}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#A0AEC0;}input::placeholder,textarea::placeholder{color:#A0AEC0;}</style><div><div class="layout_container__1BBI- css-0"><header><div class="css-0"><style data-emotion-css="em7ozm">.css-em7ozm{font-size:2.25rem;line-height:1.25;font-weight:700;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";text-align:center;margin:0 auto;padding:1.4rem 1rem;color:#0069d6;}@media screen and (min-width:48em){.css-em7ozm{font-size:3rem;}}</style><h1 class="css-em7ozm"><a href="/blog">å¦™æ‰<style data-emotion-css="1i1myri">.css-1i1myri{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:30%;}</style><sub class="css-1i1myri">blog</sub></a></h1></div></header><main><div class="css-0"><style data-emotion-css="t9c2rr">.css-t9c2rr{width:100%;margin:0 auto;padding-bottom:2rem;max-width:960px;}</style><div class="css-t9c2rr"><style data-emotion-css="8atqhb">.css-8atqhb{width:100%;}</style><img alt="" class="css-8atqhb"/></div><style data-emotion-css="1td051d">.css-1td051d{width:100%;margin:0 auto;max-width:960px;}</style><div class="css-1td051d"><style data-emotion-css="1299f13">.css-1299f13{font-size:1.875rem;line-height:2.5rem!important;font-weight:700;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";text-align:center;overflow:hidden;}@media screen and (min-width:30em){.css-1299f13{line-height:3rem!important;}}@media screen and (min-width:48em){.css-1299f13{font-size:2.25rem;}}</style><h1 class="css-1299f13">Javascript-ES6-å‡½æ•°å¼ç¼–ç¨‹é˜…è¯»éšå†™</h1><style data-emotion-css="7e9jz6">.css-7e9jz6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:2rem;margin:0 auto;margin-right:0.4rem;float:right;}</style><div id="tags" class="css-7e9jz6"><style data-emotion-css="qgikqf">.css-qgikqf{display:inline-block;padding-left:8px;padding-right:0.25rem;text-transform:uppercase;font-size:0.6rem;border-radius:5px;font-weight:700;white-space:nowrap;vertical-align:middle;background-color:#c6f6d5;color:#22543d;height:2rem;line-height:2rem;min-width:4rem;}</style><div class="css-qgikqf">Javascript</div></div><style data-emotion-css="8ddayy">.css-8ddayy{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:2rem;max-width:100%;border-radius:0.25rem;font-weight:500;min-width:2rem;padding-left:0.75rem;padding-right:0.75rem;background-color:#c6f6d5;color:#22543d;margin-bottom:2rem;font-size:0.6rem;margin-left:0.4rem;}</style><div class="css-8ddayy">æœ€åæ›´æ–°: <!-- -->2020/12/16</div><div style="margin:0 1rem"><h1>å‡½æ•°å¼ç¼–ç¨‹ç®€ä»‹</h1>
<blockquote>
<p>å‡½æ•°è¦å°,è¦æ›´å°.</p>
</blockquote>
<p>å‡½æ•°å¼ç¼–ç¨‹,è¿œç¦»å¤–éƒ¨ç¯å¢ƒçš„ä¾èµ–,éš”ç»çªå˜ä¸çŠ¶æ€.</p>
<p>æ•°å­¦çš„å‡½æ•°å®šä¹‰ä¸­,å‡½æ•°å¿…é¡»æ¥æ”¶ä¸€ä¸ª<code>å‚æ•°</code>,è¿”å›ä¸€ä¸ªå€¼.å‡½æ•°æ ¹æ®æ¥æ”¶çš„å‚æ•°è¿è¡Œ.ç»™å®šçš„å‚æ•°ä¸‹,è¿”å›å€¼æ˜¯ä¸å˜çš„.</p>
<p><code>JavaScriptå‡½æ•°å¼ç¼–ç¨‹</code>åŸºäºæ•°å­¦å‡½æ•°åŠå…¶æ€æƒ³è¿›è¡Œå‘å±•.è¿ç”¨å‡½æ•°å¼çš„èŒƒå¼è¿›è¡Œå¼€å‘èƒ½åˆ›é€ å¯ç¼“å­˜å’Œå¯æµ‹è¯•çš„ä»£ç åº“.</p>
<blockquote>
<p>ç®€å•åˆ†è¾¨å‡½æ•°ä¸æ–¹æ³• - JS,ä¸å¿…æ·±ç©¶ windowå’Œ global å¯¹è±¡.</p>
</blockquote>
<ul>
<li>å‡½æ•°: ä¸€æ®µé€šè¿‡åç§°å¯è°ƒç”¨çš„ä»£ç </li>
<li>æ–¹æ³•: é€šè¿‡åç§°ä¸”å…³è”å¯¹è±¡çš„åç§°è¢«è°ƒç”¨çš„ä»£ç </li>
</ul>
<p>å‡½æ•°çš„å¼•ç”¨é€æ˜æ€§æŒ‡çš„æ˜¯,å‡½æ•°å¯¹ç›¸åŒçš„è¾“å…¥è¿”å›ç›¸åŒçš„å€¼.ä¸ä¾èµ–å…¨å±€æ•°æ®çš„å‡½æ•°,èƒ½å¤Ÿè‡ªç”±åœ°åœ¨å¤šçº¿ç¨‹çŠ¶æ€ä¸‹è¿è¡Œ,å…¨ç¨‹æ— é”.å¹¶ä¸”å‡½æ•°æ˜¯<code>å¯ç¼“å­˜</code>çš„,åˆç†è¿ç”¨è¿™ä¸€ç‚¹,å¯ä»¥èŠ‚çœå¤§é‡é‡å¤è®¡ç®—çš„èµ„æºæ¶ˆè€—å’Œæ—¶é—´æ¶ˆè€—.</p>
<blockquote>
<p>å¼•ç”¨é€æ˜æ€§æ˜¯ä¸€ç§å“²å­¦</p>
</blockquote>
<p><strong>å‘½ä»¤å¼?å£°æ˜å¼?</strong></p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
<span class="lineNumber">2</span><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&#x3C;arr.length;i++) 
<span class="lineNumber">3</span>  <span class="hljs-built_in">console</span>.log(i)</code></pre> 

<p>ä¸Šè¿°ä»£ç ç¤ºä¾‹,æˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨å¦‚ä½•å»åš,è¿™å°±æ˜¯<code>å‘½ä»¤å¼</code>.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
<span class="lineNumber">2</span>arr.forEach(<span class="hljs-function"><span class="hljs-params">i</span> =></span> <span class="hljs-built_in">console</span>.log(i))</code></pre> 

<p><code>forEach</code>æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°,æ„åœ¨å‘ŠçŸ¥ç¼–è¯‘å™¨<code>åšä»€ä¹ˆ</code>,<code>å¦‚ä½•åš</code>çš„éƒ¨åˆ†åˆ™åœ¨é«˜é˜¶å‡½æ•°å†…çš„æ™®é€šå‡½æ•°ä¸­å®ç°.è¿™ä¾¿æ˜¯<code>å£°æ˜å¼</code>.</p>
<p><strong>çº¯å‡½æ•°</strong>:å¯¹ç»™å®šçš„è¾“å…¥,è¿”å›ç›¸åŒçš„è¾“å‡ºçš„å‡½æ•°.çº¯å‡½æ•°ä¸ä¾èµ–äºå¤–éƒ¨ç¯å¢ƒ.ä¹Ÿä¸ä¼šæ”¹å˜å¤–éƒ¨ç¯å¢ƒ.æ˜“äºå¯¹å‡½æ•°è¿›è¡Œ<code>æµ‹è¯•</code>.</p>
<p>çº¯å‡½æ•°æ˜¯<code>æ˜“äºé˜…è¯»</code>çš„.ä¸ºçº¯å‡½æ•°è®¾ç½®<code>å…·æœ‰æ„ä¹‰</code>çš„å‡½æ•°åæ˜¯ä¸€ç§æœ€ä½³å®è·µ.</p>
<blockquote>
<p>çº¯å‡½æ•°åº”è¯¥è¢«è®¾è®¡ä¸ºåªåšä¸€ä»¶äº‹,å¹¶ä¸”æŠŠå®ƒåšåˆ°å®Œç¾,è¿™ä¹Ÿä¼šæ˜¯ Unix çš„å“²å­¦.</p>
</blockquote>
<p>çº¯å‡½æ•°æ”¯æŒ<code>ç®¡é“å’Œç»„åˆ</code>.</p>
<pre><code class="hljs language-shell"><span class="lineNumber">1</span>cat package.json | grep axios</code></pre> 

<p><code>bash</code>å‘½ä»¤çš„ç®¡é“å’Œç»„åˆå¨åŠ›å·¨å¤§,ç»„åˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒ.æˆ‘ä»¬ç§°ä¹‹ä¸º<code>function composition</code>.</p>
<h1>JavaScript å‡½æ•°å¼åŸºç¡€</h1>
<p>ç•¥,ç®€è¿°åŸºç¡€<code>JavaScript</code>.</p>
<h1>é«˜é˜¶å‡½æ•° HOF</h1>
<p><strong>JavaScript æ•°æ®ç±»å‹</strong>:</p>
<ul>
<li>Number</li>
<li>String</li>
<li>Boolean</li>
<li>Null</li>
<li>Object</li>
<li>undefined</li>
<li>Symbol</li>
<li>BigInt</li>
</ul>
<p>é™¤äº†<code>object</code>å¤–,éƒ½æ˜¯åŸå§‹æ•°æ®ç±»å‹.</p>
<blockquote>
<p>åœ¨<a href="https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8">è®¡ç®—æœºç§‘å­¦</a>ä¸­ï¼Œ<strong>æŠ½è±¡åŒ–</strong>ï¼ˆè‹±è¯­ï¼šAbstractionï¼‰æ˜¯å°†èµ„æ–™ä¸ç¨‹åºï¼Œä»¥å®ƒçš„è¯­ä¹‰æ¥å‘ˆç°å‡ºå®ƒçš„å¤–è§‚ï¼Œä½†æ˜¯éšè—èµ·å®ƒçš„å®ç°ç»†èŠ‚ã€‚æŠ½è±¡åŒ–æ˜¯ç”¨æ¥å‡å°‘ç¨‹åºçš„å¤æ‚åº¦ï¼Œä½¿å¾—ç¨‹åºå‘˜å¯ä»¥ä¸“æ³¨åœ¨å¤„ç†å°‘æ•°é‡è¦çš„éƒ¨åˆ†ã€‚ä¸€ä¸ªç”µè„‘ç³»ç»Ÿå¯ä»¥åˆ†å‰²æˆå‡ ä¸ª<a href="https://zh.wikipedia.org/wiki/%E6%8A%BD%E8%B1%A1%E5%B1%A4">æŠ½è±¡å±‚</a>ï¼ˆAbstraction layerï¼‰ï¼Œä½¿å¾—ç¨‹åºå‘˜å¯ä»¥å°†å®ƒä»¬åˆ†å¼€å¤„ç†ã€‚</p>
</blockquote>
<p>æŠ½è±¡åŒ–,è®©æˆ‘ä»¬ä¸“æ³¨äºå¯æ§å±‚é¢çš„å·¥ä½œ,å°†å¤æ‚çš„å†…å®¹ç®€å•åŒ–,è®©å¼€å‘è€…ä¸“æ³¨äºé¢„è®¢çš„ç›®æ ‡,ä¸å¿…<code>äº‹äº‹å…³å¿ƒ</code>.</p>
<p>æˆ‘ä»¬é€šè¿‡<code>é«˜é˜¶å‡½æ•°</code>å®ç°æŠ½è±¡.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> forEach = <span class="hljs-function">(<span class="hljs-params">arr, Fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&#x3C;arr.length;i++) Fn(arr[i])
<span class="lineNumber">3</span>}</code></pre> 

<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„é«˜é˜¶å‡½æ•°,æŠ½è±¡äº†<code>éå†æ•°ç»„</code>çš„é—®é¢˜,å¦‚æœä½ ä½¿ç”¨è¿™ä¸ªå‡½æ•°,ä½ å¹¶ä¸éœ€è¦å…³æ³¨å†…éƒ¨ä»£ç æ˜¯å¦‚ä½•å®ç°çš„.ä¸Šè¿°ä¾‹å­æ˜¯ä¸€ä¸ªç®€å•é€»è¾‘,åŒç†ä¹Ÿå¯ä»¥æ˜¯æ›´ä¸ºå¤æ‚çš„é€»è¾‘,è¿™æ ·ä¸€æ¥å°±å°†å¤æ‚é—®é¢˜<code>æŠ½è±¡</code>å‡ºæ¥äº†.</p>
<p>è®©æˆ‘ä»¬å¼€å§‹å­¦ä¹ æ„å»ºå¤æ‚çš„é«˜é˜¶å‡½æ•°.</p>
<p>åˆ›å»ºä¸€ä¸ª<code>every</code>å‡½æ•°å¦‚ä¸‹:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> every = <span class="hljs-function">(<span class="hljs-params">arr, fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">true</span>
<span class="lineNumber">3</span>  <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> i=<span class="hljs-number">0</span>;i&#x3C;arr.length;i++</span>)</span> {
<span class="lineNumber">4</span>    result = result &#x26;&#x26; fn(arr[i])
<span class="lineNumber">5</span>  }
<span class="lineNumber">6</span>  <span class="hljs-keyword">return</span> result
<span class="lineNumber">7</span>}
<span class="lineNumber">8</span> 
<span class="lineNumber">9</span><span class="hljs-comment">// for..of.. ç‰ˆæœ¬</span>
<span class="lineNumber">10</span><span class="hljs-comment">// for...of..æ˜¯ es6 çš„å‡½æ•°,å¯ä»¥æ–¹ä¾¿éå†æ•°ç»„</span>
<span class="lineNumber">11</span><span class="hljs-keyword">const</span> every = <span class="hljs-function">(<span class="hljs-params">arr, fn</span>) =></span> {
<span class="lineNumber">12</span>  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">true</span>
<span class="lineNumber">13</span>  <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> value <span class="hljs-keyword">of</span> arr</span>)</span> {
<span class="lineNumber">14</span>    result = result &#x26;&#x26; fn(arr[value])
<span class="lineNumber">15</span>  }
<span class="lineNumber">16</span>  <span class="hljs-keyword">return</span> result
<span class="lineNumber">17</span>}</code></pre> 

<p>å¦‚æ­¤ä¸€æ¥,æˆ‘ä»¬æŠ½è±¡äº†å¯¹æ•°ç»„éå†çš„æ“ä½œ.</p>
<p>æ¥ç€,ç¼–å†™ä¸€ä¸ª<code>some</code>å‡½æ•°,å…¶æ¥å—ä¸€ä¸ªæ•°ç»„å’Œä¸€ä¸ªå‡½æ•°,å¦‚æœæ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´ é€šè¿‡æ¥æ”¶çš„å‡½æ•°è¿”å›<code>true</code>,åˆ™<code>some</code>å‡½æ•°è¿”å›<code>true</code>:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> every = <span class="hljs-function">(<span class="hljs-params">arr, fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> result = <span class="hljs-literal">true</span>
<span class="lineNumber">3</span>  <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> value <span class="hljs-keyword">of</span> arr</span>)</span> {
<span class="lineNumber">4</span>    result = result || fn(arr[value])
<span class="lineNumber">5</span>  }
<span class="lineNumber">6</span>  <span class="hljs-keyword">return</span> result
<span class="lineNumber">7</span>}</code></pre> 

<blockquote>
<p>some å‡½æ•°å’Œ every å‡½æ•°éƒ½ä¸ç®—é«˜æ•ˆ,è¿™é‡Œåªæ˜¯ä½œä¸ºå¯¹é«˜é˜¶å‡½æ•°çš„å±•ç¤º.</p>
</blockquote>
<p><code>JavaScript</code>çš„<code>array</code>åŸå‹å†…ç½®<code>sort</code>å‡½æ•°,å¯ä»¥ç»™æ•°ç»„æ’åº.è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„<code>é«˜é˜¶å‡½æ•°</code>.å®ƒæ¥æ”¶ä¸€ä¸ªå¯é€‰çš„å‡½æ•°æ¥å†³å®šæ’åºé¡ºåºé€»è¾‘.æå¤§çš„æé«˜äº†æ’åºçš„çµæ´»æ€§.æˆ‘ä»¬çŸ¥é“,é»˜è®¤çš„<code>sort</code>æ’åºæ˜¯å°†æ•°ç»„å…ƒç´ è½¬æ¢ä¸º<code>string</code>å¹¶ä¸”æŒ‰<code>Unicode</code>ç¼–ç ç‚¹è¿›è¡Œæ’åº,å› æ­¤æ•°å­— 2 åœ¨é»˜è®¤æ’åºç®—æ³•ä¸­å°äº 12.è®©æˆ‘ä»¬çœ‹çœ‹æ­¤å¯é€‰çš„<code>compare</code>å‡½æ•°çš„éª¨æ¶:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span>(<span class="hljs-params">a, b</span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">æ¡ä»¶</span>)</span> {
<span class="lineNumber">3</span>    <span class="hljs-comment">// a å°äº b</span>
<span class="lineNumber">4</span>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>
<span class="lineNumber">5</span>  }
<span class="lineNumber">6</span>  <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">æ¡ä»¶</span>)</span> {
<span class="lineNumber">7</span>    <span class="hljs-comment">// a å¤§äº b</span>
<span class="lineNumber">8</span>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
<span class="lineNumber">9</span>  }
<span class="lineNumber">10</span>  <span class="hljs-comment">// a ç­‰äº b</span>
<span class="lineNumber">11</span>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
<span class="lineNumber">12</span>}</code></pre> 

<p>ä¸¾ä¸ªä¾‹å­,ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·æ•°ç»„,æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> people = [
<span class="lineNumber">2</span>  {
<span class="lineNumber">3</span>    <span class="hljs-attr">name</span>: <span class="hljs-string">'Aaron'</span>,
<span class="lineNumber">4</span>    <span class="hljs-attr">age</span>: <span class="hljs-number">10</span>
<span class="lineNumber">5</span>  },
<span class="lineNumber">6</span>  {
<span class="lineNumber">7</span>    <span class="hljs-attr">name</span>: <span class="hljs-string">'Rose'</span>,
<span class="lineNumber">8</span>    <span class="hljs-attr">age</span>: <span class="hljs-number">11</span>
<span class="lineNumber">9</span>  }
<span class="lineNumber">10</span>]</code></pre> 

<p>è€Œéœ€æ±‚åˆ™æ˜¯,é€šè¿‡å§“åæ’åºæˆ–è€…é€šè¿‡å¹´é¾„æ’åº.æ ¹æ®å‰ç½®çŸ¥è¯†,å¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç :</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-comment">// ç®€åŒ–é€»è¾‘,å¿½ç•¥ç›¸ç­‰çš„æƒ…å†µ</span>
<span class="lineNumber">2</span>people.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> a.name > b.name ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>)
<span class="lineNumber">3</span>people.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> a.age > b.age ? <span class="hljs-number">1</span>: -<span class="hljs-number">1</span>)</code></pre> 

<p>ä¸Šè¿°ä»£ç ,æˆ‘ä»¬å°†é›·åŒçš„éƒ¨åˆ†å†™äº†ä¸¤é.ç°åœ¨æˆ‘ä»¬æ¥è®¾è®¡ä¸€ä¸ªå‡½æ•°,æ¥æ”¶ä¸€ä¸ªå‚æ•°,è¿”å›ä¸€ä¸ªå‡½æ•°.æ˜¯çš„,å°†è¦è®¾è®¡çš„è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª<code>é«˜é˜¶å‡½æ•°</code>.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> sortBy = <span class="hljs-function">(<span class="hljs-params">property</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> {
<span class="lineNumber">3</span>    <span class="hljs-keyword">return</span> a[property] > b[property] ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>
<span class="lineNumber">4</span>  }
<span class="lineNumber">5</span>}
<span class="lineNumber">6</span><span class="hljs-comment">// ç®€åŒ–ç‰ˆ</span>
<span class="lineNumber">7</span><span class="hljs-keyword">const</span> sortBy = <span class="hljs-function"><span class="hljs-params">property</span> =></span> <span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> a[property] > b[property] ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span></code></pre> 

<p>ç°åœ¨,æˆ‘ä»¬å¯ä»¥é‡å†™æŒ‰<code>name</code>æˆ–è€…<code>age</code>çš„æ’åºä»£ç äº†.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>people.sort(sortBy(<span class="hljs-string">'name'</span>))
<span class="lineNumber">2</span>people.sort(sortBy(<span class="hljs-string">'age'</span>))</code></pre> 

<p>è¿™å°±æ˜¯<code>é«˜é˜¶å‡½æ•°</code>çš„é­…åŠ›.è¿ç”¨é«˜é˜¶å‡½æ•°,æé«˜ä»£ç è´¨é‡,é™ä½ä»£ç æ•°é‡.</p>
<h1>é—­åŒ…ä¸é«˜é˜¶å‡½æ•°</h1>
<p>ç®€è€Œè¨€ä¹‹,é—­åŒ…å°±æ˜¯ä¸€ä¸ªå†…éƒ¨å‡½æ•°.åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°,å¯ä»¥ç§°ä¸º<code>é—­åŒ…å‡½æ•°</code>.</p>
<p>ä»<code>æŠ€æœ¯ä¸Š</code>æ¥è®²,ä¸Šè¿°é—­åŒ…å‡½æ•°çš„é—­åŒ…åœºæ™¯å­˜åœ¨ä¸‰ä¸ªå¯è®¿é—®çš„ä½œç”¨åŸŸ:</p>
<ul>
<li>è‡ªèº«å£°æ˜å†…å˜é‡</li>
<li>å¤–éƒ¨å‡½æ•°å˜é‡</li>
<li>å…¨å±€å˜é‡</li>
</ul>
<p><strong>é—­åŒ…å¯ä»¥è®°ä½ä¸Šä¸‹æ–‡ç¯å¢ƒ</strong>.è¯è¯´å›æ¥,ç”±äºæˆ‘ä»¬è¦åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­å¤„ç†å¾ˆå¤šå‡½æ•°,å› æ­¤éœ€è¦ä¸€ç§è°ƒè¯•æ–¹æ³•.</p>
<p>ä¸¾ä¸ªä¾‹å­,ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„,æƒ³è¦è§£ææˆæ•´æ•°æ•°ç»„,å¦‚ä¸‹ä»£ç ä¼šæœ‰é—®é¢˜:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>[<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>].map(<span class="hljs-built_in">parseInt</span>)</code></pre> 

<p><code>map</code>å‡½æ•°ç”¨ä¸‰ä¸ªå‚æ•°è°ƒç”¨äº†<code>parseInt</code>,åˆ†åˆ«æ˜¯:</p>
<ol>
<li>element</li>
<li>index</li>
<li>arr</li>
</ol>
<p>è€Œ<code>parseInt</code>å‡½æ•°å…¨ç›˜æ¥çº³,æ¥çœ‹çœ‹æ­¤å‡½æ•°çš„å®šä¹‰:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-built_in">parseInt</span>(string, radix);</code></pre> 

<p><code>radix</code>æ˜¯å¯é€‰çš„åŸºæ•°,å¦‚æœæä¾› 10,åˆ™è½¬æ¢ä¸ºåè¿›åˆ¶çš„æ•´æ•°.</p>
<p>å¦‚æœ <code>radix</code> æ˜¯ <code>undefined</code>ã€<code>0</code>æˆ–æœªæŒ‡å®šçš„ï¼ŒJavaScriptä¼šå‡å®šä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li>å¦‚æœè¾“å…¥çš„ <code>string</code>ä»¥ "<code>0x</code>"æˆ– "<code>0x</code>"ï¼ˆä¸€ä¸ª0ï¼Œåé¢æ˜¯å°å†™æˆ–å¤§å†™çš„Xï¼‰å¼€å¤´ï¼Œé‚£ä¹ˆradixè¢«å‡å®šä¸º16ï¼Œå­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†è¢«å½“åšåå…­è¿›åˆ¶æ•°å»è§£æã€‚</li>
<li>å¦‚æœè¾“å…¥çš„ <code>string</code>ä»¥ "<code>0</code>"ï¼ˆ0ï¼‰å¼€å¤´ï¼Œ <code>radix</code>è¢«å‡å®šä¸º<code>8</code>ï¼ˆå…«è¿›åˆ¶ï¼‰æˆ–<code>10</code>ï¼ˆåè¿›åˆ¶ï¼‰ã€‚å…·ä½“é€‰æ‹©å“ªä¸€ä¸ªradixå–å†³äºå®ç°ã€‚ECMAScript 5 æ¾„æ¸…äº†åº”è¯¥ä½¿ç”¨ 10 (åè¿›åˆ¶)ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒã€‚<strong>å› æ­¤ï¼Œåœ¨ä½¿ç”¨ <code>parseInt</code> æ—¶ï¼Œä¸€å®šè¦æŒ‡å®šä¸€ä¸ª radix</strong>ã€‚</li>
<li>å¦‚æœè¾“å…¥çš„ <code>string</code> ä»¥ä»»ä½•å…¶ä»–å€¼å¼€å¤´ï¼Œ <code>radix</code> æ˜¯ <code>10</code> (åè¿›åˆ¶)ã€‚</li>
</ol>
<p>å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½è½¬æ¢ä¸ºæ•°å­—ï¼Œ<code>parseInt</code>ä¼šè¿”å› <code>NaN</code>ã€‚</p>
<p>æ­¤æ—¶,<code>['1', '2'].map(parseInt)</code>çš„ç»“æœæ˜¯: [1, NaN].</p>
<p>å¦‚ä½•ç”¨å‡½æ•°å¼çš„æ€ç»´,åˆ›å»ºä¸€ä¸ªé«˜é˜¶å‡½æ•°,å¯¹<code>parseInt</code>è¿›è¡ŒæŠ½è±¡.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> unary = <span class="hljs-function">(<span class="hljs-params">fn</span>) =></span> fn.length === <span class="hljs-number">1</span> ? fn : <span class="hljs-function">(<span class="hljs-params">arg</span>) =></span> fn(arg)
<span class="lineNumber">2</span>[<span class="hljs-string">'1'</span>,<span class="hljs-string">'2'</span>,<span class="hljs-string">'3'</span>].map(unary(<span class="hljs-built_in">parseInt</span>))</code></pre> 

<p>ç°åœ¨,å³ä½¿<code>map</code>ä»¥ä¸‰ä¸ªå‚æ•°è°ƒç”¨<code>unary</code>å‡½æ•°æ‰§è¡Œåè¿”å›çš„å‡½æ•°,éƒ½åªä¼šè®©<code>element</code>å‚æ•°ç”Ÿæ•ˆ.</p>
<p>æˆ‘ä»¬å¾—åˆ°äº†é¢„æœŸä¸­çš„ç»“æœ:<code>[1,2,3]</code> :seedling:</p>
<p>ç°åœ¨,è®©æˆ‘ä»¬ä¸ºè‡ªå·±çš„å·¥å…·åº“æ·»åŠ ä¸€ä¸ªå·¥å…·å‡½æ•°,è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°,è®©è¿™ä¸ªæ¥æ”¶çš„å‡½æ•°åªèƒ½è¢«æ‰§è¡Œä¸€æ¬¡.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> once = <span class="hljs-function">(<span class="hljs-params">fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> done = <span class="hljs-literal">false</span>
<span class="lineNumber">3</span>  <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> done ? <span class="hljs-literal">undefined</span> : ((done = <span class="hljs-literal">true</span>), fn.apply(<span class="hljs-built_in">this</span>, <span class="hljs-built_in">arguments</span>))
<span class="lineNumber">4</span>}</code></pre> 

<p>ç°åœ¨ç”¨ä¸€ä¸ªå˜é‡<code>done</code>ä¿å­˜å‡½æ•°çš„æ‰§è¡ŒçŠ¶æ€.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> demoFn = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-built_in">console</span>.log(a, b, <span class="hljs-string">'just called once.'</span>)
<span class="lineNumber">3</span>}
<span class="lineNumber">4</span><span class="hljs-keyword">const</span> newDemoFn = once(demoFn)
<span class="lineNumber">5</span>newDemoFn(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) <span class="hljs-comment">// output: 1 2 just called once.</span>
<span class="lineNumber">6</span>newDemoFn(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>) <span class="hljs-comment">// no output</span></code></pre> 

<p>ç»§ç»­,åˆ›å»ºä¸‹ä¸€ä¸ªå‡½æ•°<code>memoized</code>,ä½¿å‡½æ•°è®°ä½å…¶è®¡ç®—ç»“æœ:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> memoized = <span class="hljs-function">(<span class="hljs-params">fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">const</span> lookupTable = {}
<span class="lineNumber">3</span>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">arg</span>) =></span> lookupTable[arg] || (lookupTable[arg] = fn(arg))
<span class="lineNumber">4</span>}</code></pre> 

<p>ä¸€ä¸ªé€ŸæŸ¥<code>table</code>ä¿å­˜äº†å‡½æ•°è§£æ„,å¦‚æœä¸å­˜åœ¨åˆ™æ‰§è¡Œæ­¤å‡½æ•°,ä¿å­˜åˆ°é€ŸæŸ¥è¡¨ä¸­å¹¶ä¸”è¿”å›æ­¤ç»“æœ.</p>
<p><strong>memoized å‡½æ•°æ˜¯ç»å…¸çš„å‡½æ•°å¼ç¼–ç¨‹,æ˜¯é—­åŒ…ä¸çº¯å‡½æ•°çš„å®æˆ˜</strong></p>
<h1>æ•°ç»„çš„å‡½æ•°å¼ç¼–ç¨‹</h1>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ç»„å‡½æ•°ç”¨äºè§£å†³å¸¸è§çš„æ•°ç»„é—®é¢˜,å…³é”®åœ¨äºå‡½æ•°å¼çš„æ–¹æ³•,è€Œéå‘½ä»¤å¼çš„æ–¹æ³•.</p>
<blockquote>
<p>æŠŠå‡½æ•°åº”ç”¨äºä¸€ä¸ªå€¼,å¹¶ä¸”åˆ›å»ºæ–°çš„å€¼çš„è¿‡ç¨‹è¢«ç§°ä¸º"æŠ•å½±"</p>
</blockquote>
<p><code>Array.map</code>å°±æ˜¯å…¸å‹çš„æŠ•å½±å‡½æ•°.æˆ‘ä»¬æ¥è¯•ç€åˆ›å»ºä¸€ä¸ª<code>map</code>å‡½æ•°.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> map = <span class="hljs-function">(<span class="hljs-params">arr, fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">const</span> result = []
<span class="lineNumber">3</span>  <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> v <span class="hljs-keyword">of</span> arr</span>)</span> {
<span class="lineNumber">4</span>    result.push(fn(v))
<span class="lineNumber">5</span>  }
<span class="lineNumber">6</span>	<span class="hljs-keyword">return</span> result
<span class="lineNumber">7</span>}</code></pre> 

<p>ä¸€ä¸ª<code>filter</code>å‡½æ•°,å¯¹æ•°ç»„å†…å®¹è¿›è¡Œè¿‡æ»¤.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> filter = <span class="hljs-function">(<span class="hljs-params">arr, fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">const</span> result = []
<span class="lineNumber">3</span>  <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> v <span class="hljs-keyword">of</span> arr</span>)</span> {
<span class="lineNumber">4</span>    <span class="hljs-keyword">if</span>(fn(v)) result.push(v)
<span class="lineNumber">5</span>  }
<span class="lineNumber">6</span>  <span class="hljs-keyword">return</span> result
<span class="lineNumber">7</span>}</code></pre> 

<p>ä¸€ä¸ª<code>reduce</code>å‡½æ•°,å¯¹æ•°ç»„çš„æ‰€æœ‰å€¼è¿›è¡Œ<code>å½’çº¦</code>æ“ä½œ.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">var</span> reduce = <span class="hljs-function">(<span class="hljs-params">arr, fn, defaultAccumlator</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> accumlator;
<span class="lineNumber">3</span>  <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">defaultAccumlator !== <span class="hljs-literal">undefined</span></span>)</span> {
<span class="lineNumber">4</span>    accumlator = defaultAccumlator
<span class="lineNumber">5</span>    <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">const</span> v <span class="hljs-keyword">of</span> arr</span>)</span> {
<span class="lineNumber">6</span>      accumlator = fn(accumlator, v)
<span class="lineNumber">7</span>    }
<span class="lineNumber">8</span>  } <span class="hljs-keyword">else</span> {
<span class="lineNumber">9</span>    accumlator = arr[<span class="hljs-number">0</span>]
<span class="lineNumber">10</span>    <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> i=<span class="hljs-number">1</span>;i&#x3C;arr.length;i++</span>)</span> {    
<span class="lineNumber">11</span>      accumlator = fn(accumlator, arr[i])
<span class="lineNumber">12</span>    }
<span class="lineNumber">13</span>  }
<span class="lineNumber">14</span>  <span class="hljs-keyword">return</span> [accumlator]
<span class="lineNumber">15</span>}</code></pre> 

<p><strong>ç»§ç»­</strong>,ä¸Š<code>zip</code>å‡½æ•°,ç”¨äºåˆå¹¶ä¸¤ä¸ªå•ç‹¬çš„æ•°ç»„,è¿”å›ä¸€ä¸ªå¤„ç†è¿‡çš„æ–°æ•°ç»„.è¿™ä¸ªå‡½æ•°å¯ä»¥å¯¹ç»™å®šçš„ä¸¤ä¸ªæ•°ç»„çš„é™å®šå¯¹è±¡è¿›è¡Œç»“å¯¹å¤„ç†,å¦‚ä½•å¤„ç†å–å†³äºå…·ä½“çš„å‡½æ•°é€»è¾‘.ç»“å¯¹çš„ç»“æœå°±æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> zip = <span class="hljs-function">(<span class="hljs-params">arr1, arr2, fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> index, result = []
<span class="lineNumber">3</span>  <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params">index = <span class="hljs-number">0</span>;index &#x3C; <span class="hljs-built_in">Math</span>.min(arr1.length, arr2.length);index++</span>)</span> {
<span class="lineNumber">4</span>    result.push(fn(arr1[index], arr2[index]))
<span class="lineNumber">5</span>  }
<span class="lineNumber">6</span>  <span class="hljs-keyword">return</span> result
<span class="lineNumber">7</span>}</code></pre> 

<h1>currying å’Œååº”ç”¨</h1>
<p><strong>ä¸€äº›æœ¯è¯­</strong>:</p>
<ul>
<li>unary function: ä¸€å…ƒå‡½æ•°,åªæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„å‡½æ•°.</li>
<li>binary function: äºŒå…ƒå‡½æ•°</li>
<li>å˜å‚å‡½æ•°:æ¥å—å¯å˜æ•°é‡å‚æ•°çš„å‡½æ•°</li>
<li>currying: æŸ¯é‡ŒåŒ–,è¿™æ˜¯ä¸€ä¸ªè¿‡ç¨‹,å°†ä¸€ä¸ªå¤šå‚å‡½æ•°è½¬å˜ä¸ºä¸€ä¸ªåµŒå¥—çš„ä¸€å…ƒå‡½æ•°.</li>
</ul>
<p>ä¸Šä»£ç :</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span> <span class="hljs-keyword">const</span> curry = <span class="hljs-function"><span class="hljs-params">binaryFn</span> =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">firstArg</span> =></span> {
<span class="lineNumber">3</span>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">secondArg</span> =></span> {
<span class="lineNumber">4</span>      <span class="hljs-keyword">return</span> binaryFn(firstArg, secondArg);
<span class="lineNumber">5</span>    }
<span class="lineNumber">6</span>  }
<span class="lineNumber">7</span>}
<span class="lineNumber">8</span><span class="hljs-comment">// ç®€åŒ–</span>
<span class="lineNumber">9</span><span class="hljs-keyword">const</span> curry = <span class="hljs-function"><span class="hljs-params">binaryFn</span> =></span> <span class="hljs-function"><span class="hljs-params">firstArg</span> =></span> <span class="hljs-function"><span class="hljs-params">secondArg</span> =></span> binaryFn(firstArg, secondArg)</code></pre> 

<p>å®Œç¾åˆ©ç”¨äº†é—­åŒ…çš„ç‰¹æ€§,ä¹Ÿè®¸å¯¹äºä¸€äº›æ·±è°™æ­¤é“çš„ coder è€Œè¨€,è¿™ä¸ç®—ä»€ä¹ˆ.ä½†æ˜¯å¯¹äºæ­¤åˆ»çš„æˆ‘æ¥è¯´,ä»æœªå¦‚æ­¤æ¸…æ™°ä½“ä¼šåˆ°é—­åŒ…å’Œ currying.å¦‚æ­¤ä¹‹ç¾.</p>
<p>å¼€å‘è€…ç¼–å†™ä»£ç çš„æ—¶å€™ä¼šåœ¨åº”ç”¨ä¸­ç¼–å†™æ—¥å¿—,ä¸‹é¢æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª<code>æ—¥å¿—å‡½æ•°</code>.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> loggerHelper = <span class="hljs-function">(<span class="hljs-params">mode, msg, errorMsg, lineNo</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">mode === <span class="hljs-string">'DEBUG'</span></span>)</span> {
<span class="lineNumber">3</span>    <span class="hljs-built_in">console</span>.debug(msg, errorMsg + <span class="hljs-string">'at line:'</span> + lineNo)
<span class="lineNumber">4</span>  } <span class="hljs-keyword">else</span> <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">mode === <span class="hljs-string">'WARN'</span></span>)</span> {
<span class="lineNumber">5</span>    <span class="hljs-built_in">console</span>.warn(msg, errorMsg + <span class="hljs-string">'at line:'</span> + lineNo)
<span class="lineNumber">6</span>  } <span class="hljs-keyword">else</span> <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">mode === <span class="hljs-string">'ERROR'</span></span>)</span> {
<span class="lineNumber">7</span>    <span class="hljs-built_in">console</span>.error(msg, errorMsg + <span class="hljs-string">'at line:'</span> + lineNo)
<span class="lineNumber">8</span>  } <span class="hljs-keyword">else</span> {
<span class="lineNumber">9</span>    <span class="hljs-keyword">throw</span> <span class="hljs-string">"WRONG MODE"</span>
<span class="lineNumber">10</span>  }
<span class="lineNumber">11</span>}</code></pre> 

<p>ä¸Šè¿°ä»£ç ä¸æ˜¯è‰¯å¥½çš„è®¾è®¡,å¤šæ¬¡é‡ç”¨äº†éƒ¨åˆ†ä»£ç ,è®©æ•´ä½“ä¸å¤Ÿç®€æ´.ä¹‹å‰åˆ›å»ºçš„<code>curry</code>å‡½æ•°ä¹Ÿæ— æ³•å¤„ç†è¿™ä¸ªæ—¥å¿—å‡½æ•°.æˆ‘ä»¬éœ€è¦<strong>æ›´è¿›ä¸€æ­¥</strong>.æˆ‘ä»¬éœ€è¦æŠŠå¤šå‚æ•°å‡½æ•°è½¬åŒ–ä¸º<code>unary function</code>.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> curry = <span class="hljs-function">(<span class="hljs-params">fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> fn !== <span class="hljs-string">'function'</span>) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'No function provided'</span>)
<span class="lineNumber">3</span>  <span class="hljs-comment">// args æ˜¯å¯å˜å‚æ•°</span>
<span class="lineNumber">4</span>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">curryFn</span>(<span class="hljs-params">...args</span>) </span>{
<span class="lineNumber">5</span>    <span class="hljs-comment">// å¦‚æœå¯å˜å‚æ•°å°‘äºè¢«æŸ¯é‡ŒåŒ–çš„å‡½æ•°çš„å‚æ•°æ•°é‡</span>
<span class="lineNumber">6</span>    <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">args.length &#x3C; fn.length</span>)</span> {
<span class="lineNumber">7</span>      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="lineNumber">8</span>        <span class="hljs-comment">// æ‰§è¡Œæ­¤å‡½æ•°,è¿”å›ä¸€ä¸ªå¤„ç†ä¸€æ¬¡å‚æ•°çš„å‡½æ•°</span>
<span class="lineNumber">9</span>        <span class="hljs-keyword">return</span> curryFn.apply(<span class="hljs-literal">null</span>, args.concat(
<span class="lineNumber">10</span>        	<span class="hljs-built_in">Array</span>.slice.call(<span class="hljs-built_in">arguments</span>)
<span class="lineNumber">11</span>        ))
<span class="lineNumber">12</span>      }
<span class="lineNumber">13</span>    }
<span class="lineNumber">14</span>    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-literal">null</span>, args)
<span class="lineNumber">15</span>}</code></pre> 

<blockquote>
<p><code>arguments</code>å¯¹è±¡æ˜¯æ‰€æœ‰ï¼ˆéç®­å¤´ï¼‰å‡½æ•°ä¸­éƒ½å¯ç”¨çš„<strong>å±€éƒ¨å˜é‡</strong>ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>arguments</code>å¯¹è±¡åœ¨å‡½æ•°ä¸­å¼•ç”¨å‡½æ•°çš„å‚æ•°ã€‚æ­¤å¯¹è±¡åŒ…å«ä¼ é€’ç»™å‡½æ•°çš„æ¯ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°åœ¨ç´¢å¼•0å¤„ã€‚</p>
</blockquote>
<p>å›åˆ°<code>æ—¥å¿—å‡½æ•°</code>:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> errorDebugLog = curry(loggerHelper)(<span class="hljs-string">'ERROR'</span>)(<span class="hljs-string">'ERROR:'</span>)
<span class="lineNumber">2</span><span class="hljs-keyword">const</span> warnDebugLog = curry(loggerHelper)(<span class="hljs-string">'WARN'</span>)(<span class="hljs-string">'WARN:'</span>)
<span class="lineNumber">3</span>errorDebugLog(<span class="hljs-string">'balabala..'</span>, <span class="hljs-number">21</span>) <span class="hljs-comment">// output: 'ERROR: balabala at line 21'</span></code></pre> 

<p>è¿™å°±æ˜¯é—­åŒ…çš„é­…åŠ›,åœ¨é¦–æ¬¡ä¼ å…¥<code>loggerHelper</code>çš„æ—¶å€™,é—­åŒ…ç”Ÿæˆäº†å¯è®¿é—®å˜é‡ä½œç”¨åŸŸ,è®°ä½äº†å‡½æ•°ä¿¡æ¯.</p>
<p>ç°åœ¨,è®©æˆ‘ä»¬æ¥è§£å†³ä¸¤ä¸ªé—®é¢˜:</p>
<ul>
<li>åœ¨æ•°ç»„å†…å®¹ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ•°å­—</li>
<li>æ±‚æ•°ç»„çš„å¹³æ–¹</li>
</ul>
<p>é¦–å…ˆ,åˆ›å»ºä¸€ä¸ªæ£€æŸ¥å‡½æ•°:<code>findNumberInArr</code></p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> match = curry(<span class="hljs-function">(<span class="hljs-params">expr, str</span>) =></span> str.match(expr))
<span class="lineNumber">2</span><span class="hljs-keyword">const</span> hasNumber = curry(match(<span class="hljs-regexp">/[0-9]+/</span>))
<span class="lineNumber">3</span><span class="hljs-keyword">const</span> filter = curry(<span class="hljs-function">(<span class="hljs-params">fn, arr</span>) =></span> arr.filter(fn))
<span class="lineNumber">4</span><span class="hljs-comment">// create fn</span>
<span class="lineNumber">5</span><span class="hljs-keyword">const</span> findNumberInArr = filter(hasNumber)
<span class="lineNumber">6</span><span class="hljs-comment">// test</span>
<span class="lineNumber">7</span>findNumberInArr([<span class="hljs-string">'demo'</span>, <span class="hljs-string">'demo1'</span>]) <span class="hljs-comment">// output: ['demo1']</span></code></pre> 

<p>ç°åœ¨æ±‚æ•°ç»„çš„å¹³æ–¹,æˆ‘ä»¬é€šè¿‡<code>curry</code>å‡½æ•°è¿›è¡Œå¤„ç†,è¿™æ¬¡ä¸è¦ç›´æ¥é€šè¿‡<code>map</code>å‡½æ•°ä¼ å…¥ä¸€ä¸ªå¹³æ–¹å‡½æ•°è§£å†³è¿™ä¸ªé—®é¢˜.æ¢ä¸€ä¸ªè§†è§’.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> map = curry(<span class="hljs-function">(<span class="hljs-params">fn, arr</span>) =></span> arr.map(f))
<span class="lineNumber">2</span><span class="hljs-keyword">const</span> squareAll = map(<span class="hljs-function"><span class="hljs-params">x</span> =></span> x*x)
<span class="lineNumber">3</span><span class="hljs-comment">// ç°åœ¨,squareAll æ˜¯ä¸€ä¸ªunary å‡½æ•°</span>
<span class="lineNumber">4</span>squareAll([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]) <span class="hljs-comment">// output: [1, 4, 9]</span></code></pre> 

<p>æˆ‘ä»¬å¯ä»¥å¾ˆå¤šåœ°æ–¹ç›´æ¥ä½¿ç”¨<code>squareAll</code>å‡½æ•°äº†.å¦‚æœéœ€è¦åœ¨å¤šä¸ªåœ°æ–¹æ±‚æ•°ç»„çš„å¹³æ–¹,è¿™ä¸ªå‡½æ•°å¯ä»¥ç®€åŒ–é™ä½ä»£ç é‡,å½“ç„¶,æˆ‘ä»¬è¿˜å¯ä»¥é…åˆ<code>memoized</code>å‡½æ•°è¿›è¡Œç¼“å­˜å¤„ç†!</p>
<p>æ˜¯æ—¶å€™è°ˆè°ˆ<code>ååº”ç”¨</code>äº†,æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<code>partial</code>å‡½æ•°ä»¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜.</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯,æˆ‘ä»¬éœ€è¦åœ¨ 10 ç§’åæ‰§è¡Œä¸€ä¸ªå‡½æ•°,è¿™ä¸ªéœ€æ±‚åœ¨å¤šä¸ªåœ°æ–¹ç”¨å¾—ä¸Š,ä¹Ÿè®¸æˆ‘ä»¬ä¼šç›´æ¥å¦‚æ­¤ç¼–ç¨‹:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> {
<span class="lineNumber">2</span>  <span class="hljs-comment">// some code</span>
<span class="lineNumber">3</span>}, <span class="hljs-number">10000</span>)</code></pre> 

<p>ä¸€æ—¦éœ€è¦åœ¨å¦ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨è¿™ä¸ªé€»è¾‘,å°±éœ€è¦é‡å†™ä¸€éè¿™äº›ä»£ç .è€Œä¸”æ— æ³•ä½¿ç”¨<code>curry</code>å‡½æ•°è¿›è¡Œå¤„ç†,å› ä¸ºæ—¶é—´å‚æ•°æ˜¯æœ€åä¸€ä¸ªå‚æ•°.è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆä¹‹ä¸€å°±æ˜¯åˆ›å»ºä¸€ä¸ªå°è£…å‡½æ•°:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> setTimeoutWrapper = <span class="hljs-function">(<span class="hljs-params">time, fn</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-built_in">setTimeout</span>(fn, time)
<span class="lineNumber">3</span>}</code></pre> 

<p>ç„¶åä½¿ç”¨<code>curry</code>å‡½æ•°è¿›è¡Œä¼˜åŒ–.ç„¶è€Œ,æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å‡å°‘åˆ›å»ºæ­¤ç±»å‡½æ•°çš„å¼€é”€.</p>
<p><strong>è¿™å°±æ˜¯ååº”ç”¨</strong>çš„åº”ç”¨åœºæ™¯.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">var</span> partial = <span class="hljs-function">(<span class="hljs-params">fn, ...partialArgs</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> args = partialArgs
<span class="lineNumber">3</span>  <span class="hljs-keyword">return</span> (...fullArguments) {
<span class="lineNumber">4</span>    <span class="hljs-keyword">let</span> arg = <span class="hljs-number">0</span>
<span class="lineNumber">5</span>    <span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&#x3C;args.length &#x26;&#x26; arg &#x3C; fullArguments.length;i++</span>)</span> {
<span class="lineNumber">6</span>      <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">args[i] === <span class="hljs-literal">undefined</span></span>)</span> {
<span class="lineNumber">7</span>        args[i] = fullArguments[arg++]
<span class="lineNumber">8</span>      }
<span class="lineNumber">9</span>    }
<span class="lineNumber">10</span>    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-literal">null</span>, args)
<span class="lineNumber">11</span>  }
<span class="lineNumber">12</span>}
<span class="lineNumber">13</span> 
<span class="lineNumber">14</span><span class="hljs-keyword">const</span> delayTenMs = partial(<span class="hljs-built_in">setTimeout</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-number">10</span>)
<span class="lineNumber">15</span><span class="hljs-keyword">const</span> demoFn = <span class="hljs-function">() =></span> {
<span class="lineNumber">16</span>  <span class="hljs-comment">// sdasdsadad</span>
<span class="lineNumber">17</span>}
<span class="lineNumber">18</span>delayTenMs(demoFn)</code></pre> 

<p>å†æ¬¡ä½¿ç”¨äº†é—­åŒ…,è®°ä½äº†<code>setTimeout</code>éœ€è¦çš„å‚æ•°åˆ—è¡¨é•¿åº¦,æš‚æœªæä¾›çš„å‚æ•°ç”¨ undefined ä»£æ›¿.åç»­è¿”å›ä¸€ä¸ªå‡½æ•°,æä¾›å‚æ•°çš„åŒæ—¶,è¡¥å…¨ä¹‹å‰ç”¨ undefined ä»£æ›¿çš„éƒ¨åˆ†å‚æ•°,æœ€ç»ˆæ‰§è¡Œå‡½æ•°.</p>
<p>ä¾‹å¦‚,æˆ‘ä»¬éœ€è¦ç¾åŒ–ä¸€ä¸ª<code>json</code>å¯¹è±¡çš„è¾“å‡º.å…ˆçœ‹çœ‹ json stringify å‡½æ•°çš„å®šä¹‰.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-built_in">JSON</span>.stringify(value[, replacer [, space]])</code></pre> 

<p><strong>å‚æ•°</strong></p>
<ul>
<li>
<p><code>value</code></p>
<p>å°†è¦åºåˆ—åŒ–æˆ ä¸€ä¸ª JSON å­—ç¬¦ä¸²çš„å€¼ã€‚</p>
</li>
<li>
<p><code>replacer</code> å¯é€‰</p>
<p>å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œè¢«åºåˆ—åŒ–çš„å€¼çš„æ¯ä¸ªå±æ€§éƒ½ä¼šç»è¿‡è¯¥å‡½æ•°çš„è½¬æ¢å’Œå¤„ç†ï¼›å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™åªæœ‰åŒ…å«åœ¨è¿™ä¸ªæ•°ç»„ä¸­çš„å±æ€§åæ‰ä¼šè¢«åºåˆ—åŒ–åˆ°æœ€ç»ˆçš„ JSON å­—ç¬¦ä¸²ä¸­ï¼›å¦‚æœè¯¥å‚æ•°ä¸º null æˆ–è€…æœªæä¾›ï¼Œåˆ™å¯¹è±¡æ‰€æœ‰çš„å±æ€§éƒ½ä¼šè¢«åºåˆ—åŒ–ã€‚</p>
</li>
<li>
<p><code>space</code> å¯é€‰</p>
<p>æŒ‡å®šç¼©è¿›ç”¨çš„ç©ºç™½å­—ç¬¦ä¸²ï¼Œç”¨äºç¾åŒ–è¾“å‡ºï¼ˆpretty-printï¼‰ï¼›å¦‚æœå‚æ•°æ˜¯ä¸ªæ•°å­—ï¼Œå®ƒä»£è¡¨æœ‰å¤šå°‘çš„ç©ºæ ¼ï¼›ä¸Šé™ä¸º10ã€‚è¯¥å€¼è‹¥å°äº1ï¼Œåˆ™æ„å‘³ç€æ²¡æœ‰ç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼ˆå½“å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡10ä¸ªå­—æ¯ï¼Œå–å…¶å‰10ä¸ªå­—æ¯ï¼‰ï¼Œè¯¥å­—ç¬¦ä¸²å°†è¢«ä½œä¸ºç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°æ²¡æœ‰æä¾›ï¼ˆæˆ–è€…ä¸º nullï¼‰ï¼Œå°†æ²¡æœ‰ç©ºæ ¼ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> obj = {<span class="hljs-attr">foo</span>: <span class="hljs-string">"bar"</span>, <span class="hljs-attr">bar</span>: <span class="hljs-string">"foo"</span>}
<span class="lineNumber">2</span><span class="hljs-comment">// ç¬¬äºŒå‚æ•°</span>
<span class="lineNumber">3</span><span class="hljs-built_in">JSON</span>.stringify(obj, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)
<span class="lineNumber">4</span><span class="hljs-comment">// æƒ³åŠæ³•ç§»é™¤æ ·æ¿ä»£ç  null å’Œ 2</span>
<span class="lineNumber">5</span><span class="hljs-keyword">const</span> prettyJson = partial(<span class="hljs-built_in">JSON</span>.stringify, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)
<span class="lineNumber">6</span>prettyJson(obj)</code></pre> 

<p>å•Š!<code>partial</code>å‡½æ•°æœ‰ bug.<code>partialArgs</code>ä¼ é€’çš„æ˜¯æ•°ç»„,æ•°ç»„ä¼ é€’çš„æ˜¯å¼•ç”¨.å¦‚æœä¸åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„,å¹¶ä¸”åœ¨æœ€åé‡ç½®æ•°ç»„çš„è¯,æ‰§è¡Œä¸€æ¬¡<code>partial</code>åŒ–åçš„å‡½æ•°<code>delayTenMs</code>,å†…éƒ¨ args å°±å›ºå®šäº†,é—­åŒ…å˜é‡ä¿å­˜äº†é¦–æ¬¡æ‰§è¡Œçš„æ—¶å€™æä¾›çš„å‚æ•°å»æ›¿æ¢<code>undefined</code>,è¿™é‡Œçš„<code>undefined</code>å°±åƒå ä½ç¬¦.</p>
<p>ä¹¦ä¸Šå¹¶æ²¡æœ‰ç»™å‡ºä¸€ä¸ªç¤ºä¾‹ä»£ç æ¥è§£å†³é—®é¢˜,åªæ˜¯æå‡ºå­˜åœ¨ bug çš„è§‚ç‚¹,æˆ‘å†™ä¸‹äº†å¦‚ä¸‹ä»£ç ,ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦é‡ç½®å ä½ç¬¦æ•ˆæœçš„<code>undefined</code>å˜é‡.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> partial = <span class="hljs-function">(<span class="hljs-params">fn, ...partialArgs</span>) =></span> {  
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> args = [...partialArgs]
<span class="lineNumber">3</span>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...fullArgs</span>) =></span> {
<span class="lineNumber">4</span>    <span class="hljs-keyword">let</span> argIndex = <span class="hljs-number">0</span>
<span class="lineNumber">5</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &#x3C; args.length &#x26;&#x26; argIndex &#x3C; fullArgs.length; index++) {
<span class="lineNumber">6</span>      <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params">args[index] === <span class="hljs-literal">undefined</span></span>)</span> {
<span class="lineNumber">7</span>        args[index] = fullArgs[argIndex++]
<span class="lineNumber">8</span>      }
<span class="lineNumber">9</span>    }
<span class="lineNumber">10</span>    <span class="hljs-keyword">const</span> result = fn.apply(<span class="hljs-literal">null</span>, args)
<span class="lineNumber">11</span>    args = [...partialArgs]
<span class="lineNumber">12</span>    <span class="hljs-keyword">return</span> result
<span class="lineNumber">13</span>  }
<span class="lineNumber">14</span>}</code></pre> 

<p>æ™šå®‰.</p>
<p>2020å¹´12æœˆ21æ—¥01:41:11</p>
<h1>ç®¡é“å’Œç»„åˆ</h1>
<p>å‡½æ•°å¼ç»„åˆåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­è¢«ç§°ä¸º<code>ç»„åˆ composition</code>.</p>
<blockquote>
<p>æ¯ä¸ªç¨‹åºåªä¸ºåšå¥½ä¸€ä»¶äº‹,é‡æ„è¦æ¯”åœ¨æ—§çš„å¤æ‚ç¨‹åºä¸­æ·»åŠ æ–°å±æ€§æ›´å¥½. From KenÂ·Thompson</p>
</blockquote>
<blockquote>
<p>æ¯ä¸€ä¸ªç¨‹åºçš„è¾“å‡ºåº”è¯¥æ˜¯å¦ä¸€ä¸ªæœªçŸ¥ç¨‹åºçš„è¾“å…¥.</p>
</blockquote>
<p>æˆ‘ä»¬å°†è¦åˆ›å»º<code>compose</code>å‡½æ•°,ä¾‹å¦‚:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> compose = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =></span> <span class="hljs-function"><span class="hljs-params">c</span> =></span> a(b(c))</code></pre> 

<p>ä¾ç„¶æ˜¯ç†Ÿæ‚‰çš„é«˜é˜¶å‡½æ•°,æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°,è¿”å›å‡½æ•°.è¿”å›çš„å‡½æ•°çš„<code>å‚æ•°</code>æ˜¯å…³é”®.</p>
<p><code>compose</code>å‡½æ•°èƒ½è§£å†³æˆ‘ä»¬å¸¸è§çš„ä¸€äº›é—®é¢˜.ä½ æ˜¯å¦å†™è¿‡ç±»ä¼¼å¦‚ä¸‹ä»£ç :</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> data = someFn(<span class="hljs-string">'this'</span>)
<span class="lineNumber">2</span><span class="hljs-keyword">const</span> result = otherFn(data)</code></pre> 

<p>ä¸€ä¸ªå‡½æ•°çš„è¾“å‡º,ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥.<code>compose</code>å‡½æ•°ä¸ºæ­¤è€Œç”Ÿ.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> getResult = compose(otherFn, someFn)</code></pre> 

<p><code>getResult</code>æ˜¯ä¸€ä¸ªå‡½æ•°,æ¥æ”¶çš„å‚æ•°è·Ÿ<code>someFn</code>å‡½æ•°ä¸€è‡´.æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°<code>getResult</code>.è¿™æ˜¯ä¸€ç§ä¼˜é›…è€Œç®€å•çš„å®ç°æ–¹å¼.</p>
<p>ä¸Šè¿°<code>someFn</code>åªæ¥æ”¶ä¸€ä¸ªå‚æ•°,å¦‚æœéœ€è¦æ¥æ”¶å¤šä¸ªå‚æ•°çš„è¯,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>curry</code>å’Œ<code>partial</code>ä¸¤ä¸ªå‡½æ•°è¿›è¡Œä¼˜åŒ–.</p>
<blockquote>
<p>ç»„åˆçš„æ€æƒ³å°±æ˜¯æŠŠå°å‡½æ•°ç»„åˆæˆå¤§å‡½æ•°,ç®€å•çš„å‡½æ•°æ˜“äºé˜…è¯»,æµ‹è¯•å’Œç»´æŠ¤.</p>
</blockquote>
<p>åˆ›å»ºå°çš„å‡½æ•°å•å…ƒ,å¯ä»¥é€šè¿‡ compose ç»„åˆé‡å»ºåº”å¯¹å„ç§éœ€æ±‚.</p>
<p>ä½†æ˜¯,ä¸Šè¿°<code>compose</code>å‡½æ•°æ— æ³•å¤„ç†æ›´å¤šå‡½æ•°ä½œä¸ºå‚æ•°.ä»…ä»…æ”¯æŒä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°æ˜¯ä¸å¤Ÿçš„,è®©æˆ‘ä»¬æ¥ä¼˜åŒ–ä¸€ä¸‹.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> compose = <span class="hljs-function">(<span class="hljs-params">...fns</span>) =></span> <span class="hljs-function">(<span class="hljs-params">value</span>) =></span> reduce(fns.reverse(), <span class="hljs-function">(<span class="hljs-params">acc, fn</span>) =></span> fn(acc), value)</code></pre> 

<p>ç«Ÿç„¶å¦‚æ­¤ç®€å•æ¡¥é¢,æ¥æ”¶ä¸€ä¸ªå…¥å£å‚æ•°<code>value</code>,é¦–å…ˆè®¾ç½®ä¸ºåˆå§‹çš„<code>acc</code>å€¼,ä¾æ¬¡æ‰§è¡Œå¹¶ä¸”è¿”å›ä½œä¸ºä¸‹ä¸€ä¸ªå‡½æ•°çš„å…¥å£.</p>
<p>ç»„åˆæ˜¯ä»å³åˆ°å·¦æ‰§è¡Œçš„,è€Œç®¡é“åˆ™ä»å·¦åˆ°å³.æ¥ä¸‹æ¥åˆ›å»º<code>pipe</code>ç®¡é“å‡½æ•°.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> pipe = <span class="hljs-function">(<span class="hljs-params">...fns</span>) =></span> <span class="hljs-function"><span class="hljs-params">value</span> =></span> reduce(fns, <span class="hljs-function">(<span class="hljs-params">acc,fn</span>) =></span> fn(acc), value)</code></pre> 

<p>åªæ˜¯æ‰§è¡Œæ–¹å‘ä¸åŒè€Œå·²,å› æ­¤å‚æ•°åˆ—è¡¨ä¸å¿…åå‘.</p>
<blockquote>
<p>åœ¨å…¬å…±ä»£ç åº“ä¸­å»ºè®®ä½¿ç”¨å•ä¸€çš„æ•°æ®æµ,æˆ‘æ›´å–œæ¬¢ç®¡é“,å› ä¸ºè¿™è®©æˆ‘æƒ³èµ· shell çŸ¥è¯†.åŒæ—¶ä½¿ç”¨ç®¡é“å’Œç»„åˆå®¹æ˜“åœ¨å›¢é˜Ÿä¸­å¼•èµ·æ··æ·†.</p>
</blockquote>
<p>æ¥ä¸‹æ¥,æœ¬ä¹¦æè¿°äº†<strong>ç»„åˆ</strong>çš„ä¼˜åŠ¿.</p>
<p>ç»„åˆæ”¯æŒç»“åˆå¾‹.ä¹¦ä¸Šå¹¶æ²¡æœ‰è¯¦ç»†çš„ä»‹ç»å’Œæ¡ˆä¾‹åˆ†æ.åªæ˜¯å•çº¯ä¸¾ä¾‹:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>compose(f, compose(g, h)) == compose(compose(f,g), h)</code></pre> 

<p>é€šè¿‡ç»„åˆå°å‡½æ•°çš„æ–¹å¼,è®©å‡½æ•°çš„ç»„åˆæ›´åŠ çµæ´».</p>
<p>ä¸‹é¢,æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ª<code>identity</code>å‡½æ•°,ç”¨äºåˆ†æè°ƒè¯•.æ¥æ”¶ä¸€ä¸ªå‚æ•°,æ‰“å°å¹¶ä¸”è¿”å›.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> identity = <span class="hljs-function"><span class="hljs-params">it</span> =></span> {
<span class="lineNumber">2</span>  <span class="hljs-built_in">console</span>.log(it)
<span class="lineNumber">3</span>  <span class="hljs-keyword">return</span> it
<span class="lineNumber">4</span>}</code></pre> 

<p>ç”±äºç»„åˆå’Œç®¡é“æ•°æ®æ˜¯æµåŠ¨çš„å…³ç³»,å¯ä»¥åœ¨å…¶é—´æ’å…¥<code>identity</code>å‡½æ•°,è¾“å‡ºæ•°æ®ç”¨äºè°ƒè¯•.è¿™ç¡®å®éå¸¸ç®€å•æœ‰æ•ˆ.</p>
<h1>å‡½å­</h1>
<p>æœ¬ç« æœ€é‡è¦çš„å†…å®¹å°±æ˜¯<code>ç¼–ç¨‹é”™è¯¯å¤„ç†</code>.æˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸ªæ–°çš„æ¦‚å¿µ:<code>functor:å‡½å­</code>,å®ƒå°†ä»¥çº¯å‡½æ•°çš„å½¢å¼å¸®æˆ‘ä»¬å¤„ç†é”™è¯¯.</p>
<blockquote>
<p>å‡½å­æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡,å®ƒå®ç°äº†<code>map</code>å‡½æ•°,åœ¨éå†æ¯ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡.</p>
</blockquote>
<p>å‡½å­æ˜¯<code>å®¹å™¨</code>,å…¶æŒæœ‰å€¼.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> Container = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-built_in">this</span>.value = val
<span class="lineNumber">3</span>}</code></pre> 

<blockquote>
<p>ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°,ç®­å¤´å‡½æ•°æ²¡æœ‰<code>[[construct]]</code>å’Œ<code>prototype</code>å±æ€§,æ— æ³•ç”¨<code>new</code>å®ä¾‹åŒ–.</p>
</blockquote>
<p>ç°åœ¨,<code>container</code>å¯ä»¥æŒæœ‰ä¼ ç»™å®ƒçš„ä»»ä½•å€¼.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">let</span> a = <span class="hljs-keyword">new</span> Container(<span class="hljs-number">3</span>)
<span class="lineNumber">2</span>=> Container(value: <span class="hljs-number">3</span>)
<span class="lineNumber">3</span><span class="hljs-keyword">let</span> bObj = <span class="hljs-keyword">new</span> Container({<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>})
<span class="lineNumber">4</span>=> Container({<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>})</code></pre> 

<p>ç»§ç»­,åˆ›å»ºä¸€ä¸ª<code>of</code>é™æ€æ–¹æ³•.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>Container.of = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Container(value)
<span class="lineNumber">3</span>}</code></pre> 

<p>äºæ˜¯,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>static</code>å‡½æ•°åˆ›å»ºå¯¹è±¡äº†.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> testObj = Container.of(<span class="hljs-number">3</span>)
<span class="lineNumber">2</span>=> Container(value:<span class="hljs-number">3</span>)</code></pre> 

<p>æ¥ä¸‹æ¥,æˆ‘ä»¬éœ€è¦åˆ›å»º<code>map</code>å‡½æ•°,ä¹‹åè¿™ä¾¿æ˜¯ä¸€ä¸ª<code>å‡½å­</code>.</p>
<p><img src="https://i.loli.net/2020/12/24/vX1AIKxhgOlQzMd.png" alt=""></p>
<p>çœ‹ä»£ç :</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>Container.prototype.map = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-keyword">return</span> Container.of(fn(<span class="hljs-built_in">this</span>.value))
<span class="lineNumber">3</span>}</code></pre> 

<p>ç»è¿‡<code>map</code>å‡½æ•°å¤„ç†,ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ container å¯¹è±¡.äºæ˜¯,æˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹ç¼–ç :</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">let</span> double = <span class="hljs-function"><span class="hljs-params">x</span> =></span> x + x
<span class="lineNumber">2</span>Container.of(<span class="hljs-number">3</span>).map(double)
<span class="lineNumber">3</span>=> Container(<span class="hljs-number">6</span>)
<span class="lineNumber">4</span>Container.of(<span class="hljs-number">3</span>).map(double).map(double)
<span class="lineNumber">5</span>=> Container(<span class="hljs-number">12</span>)</code></pre> 

<p>å¾—åˆ°äº†æˆ‘ä¸ªäººä¸€ç›´ä»¥æ¥ä¸å¤Ÿäº†è§£çš„é“¾å¼è°ƒç”¨çš„å®ç°æ€è·¯.</p>
<blockquote>
<p>å‡½å­æ˜¯ä¸€ä¸ªå®ç°äº† map å¥‘çº¦çš„å¯¹è±¡</p>
</blockquote>
<p>æ‰€ä»¥,å‡½å­èƒ½ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹?</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> MayBe = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-built_in">this</span>.value = val
<span class="lineNumber">3</span>}
<span class="lineNumber">4</span>MayBe.of = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
<span class="lineNumber">5</span>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MayBe(v)
<span class="lineNumber">6</span>}
<span class="lineNumber">7</span>MayBe.prototype.isNothing = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="lineNumber">8</span>  <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.value === <span class="hljs-literal">null</span> || <span class="hljs-built_in">this</span>.value === <span class="hljs-literal">undefined</span>) 
<span class="lineNumber">9</span>}
<span class="lineNumber">10</span>MayBe.prototype.map = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{
<span class="lineNumber">11</span>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.isNothing() ? MayBe.of(<span class="hljs-literal">null</span>) : MayBe.of(<span class="hljs-built_in">this</span>.value)
<span class="lineNumber">12</span>}</code></pre> 

<p>:construction_worker:</p>
<p>ä¸Šç”¨ä¾‹</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>MayBe.of(<span class="hljs-string">'string'</span>).map(<span class="hljs-function"><span class="hljs-params">x</span> =></span> x.toUpperCase())
<span class="lineNumber">2</span>=> MayBe {<span class="hljs-attr">value</span>: <span class="hljs-string">'STRING'</span>}</code></pre> 

<p>å³ä½¿ä¸æ˜¯<code>typescript</code>,æ— æ³•é¿å…<code>of</code>æ–¹æ³•ä¼ å…¥<code>null</code>æˆ–è€…<code>undefined</code>,å†…éƒ¨çš„<code>map</code>æ–¹æ³•ä¹Ÿä¼šåšä¸€æ¬¡æ£€æŸ¥,é€»è¾‘æŠ½è±¡å‡ºæ¥é¿å…äº†é”™è¯¯.ä»£ç æ²¡æœ‰åœ¨<code>null</code>æˆ–è€…<code>undefined</code>ä¸‹å´©æºƒ.è¿™æ˜¯ä¸€ç§å£°æ˜å¼çš„æ–¹å¼å»ç¼–ç¨‹,è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå®‰å…¨çš„å®¹å™¨.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>MayBe.of(<span class="hljs-string">'pg'</span>)
<span class="lineNumber">2</span>	.map(<span class="hljs-function"><span class="hljs-params">x</span> =></span> x.toUpperCase())
<span class="lineNumber">3</span>	.map(<span class="hljs-function"><span class="hljs-params">x</span> =></span> <span class="hljs-string">`Mr. <span class="hljs-subst">${x}</span>`</span>)</code></pre> 

<p>é“¾å¼è°ƒç”¨,ä¼˜ç¾ç®€æ´.</p>
<p><strong>å¦ä¸€ä¸ªå‡½å­</strong><code>Either</code>,ä¸Šè¿°<code>MayBe</code>å‡½å­åœ¨ä¼ å…¥<code>null</code>æˆ–è€…<code>undefined</code>å,æœ€åçš„ç»“æœæ˜¯<code>null</code>.å¯æ˜¯æˆ‘ä»¬å¾ˆéš¾åˆ†æå‡ºé—®é¢˜å‡ºåœ¨å“ªé‡Œ.æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´å¼ºå¤§çš„å‡½å­,è§£å†³åˆ†æ”¯æ‹“å±•çš„é—®é¢˜.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> Nothing = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-built_in">this</span>.value = val
<span class="lineNumber">3</span>}
<span class="lineNumber">4</span>Nothing.of = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
<span class="lineNumber">5</span>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Nothing(v)
<span class="lineNumber">6</span>}
<span class="lineNumber">7</span>Nothing.prototype.map = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>) </span>{
<span class="lineNumber">8</span>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
<span class="lineNumber">9</span>}
<span class="lineNumber">10</span><span class="hljs-keyword">const</span> Some = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
<span class="lineNumber">11</span>  <span class="hljs-built_in">this</span>.value = val
<span class="lineNumber">12</span>}
<span class="lineNumber">13</span>Some.of = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
<span class="lineNumber">14</span>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Some(v)
<span class="lineNumber">15</span>}
<span class="lineNumber">16</span>Some.prototype.map = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>) </span>{
<span class="lineNumber">17</span>  <span class="hljs-keyword">return</span> Some.of(f(<span class="hljs-built_in">this</span>.value))
<span class="lineNumber">18</span>}</code></pre> 

<p><code>Nothing</code>çš„ map å‡½æ•°,è¿”å›è‡ªèº«,è€Œä¸æ˜¯è¿è¡Œå‡½æ•°<code>f</code>.</p>
<p>2020å¹´12æœˆ25æ—¥12:57:10	:100:</p>
<p>èƒ½åœ¨<code>Some</code>ä¸Šè¿è¡Œå‡½æ•°,è€Œ<code>Nothing</code>ä¸è¡Œ.æ¥å§,å®ç°<code>Either</code>.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> Either = {
<span class="lineNumber">2</span>  Some,
<span class="lineNumber">3</span>  Nothing
<span class="lineNumber">4</span>}</code></pre> 

<p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª<code>web</code>è¯·æ±‚,è¿”å›æ•°æ®å¯èƒ½æ˜¯æ­£å¸¸æ•°æ®,æˆ–è€…ä¸€æ¡é”™è¯¯ä¿¡æ¯.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> getData =<span class="hljs-function">(<span class="hljs-params">type</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> resp;
<span class="lineNumber">3</span>  <span class="hljs-keyword">try</span> {
<span class="lineNumber">4</span>    resp = Some.of(data)
<span class="lineNumber">5</span>  } <span class="hljs-keyword">catch</span> {
<span class="lineNumber">6</span>    resp = Nothing.of(error)
<span class="lineNumber">7</span>  }
<span class="lineNumber">8</span>}</code></pre> 

<p>åç»­è¿”å›çš„ response å¯¹è±¡ä¾ç„¶æ˜¯å‡½å­,å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨çš„ map å‡½æ•°.ä½†æ˜¯,é”™è¯¯ä¿¡æ¯èƒ½ä¿å­˜ä¸‹å»,<code>Nothing</code>ä»å¤´åˆ°å°¾éƒ½ä¸ä¼šå˜,ç›´æ¥è¿”å›<code>this</code>ä½¿å¾—åç»­çš„ map å‡½æ•°<code>å¤±æ•ˆ</code>.</p>
<p>ç°åœ¨,ä½ æ ¹æ®ä¸Šä¸‹æ–‡,å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºå¼‚å¸¸å‡ºåœ¨å“ªé‡Œ.æ˜¯çš„,æ˜¯<code>catch</code>åˆ°äº†é”™è¯¯.</p>
<p>ä¸Šè¿°å‡½å­éƒ½æ˜¯<code>pointed</code>å‡½å­,ES6 çš„ Array.of ä¹Ÿæ˜¯<code>pointed</code>å‡½å­.</p>
<h1>æ·±å…¥ç†è§£ Monad å‡½å­</h1>
<p><code>reddit</code>å¼€æ”¾äº†ä¸€äº›<code>api</code>æ¥å£,ä¾‹å¦‚:<strong>https://www.reddit.com/search.json?q=something</strong></p>
<p>ç²˜è´´ä¸€ä¸ªéšæœºçš„è¿”å›æ•°æ®,ä¸å¿…è¯¦ç»†æ·±ç©¶:</p>
<pre><code class="hljs language-json"><span class="lineNumber">1</span>{
<span class="lineNumber">2</span>  <span class="hljs-attr">"kind"</span>: <span class="hljs-string">"Listing"</span>,
<span class="lineNumber">3</span>  <span class="hljs-attr">"data"</span>: {
<span class="lineNumber">4</span>    <span class="hljs-attr">"after"</span>: <span class="hljs-string">"t3_k1qcrx"</span>,
<span class="lineNumber">5</span>    <span class="hljs-attr">"dist"</span>: <span class="hljs-number">25</span>,
<span class="lineNumber">6</span>    <span class="hljs-attr">"facets"</span>: {}.
<span class="lineNumber">7</span>    <span class="hljs-string">"modhash"</span>: <span class="hljs-string">""</span>,
<span class="lineNumber">8</span>    <span class="hljs-attr">"children"</span>: [...],
<span class="lineNumber">9</span>  <span class="hljs-attr">"before"</span>: <span class="hljs-literal">null</span>
<span class="lineNumber">10</span>  }
<span class="lineNumber">11</span>}</code></pre> 

<p><code>children</code>éƒ¨åˆ†éå¸¸åºå¤§,ä¸å†å±•å¼€.æ¯ä¸€ä¸ª<code>children</code>éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡,å†…å«ä¸€ä¸ª<code>Permalink</code>é”®,å€¼æ˜¯ä¸€ä¸ªç›¸å¯¹<code>url</code>,è®¿é—®è¿™ä¸ª<code>url</code>åˆ™èƒ½è·å–åˆ°è¯„è®ºæ•°ç»„.</p>
<p>æˆ‘ä»¬å¦‚ä½•æŒ‰æœç´¢çš„ç»“æœ,è·å–æ–‡ç« çš„è¯„è®º,æœ€åè¿”å›ä¸€ä¸ªæ•°ç»„,æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå¯¹è±¡,å¯¹è±¡å†…æ˜¯<code>title</code>å’Œ<code>comments</code>.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">const</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">'sync-request'</span>)
<span class="lineNumber">2</span><span class="hljs-keyword">const</span> searchReddit = <span class="hljs-function">(<span class="hljs-params">search</span>) =></span> {
<span class="lineNumber">3</span>  <span class="hljs-keyword">let</span> response
<span class="lineNumber">4</span>  <span class="hljs-keyword">try</span> {
<span class="lineNumber">5</span>    response = <span class="hljs-built_in">JSON</span>.parse(request(<span class="hljs-string">'GET'</span>,<span class="hljs-string">'https://www.reddit.com/saerch.json?q='</span> + <span class="hljs-built_in">encodeURI</span>(search)).getBody(<span class="hljs-string">'utf8'</span>))    
<span class="lineNumber">6</span>  } <span class="hljs-function"><span class="hljs-title">catch</span>(<span class="hljs-params">err</span>)</span> {
<span class="lineNumber">7</span>    response = { <span class="hljs-attr">msg</span>: <span class="hljs-string">'something wrong'</span>, <span class="hljs-attr">errorCode</span>: err[<span class="hljs-string">'statusCode'</span>]}
<span class="lineNumber">8</span>  }
<span class="lineNumber">9</span>  <span class="hljs-keyword">return</span> response
<span class="lineNumber">10</span>}
<span class="lineNumber">11</span> 
<span class="lineNumber">12</span><span class="hljs-keyword">const</span> getComments = <span class="hljs-function">(<span class="hljs-params">link</span>) =></span> {
<span class="lineNumber">13</span>  <span class="hljs-keyword">let</span> resp;
<span class="lineNumber">14</span>  <span class="hljs-keyword">try</span> {
<span class="lineNumber">15</span>    resp = <span class="hljs-built_in">JSON</span>.parse(request(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'https://www.reddit.com/'</span> + link).getBody(<span class="hljs-string">'utf8'</span>))
<span class="lineNumber">16</span>  } <span class="hljs-keyword">catch</span> (err) {
<span class="lineNumber">17</span>    resp = {
<span class="lineNumber">18</span>      <span class="hljs-attr">msg</span>: <span class="hljs-string">'get comment failed'</span>, <span class="hljs-attr">errorCode</span>: err[<span class="hljs-string">'statusCode'</span>]
<span class="lineNumber">19</span>    }    
<span class="lineNumber">20</span>  }
<span class="lineNumber">21</span>  <span class="hljs-keyword">return</span> resp
<span class="lineNumber">22</span>}
<span class="lineNumber">23</span> 
<span class="lineNumber">24</span><span class="hljs-comment">// åˆå¹¶ä¸¤ä¸ªå‡½æ•°</span>
<span class="lineNumber">25</span><span class="hljs-keyword">const</span> mergeViaMayBe = <span class="hljs-function">(<span class="hljs-params">searchText</span>) =></span> {
<span class="lineNumber">26</span>  <span class="hljs-keyword">let</span> redditMayBe = MayBe.of(searchReddit(searchText))
<span class="lineNumber">27</span>  <span class="hljs-keyword">let</span> ans = redditMayBe
<span class="lineNumber">28</span>  	.map(<span class="hljs-function"><span class="hljs-params">arr</span> =></span> arr[<span class="hljs-string">'data'</span>])
<span class="lineNumber">29</span>  	.map(<span class="hljs-function"><span class="hljs-params">arr</span> =></span> arr[<span class="hljs-string">'children'</span>])
<span class="lineNumber">30</span>  	.map(<span class="hljs-function"><span class="hljs-params">arr</span> =></span> map(arr, <span class="hljs-function"><span class="hljs-params">x</span> =></span> {
<span class="lineNumber">31</span>      <span class="hljs-keyword">return</span> {
<span class="lineNumber">32</span>        <span class="hljs-attr">title</span>: x[<span class="hljs-string">'data'</span>].title,
<span class="lineNumber">33</span>        <span class="hljs-attr">permalink</span>: x[<span class="hljs-string">'data'</span>].permalink
<span class="lineNumber">34</span>      }
<span class="lineNumber">35</span>    }))
<span class="lineNumber">36</span>  .map(<span class="hljs-function"><span class="hljs-params">obj</span> =></span> map(obj, <span class="hljs-function"><span class="hljs-params">x</span> =></span> {
<span class="lineNumber">37</span>    <span class="hljs-keyword">return</span> {
<span class="lineNumber">38</span>      <span class="hljs-attr">title</span>: x.title,
<span class="lineNumber">39</span>      <span class="hljs-attr">comments</span>: MayBe.of(getComments(x.permalink.replace(<span class="hljs-string">'?ref=search_posts'</span>, <span class="hljs-string">'.json'</span>)))
<span class="lineNumber">40</span>    }
<span class="lineNumber">41</span>  }))
<span class="lineNumber">42</span>}</code></pre> 

<p>è¿ç”¨å‡½å­,å¯ä»¥ä½¿ç”¨é“¾å¼æ–¹æ³•è§£å†³é—®é¢˜,éå¸¸ä¼˜é›….</p>
<p>ä½†æ˜¯,è¿™ä¾ç„¶ä¸å¤Ÿ,è§‚å¯Ÿä¸Šè¿°ç»“æœä¸­<code>comments</code>ä¾ç„¶æ˜¯<code>MayBe</code>å¯¹è±¡,æƒ³è¦çœŸæ­£å–å€¼è¿˜æ˜¯éœ€è¦ç»§ç»­<code>map</code>è°ƒç”¨.</p>
<p>ä¸‹é¢,ä»‹ç»<code>Monad</code>å‡½å­ä»¥è§£å†³è¿‡å¤šçš„<code>map</code>åµŒå¥—é—®é¢˜.è®©<code>MayBe</code>æ­¦è£…åˆ°ç‰™é½¿.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>MayBe.prototype.join = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.isNothing() ? MayBe.of(<span class="hljs-literal">null</span>) : <span class="hljs-built_in">this</span>.value
<span class="lineNumber">3</span>}
<span class="lineNumber">4</span><span class="hljs-keyword">let</span> joinExample = MayBe.of(MayBe.of(<span class="hljs-number">1</span>))
<span class="lineNumber">5</span>=> MayBe{<span class="hljs-attr">value</span>: MayBe{<span class="hljs-attr">value</span>: <span class="hljs-number">1</span>}}
<span class="lineNumber">6</span>joinExample.join()
<span class="lineNumber">7</span><span class="hljs-comment">// è¿”å›å€¼å±•å¼€ä¸€ä¸ªå±‚çº§</span>
<span class="lineNumber">8</span>=> MayBe {<span class="hljs-attr">value</span>: <span class="hljs-number">1</span>}</code></pre> 

<p>å¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹å†…éƒ¨çš„å€¼è¿›è¡Œæ“ä½œ,ä¹Ÿè®¸å¯ä»¥å…ˆå±•å¼€å±‚çº§,å†æ‰§è¡Œ<code>map</code>å‡½æ•°,ä»¥å‡å°‘<code>map</code>çš„è°ƒç”¨.é‚£ä¹ˆæ—¢ç„¶å½“æˆ‘ä»¬éœ€è¦å±•å¼€ä¸€å±‚çš„æ—¶å€™éƒ½éœ€è¦åœ¨åé¢è·Ÿä¸€ä¸ª<code>join</code>æ–¹æ³•,æˆ‘ä»¬å¯ä»¥å†å°è£…ä¸€ä¸ª<code>chain</code>å‡½æ•°æ¥åšè¿™ä»¶äº‹.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span>MayBe.prototype.chain = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>)</span>{
<span class="lineNumber">2</span>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.map(f).join()
<span class="lineNumber">3</span>}</code></pre> 

<p><code>Monad</code>å°±æ˜¯åŒ…å«<code>chain</code>æ–¹æ³•çš„ç‰¹æ®Šå‡½å­.æˆ–è€…è¯´,ä¸€ä¸ªå‡½å­æ‹¥æœ‰<code>chain</code>æ–¹æ³•,å°±å¯ä»¥ç§°ä¸º<code>Monad</code></p>
<p>2020å¹´12æœˆ26æ—¥01:34:57</p>
<h1>ä½¿ç”¨ Generator</h1>
<p>å¦‚æœä½ æ˜¯<code>promise</code>çš„ç²‰ä¸,å»ºè®®å­¦ä¹ <code>Generator</code>åŠå…¶è§£å†³å¼‚æ­¥ä»£ç é—®é¢˜çš„æ–¹å¼.</p>
<p>è®©æˆ‘ä»¬å…ˆæ¥è°ˆè°ˆ<code>åŒæ­¥å’Œå¼‚æ­¥</code>:</p>
<ul>
<li>
<p>åŒæ­¥:å‡½æ•°æ‰§è¡Œçš„æ—¶å€™é˜»å¡è°ƒç”¨è€…,ç›´åˆ°å‡½æ•°æ‰§è¡Œç»“æŸè¿”å›ç»“æœ.</p>
</li>
<li>
<p>å¼‚æ­¥:å‡½æ•°æ‰§è¡Œä¸ä¼šé˜»å¡,ä½†æ˜¯å‡½æ•°æ‰§è¡Œç»“æŸå°±ä¼šè¿”å›ç»“æœ.</p>
</li>
</ul>
<p>è®©æˆ‘ä»¬æ¥åˆ›å»º<code>Generator</code>,æ³¨æ„è§‚å¯Ÿè¿™ä¸ªç‰¹æ®Šè¯­æ³•.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-function"><span class="hljs-keyword">function</span> * <span class="hljs-title">gen</span>(<span class="hljs-params"></span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-keyword">return</span> <span class="hljs-string">'first generator'</span>
<span class="lineNumber">3</span>}</code></pre> 

<p>æˆ‘ä»¬åœ¨å‡½æ•°å‰é¢ç”¨ä¸€ä¸ªæ˜Ÿå· <strong>*</strong> æ¥è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª<code>Generator</code>å‡½æ•°.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">let</span> genResult = gen()</code></pre> 

<p>æ­¤åˆ»,<code>genResult</code>å¹¶ä¸æ˜¯<code>first generator</code>,è€Œæ˜¯:</p>
<p><code>gen {[[GeneratorStatus]]: "suspended", [[GeneratorRecevier]]: Window}</code></p>
<p>è¿™æ˜¯ä¸€ä¸ª<code>Generator</code>åŸå§‹ç±»å‹çš„å®ä¾‹.è¿™ä¸ªå®ä¾‹æ‹¥æœ‰<code>next</code>æ–¹æ³•.æ‰§è¡Œæ­¤æ–¹æ³•,ä¸Šé¢çš„ä»£ç è¿”å›ä¸€ä¸ªå¯¹è±¡:</p>
<p><code>{value: 'first generator', done: true}</code></p>
<p><code>Generator</code>å®ä¾‹å¦‚åŒåºåˆ—,ä¸€æ—¦ä½¿ç”¨<code>next</code>æ¶ˆè´¹,åˆ™ä¸èƒ½å†æ¬¡å¾—åˆ°ä¸Šæ¬¡æ¶ˆè´¹çš„å€¼.ä¹Ÿå°±æ˜¯è¯´,å¦‚æœä½ ç»§ç»­æ‰§è¡Œ<code>next()</code>æ–¹æ³•,ç»“æœçš„<code>vaue</code>å°†æ˜¯<code>undefined</code>.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-function"><span class="hljs-keyword">function</span> * <span class="hljs-title">gen</span>(<span class="hljs-params"></span>) </span>{
<span class="lineNumber">2</span>  <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>
<span class="lineNumber">3</span>  <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>
<span class="lineNumber">4</span>  <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>
<span class="lineNumber">5</span>}</code></pre> 

<p>æœ‰è¶£çš„æ˜¯,å®ä¾‹æ‰§è¡Œ<code>next</code>å°†ä¼šè¿”å›<code>yield</code>åçš„ç»“æœ,å¹¶ä¸”ä¸‹æ¬¡æ‰§è¡Œ<code>next</code>ä¼šä»å½“å‰<code>yield</code>åç»§ç»­æ‰§è¡Œ.å½“æ‰€æœ‰<code>yield</code>ç»“æœéƒ½æ¶ˆè´¹ä¹‹å,<code>done</code>å±æ€§å˜æˆ<code>true</code>.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">let</span> genResult = gen()
<span class="lineNumber">2</span><span class="hljs-function"><span class="hljs-title">for</span>(<span class="hljs-params"><span class="hljs-keyword">let</span> v <span class="hljs-keyword">of</span> genResult()</span>)</span> {
<span class="lineNumber">3</span>  <span class="hljs-built_in">console</span>.log(v)
<span class="lineNumber">4</span>}
<span class="lineNumber">5</span><span class="hljs-comment">// 1</span>
<span class="lineNumber">6</span><span class="hljs-comment">// 2</span>
<span class="lineNumber">7</span><span class="hljs-comment">// 3</span></code></pre> 

<p><code>for..of..</code>åˆ©ç”¨äº†<code>next</code>å’Œ<code>done</code>å±æ€§å®Œæˆéå†.</p>
<p><code>Generator</code>ä¸æ­¢å¦‚æ­¤,è¿˜å¯ä»¥æƒ³å…¶å®ä¾‹é€šè¿‡<code>next</code>å‡½æ•°ä¼ é€’æ•°æ®.</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-function"><span class="hljs-keyword">function</span> * <span class="hljs-title">sayFullName</span>(<span class="hljs-params"></span>)</span>{
<span class="lineNumber">2</span>  <span class="hljs-keyword">let</span> firstName = <span class="hljs-keyword">yield</span>
<span class="lineNumber">3</span>  <span class="hljs-keyword">let</span> secondName = <span class="hljs-keyword">yield</span>
<span class="lineNumber">4</span>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${firstName}</span> - <span class="hljs-subst">${secondName}</span>`</span>)
<span class="lineNumber">5</span>}
<span class="lineNumber">6</span> 
<span class="lineNumber">7</span><span class="hljs-comment">// call it</span>
<span class="lineNumber">8</span><span class="hljs-keyword">let</span> fullName = sayFullName()
<span class="lineNumber">9</span>fullName.next()
<span class="lineNumber">10</span>fullName.next(<span class="hljs-string">'Fname'</span>)
<span class="lineNumber">11</span>fullName.next(<span class="hljs-string">'Sname'</span>)
<span class="lineNumber">12</span>=> <span class="hljs-built_in">console</span> log : Fname - Sname</code></pre> 

<p>é¦–æ¬¡è¿è¡Œ<code>next</code>,å‡½æ•°æš‚åœäº: <code>let firstName = yield</code></p>
<p>å†æ¬¡è¿è¡Œå¸¦å‚æ•°çš„<code>next</code>,åˆ™<code>let firstName = yield</code>è½¬ä¸º<code>let firstName = "Fname"</code></p>
<blockquote>
<p><code>Generator</code>ä¸<code>å¼‚æ­¥åº”ç”¨</code>å¯ä»¥å¾ˆå’Œè°.</p>
</blockquote>
<p>å‡å¦‚æœ‰ä¸¤ä¸ªæœ¬è´¨ä¸Šæ˜¯å¼‚æ­¥çš„å‡½æ•°å¦‚ä¸‹:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">let</span> getDataOne = <span class="hljs-function">(<span class="hljs-params">cb</span>) =></span> {
<span class="lineNumber">2</span>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> {
<span class="lineNumber">3</span>    cb(<span class="hljs-string">'dummy data one'</span>)
<span class="lineNumber">4</span>  }, <span class="hljs-number">1000</span>)
<span class="lineNumber">5</span>}
<span class="lineNumber">6</span> 
<span class="lineNumber">7</span><span class="hljs-keyword">let</span> getDataTwo = <span class="hljs-function">(<span class="hljs-params">cb</span>) =></span> {
<span class="lineNumber">8</span>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> {
<span class="lineNumber">9</span>    cb(<span class="hljs-string">'dummy data two'</span>)
<span class="lineNumber">10</span>  }, <span class="hljs-number">1000</span>)
<span class="lineNumber">11</span>}</code></pre> 

<p>ä¸€æ—¦æ—¶é—´è¿‡å»,å°±æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°<code>cb</code>.å¦‚æœè¦ç”¨<code>generator</code>æ¥è§£å†³å›è°ƒå‡½æ•°å¯èƒ½å¯¼è‡´çš„å‡½æ•°å›è°ƒåœ°ç‹±çš„é—®é¢˜?</p>
<p>è®©æˆ‘ä»¬æ¥æ”¹é€ <code>getDataOne</code>:</p>
<pre><code class="hljs language-js"><span class="lineNumber">1</span><span class="hljs-keyword">let</span> geneator;
<span class="lineNumber">2</span><span class="hljs-keyword">let</span> getDataOne = <span class="hljs-function">() =></span> {
<span class="lineNumber">3</span>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> {
<span class="lineNumber">4</span>    <span class="hljs-comment">// è°ƒç”¨ Generator</span>
<span class="lineNumber">5</span>    <span class="hljs-comment">// ä½¿ç”¨ next åŠ å‚æ•°ä¼ é€æ•°æ®</span>
<span class="lineNumber">6</span>    generator.next(<span class="hljs-string">'fake data one'</span>)
<span class="lineNumber">7</span>  }, <span class="hljs-number">1000</span>)
<span class="lineNumber">8</span>}</code></pre> 

<p>ç„¶è€Œ,æˆ‘å¹¶ä¸æ˜¯å¾ˆç†è§£è¿™æ®µä»£ç ,<code>generator</code>æ˜¯<code>undefined</code>,ä¸ºä½•è°ƒç”¨<code>next</code>.</p>
<p>2020å¹´12æœˆ26æ—¥22:56:50</p>
<p>2020 å¹´å³å°†ç»“æŸ,åœ¨å¼‚æ­¥ç¼–ç¨‹çš„é—®é¢˜ä¸Šè®©æˆ‘ä»¬æ‹¥æŠ±<code>async</code>å’Œ<code>await</code>å§.</p>
<p>ç»ˆäºçœ‹å®Œäº†è¿™æœ¬ä¹¦,è¿™æœ¬ä¹¦éå¸¸é€‚åˆæˆ‘ç°åœ¨çš„æ°´å¹³,è®©æˆ‘èƒ½å¤Ÿå­¦ä¹ å¾—å¾ˆæ„‰å¿«.å†æ¬¡æ„Ÿè°¢,å³ä½¿æ˜¨å¤©æ˜¯åœ£è¯èŠ‚æˆ‘ä¾ç„¶ä¸€ä¸ªäººè¿‡.</p>
<p>å†ä¼šå•¦.</p>
</div></div></div></main><style data-emotion-css="1fic0ux">.css-1fic0ux{border:0;opacity:0.6;border-bottom:0.0625rem solid;width:auto;margin-top:0.5rem;margin-bottom:0.5rem;border-color:inherit;}</style><hr class="css-1fic0ux"/><style data-emotion-css="11i96b0">.css-11i96b0{margin:2rem;text-align:center;}</style><div class="css-11i96b0"><p id="msg">è°¢è°¢ä½ èƒ½çœ‹åˆ°è¿™é‡Œ!<span role="img" aria-label="emoji">ğŸ¤—</span>Â å¦‚æœä½ æœ‰ä»»ä½•æƒ³ä¸æˆ‘è®¨è®ºçš„å†…å®¹,è¯·ç»™æˆ‘å‘é‚®ä»¶.<span role="img" aria-label="emoji">ğŸ•Š</span></p><br/><a style="text-decoration:none" href="mailto:rivenqinyy@gmail.com"><style data-emotion-css="meafa5">.css-meafa5{display:inline-block;padding-left:0.25rem;padding-right:0.25rem;text-transform:uppercase;font-size:0.75rem;border-radius:0.125rem;font-weight:700;white-space:nowrap;vertical-align:middle;background-color:#c6f6d5;color:#22543d;}</style><div class="css-meafa5">æˆ‘çš„é‚®ä»¶</div><span role="img" aria-label="my email">ğŸ“®</span></a><br/><br/><style data-emotion-css="1fb5c92">.css-1fb5c92{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";color:#4A5568;font-size:.7rem;}</style><p class="css-1fb5c92">å¦™æ‰ Â© 2020. All rights reserved.</p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"Javascript-ES6-å‡½æ•°å¼ç¼–ç¨‹é˜…è¯»éšå†™","contentHtml":"\u003ch1\u003eå‡½æ•°å¼ç¼–ç¨‹ç®€ä»‹\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå‡½æ•°è¦å°,è¦æ›´å°.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå‡½æ•°å¼ç¼–ç¨‹,è¿œç¦»å¤–éƒ¨ç¯å¢ƒçš„ä¾èµ–,éš”ç»çªå˜ä¸çŠ¶æ€.\u003c/p\u003e\n\u003cp\u003eæ•°å­¦çš„å‡½æ•°å®šä¹‰ä¸­,å‡½æ•°å¿…é¡»æ¥æ”¶ä¸€ä¸ª\u003ccode\u003eå‚æ•°\u003c/code\u003e,è¿”å›ä¸€ä¸ªå€¼.å‡½æ•°æ ¹æ®æ¥æ”¶çš„å‚æ•°è¿è¡Œ.ç»™å®šçš„å‚æ•°ä¸‹,è¿”å›å€¼æ˜¯ä¸å˜çš„.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eJavaScriptå‡½æ•°å¼ç¼–ç¨‹\u003c/code\u003eåŸºäºæ•°å­¦å‡½æ•°åŠå…¶æ€æƒ³è¿›è¡Œå‘å±•.è¿ç”¨å‡½æ•°å¼çš„èŒƒå¼è¿›è¡Œå¼€å‘èƒ½åˆ›é€ å¯ç¼“å­˜å’Œå¯æµ‹è¯•çš„ä»£ç åº“.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eç®€å•åˆ†è¾¨å‡½æ•°ä¸æ–¹æ³• - JS,ä¸å¿…æ·±ç©¶ windowå’Œ global å¯¹è±¡.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003eå‡½æ•°: ä¸€æ®µé€šè¿‡åç§°å¯è°ƒç”¨çš„ä»£ç \u003c/li\u003e\n\u003cli\u003eæ–¹æ³•: é€šè¿‡åç§°ä¸”å…³è”å¯¹è±¡çš„åç§°è¢«è°ƒç”¨çš„ä»£ç \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå‡½æ•°çš„å¼•ç”¨é€æ˜æ€§æŒ‡çš„æ˜¯,å‡½æ•°å¯¹ç›¸åŒçš„è¾“å…¥è¿”å›ç›¸åŒçš„å€¼.ä¸ä¾èµ–å…¨å±€æ•°æ®çš„å‡½æ•°,èƒ½å¤Ÿè‡ªç”±åœ°åœ¨å¤šçº¿ç¨‹çŠ¶æ€ä¸‹è¿è¡Œ,å…¨ç¨‹æ— é”.å¹¶ä¸”å‡½æ•°æ˜¯\u003ccode\u003eå¯ç¼“å­˜\u003c/code\u003eçš„,åˆç†è¿ç”¨è¿™ä¸€ç‚¹,å¯ä»¥èŠ‚çœå¤§é‡é‡å¤è®¡ç®—çš„èµ„æºæ¶ˆè€—å’Œæ—¶é—´æ¶ˆè€—.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¼•ç”¨é€æ˜æ€§æ˜¯ä¸€ç§å“²å­¦\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eå‘½ä»¤å¼?å£°æ˜å¼?\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e arr = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e]\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e(i=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;i\u0026#x3C;arr.length;i++) \n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(i)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸Šè¿°ä»£ç ç¤ºä¾‹,æˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨å¦‚ä½•å»åš,è¿™å°±æ˜¯\u003ccode\u003eå‘½ä»¤å¼\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e arr = [\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e]\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003earr.forEach(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ei\u003c/span\u003e =\u003e\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(i))\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003eforEach\u003c/code\u003eæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°,æ„åœ¨å‘ŠçŸ¥ç¼–è¯‘å™¨\u003ccode\u003eåšä»€ä¹ˆ\u003c/code\u003e,\u003ccode\u003eå¦‚ä½•åš\u003c/code\u003eçš„éƒ¨åˆ†åˆ™åœ¨é«˜é˜¶å‡½æ•°å†…çš„æ™®é€šå‡½æ•°ä¸­å®ç°.è¿™ä¾¿æ˜¯\u003ccode\u003eå£°æ˜å¼\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eçº¯å‡½æ•°\u003c/strong\u003e:å¯¹ç»™å®šçš„è¾“å…¥,è¿”å›ç›¸åŒçš„è¾“å‡ºçš„å‡½æ•°.çº¯å‡½æ•°ä¸ä¾èµ–äºå¤–éƒ¨ç¯å¢ƒ.ä¹Ÿä¸ä¼šæ”¹å˜å¤–éƒ¨ç¯å¢ƒ.æ˜“äºå¯¹å‡½æ•°è¿›è¡Œ\u003ccode\u003eæµ‹è¯•\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eçº¯å‡½æ•°æ˜¯\u003ccode\u003eæ˜“äºé˜…è¯»\u003c/code\u003eçš„.ä¸ºçº¯å‡½æ•°è®¾ç½®\u003ccode\u003eå…·æœ‰æ„ä¹‰\u003c/code\u003eçš„å‡½æ•°åæ˜¯ä¸€ç§æœ€ä½³å®è·µ.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eçº¯å‡½æ•°åº”è¯¥è¢«è®¾è®¡ä¸ºåªåšä¸€ä»¶äº‹,å¹¶ä¸”æŠŠå®ƒåšåˆ°å®Œç¾,è¿™ä¹Ÿä¼šæ˜¯ Unix çš„å“²å­¦.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eçº¯å‡½æ•°æ”¯æŒ\u003ccode\u003eç®¡é“å’Œç»„åˆ\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003ecat package.json | grep axios\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003ebash\u003c/code\u003eå‘½ä»¤çš„ç®¡é“å’Œç»„åˆå¨åŠ›å·¨å¤§,ç»„åˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒ.æˆ‘ä»¬ç§°ä¹‹ä¸º\u003ccode\u003efunction composition\u003c/code\u003e.\u003c/p\u003e\n\u003ch1\u003eJavaScript å‡½æ•°å¼åŸºç¡€\u003c/h1\u003e\n\u003cp\u003eç•¥,ç®€è¿°åŸºç¡€\u003ccode\u003eJavaScript\u003c/code\u003e.\u003c/p\u003e\n\u003ch1\u003eé«˜é˜¶å‡½æ•° HOF\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eJavaScript æ•°æ®ç±»å‹\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNumber\u003c/li\u003e\n\u003cli\u003eString\u003c/li\u003e\n\u003cli\u003eBoolean\u003c/li\u003e\n\u003cli\u003eNull\u003c/li\u003e\n\u003cli\u003eObject\u003c/li\u003e\n\u003cli\u003eundefined\u003c/li\u003e\n\u003cli\u003eSymbol\u003c/li\u003e\n\u003cli\u003eBigInt\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eé™¤äº†\u003ccode\u003eobject\u003c/code\u003eå¤–,éƒ½æ˜¯åŸå§‹æ•°æ®ç±»å‹.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eåœ¨\u003ca href=\"https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8\"\u003eè®¡ç®—æœºç§‘å­¦\u003c/a\u003eä¸­ï¼Œ\u003cstrong\u003eæŠ½è±¡åŒ–\u003c/strong\u003eï¼ˆè‹±è¯­ï¼šAbstractionï¼‰æ˜¯å°†èµ„æ–™ä¸ç¨‹åºï¼Œä»¥å®ƒçš„è¯­ä¹‰æ¥å‘ˆç°å‡ºå®ƒçš„å¤–è§‚ï¼Œä½†æ˜¯éšè—èµ·å®ƒçš„å®ç°ç»†èŠ‚ã€‚æŠ½è±¡åŒ–æ˜¯ç”¨æ¥å‡å°‘ç¨‹åºçš„å¤æ‚åº¦ï¼Œä½¿å¾—ç¨‹åºå‘˜å¯ä»¥ä¸“æ³¨åœ¨å¤„ç†å°‘æ•°é‡è¦çš„éƒ¨åˆ†ã€‚ä¸€ä¸ªç”µè„‘ç³»ç»Ÿå¯ä»¥åˆ†å‰²æˆå‡ ä¸ª\u003ca href=\"https://zh.wikipedia.org/wiki/%E6%8A%BD%E8%B1%A1%E5%B1%A4\"\u003eæŠ½è±¡å±‚\u003c/a\u003eï¼ˆAbstraction layerï¼‰ï¼Œä½¿å¾—ç¨‹åºå‘˜å¯ä»¥å°†å®ƒä»¬åˆ†å¼€å¤„ç†ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eæŠ½è±¡åŒ–,è®©æˆ‘ä»¬ä¸“æ³¨äºå¯æ§å±‚é¢çš„å·¥ä½œ,å°†å¤æ‚çš„å†…å®¹ç®€å•åŒ–,è®©å¼€å‘è€…ä¸“æ³¨äºé¢„è®¢çš„ç›®æ ‡,ä¸å¿…\u003ccode\u003eäº‹äº‹å…³å¿ƒ\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬é€šè¿‡\u003ccode\u003eé«˜é˜¶å‡½æ•°\u003c/code\u003eå®ç°æŠ½è±¡.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e forEach = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earr, Fn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;i\u0026#x3C;arr.length;i++) Fn(arr[i])\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eè¿™æ˜¯ä¸€ä¸ªç®€å•çš„é«˜é˜¶å‡½æ•°,æŠ½è±¡äº†\u003ccode\u003eéå†æ•°ç»„\u003c/code\u003eçš„é—®é¢˜,å¦‚æœä½ ä½¿ç”¨è¿™ä¸ªå‡½æ•°,ä½ å¹¶ä¸éœ€è¦å…³æ³¨å†…éƒ¨ä»£ç æ˜¯å¦‚ä½•å®ç°çš„.ä¸Šè¿°ä¾‹å­æ˜¯ä¸€ä¸ªç®€å•é€»è¾‘,åŒç†ä¹Ÿå¯ä»¥æ˜¯æ›´ä¸ºå¤æ‚çš„é€»è¾‘,è¿™æ ·ä¸€æ¥å°±å°†å¤æ‚é—®é¢˜\u003ccode\u003eæŠ½è±¡\u003c/code\u003eå‡ºæ¥äº†.\u003c/p\u003e\n\u003cp\u003eè®©æˆ‘ä»¬å¼€å§‹å­¦ä¹ æ„å»ºå¤æ‚çš„é«˜é˜¶å‡½æ•°.\u003c/p\u003e\n\u003cp\u003eåˆ›å»ºä¸€ä¸ª\u003ccode\u003eevery\u003c/code\u003eå‡½æ•°å¦‚ä¸‹:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e every = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earr, fn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e result = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e i=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;i\u0026#x3C;arr.length;i++\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    result = result \u0026#x26;\u0026#x26; fn(arr[i])\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e \n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// for..of.. ç‰ˆæœ¬\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// for...of..æ˜¯ es6 çš„å‡½æ•°,å¯ä»¥æ–¹ä¾¿éå†æ•°ç»„\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e every = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earr, fn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e result = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e value \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e arr\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e    result = result \u0026#x26;\u0026#x26; fn(arr[value])\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e16\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n\u003cspan class=\"lineNumber\"\u003e17\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå¦‚æ­¤ä¸€æ¥,æˆ‘ä»¬æŠ½è±¡äº†å¯¹æ•°ç»„éå†çš„æ“ä½œ.\u003c/p\u003e\n\u003cp\u003eæ¥ç€,ç¼–å†™ä¸€ä¸ª\u003ccode\u003esome\u003c/code\u003eå‡½æ•°,å…¶æ¥å—ä¸€ä¸ªæ•°ç»„å’Œä¸€ä¸ªå‡½æ•°,å¦‚æœæ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´ é€šè¿‡æ¥æ”¶çš„å‡½æ•°è¿”å›\u003ccode\u003etrue\u003c/code\u003e,åˆ™\u003ccode\u003esome\u003c/code\u003eå‡½æ•°è¿”å›\u003ccode\u003etrue\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e every = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earr, fn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e result = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e value \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e arr\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    result = result || fn(arr[value])\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cblockquote\u003e\n\u003cp\u003esome å‡½æ•°å’Œ every å‡½æ•°éƒ½ä¸ç®—é«˜æ•ˆ,è¿™é‡Œåªæ˜¯ä½œä¸ºå¯¹é«˜é˜¶å‡½æ•°çš„å±•ç¤º.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003eJavaScript\u003c/code\u003eçš„\u003ccode\u003earray\u003c/code\u003eåŸå‹å†…ç½®\u003ccode\u003esort\u003c/code\u003eå‡½æ•°,å¯ä»¥ç»™æ•°ç»„æ’åº.è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„\u003ccode\u003eé«˜é˜¶å‡½æ•°\u003c/code\u003e.å®ƒæ¥æ”¶ä¸€ä¸ªå¯é€‰çš„å‡½æ•°æ¥å†³å®šæ’åºé¡ºåºé€»è¾‘.æå¤§çš„æé«˜äº†æ’åºçš„çµæ´»æ€§.æˆ‘ä»¬çŸ¥é“,é»˜è®¤çš„\u003ccode\u003esort\u003c/code\u003eæ’åºæ˜¯å°†æ•°ç»„å…ƒç´ è½¬æ¢ä¸º\u003ccode\u003estring\u003c/code\u003eå¹¶ä¸”æŒ‰\u003ccode\u003eUnicode\u003c/code\u003eç¼–ç ç‚¹è¿›è¡Œæ’åº,å› æ­¤æ•°å­— 2 åœ¨é»˜è®¤æ’åºç®—æ³•ä¸­å°äº 12.è®©æˆ‘ä»¬çœ‹çœ‹æ­¤å¯é€‰çš„\u003ccode\u003ecompare\u003c/code\u003eå‡½æ•°çš„éª¨æ¶:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ecompare\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ea, b\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eæ¡ä»¶\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e    \u003cspan class=\"hljs-comment\"\u003e// a å°äº b\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eæ¡ä»¶\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e    \u003cspan class=\"hljs-comment\"\u003e// a å¤§äº b\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e// a ç­‰äº b\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸¾ä¸ªä¾‹å­,ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·æ•°ç»„,æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªç”¨æˆ·çš„ä¿¡æ¯.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e people = [\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Aaron'\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    \u003cspan class=\"hljs-attr\"\u003eage\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  },\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  {\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Rose'\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e    \u003cspan class=\"hljs-attr\"\u003eage\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e11\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e]\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eè€Œéœ€æ±‚åˆ™æ˜¯,é€šè¿‡å§“åæ’åºæˆ–è€…é€šè¿‡å¹´é¾„æ’åº.æ ¹æ®å‰ç½®çŸ¥è¯†,å¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç :\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// ç®€åŒ–é€»è¾‘,å¿½ç•¥ç›¸ç­‰çš„æƒ…å†µ\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003epeople.sort(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ea, b\u003c/span\u003e) =\u003e\u003c/span\u003e a.name \u003e b.name ? \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e : -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003epeople.sort(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ea, b\u003c/span\u003e) =\u003e\u003c/span\u003e a.age \u003e b.age ? \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e: -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸Šè¿°ä»£ç ,æˆ‘ä»¬å°†é›·åŒçš„éƒ¨åˆ†å†™äº†ä¸¤é.ç°åœ¨æˆ‘ä»¬æ¥è®¾è®¡ä¸€ä¸ªå‡½æ•°,æ¥æ”¶ä¸€ä¸ªå‚æ•°,è¿”å›ä¸€ä¸ªå‡½æ•°.æ˜¯çš„,å°†è¦è®¾è®¡çš„è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª\u003ccode\u003eé«˜é˜¶å‡½æ•°\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e sortBy = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eproperty\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ea, b\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e a[property] \u003e b[property] ? \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e : -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// ç®€åŒ–ç‰ˆ\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e sortBy = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eproperty\u003c/span\u003e =\u003e\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ea, b\u003c/span\u003e) =\u003e\u003c/span\u003e a[property] \u003e b[property] ? \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e : -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç°åœ¨,æˆ‘ä»¬å¯ä»¥é‡å†™æŒ‰\u003ccode\u003ename\u003c/code\u003eæˆ–è€…\u003ccode\u003eage\u003c/code\u003eçš„æ’åºä»£ç äº†.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003epeople.sort(sortBy(\u003cspan class=\"hljs-string\"\u003e'name'\u003c/span\u003e))\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003epeople.sort(sortBy(\u003cspan class=\"hljs-string\"\u003e'age'\u003c/span\u003e))\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eè¿™å°±æ˜¯\u003ccode\u003eé«˜é˜¶å‡½æ•°\u003c/code\u003eçš„é­…åŠ›.è¿ç”¨é«˜é˜¶å‡½æ•°,æé«˜ä»£ç è´¨é‡,é™ä½ä»£ç æ•°é‡.\u003c/p\u003e\n\u003ch1\u003eé—­åŒ…ä¸é«˜é˜¶å‡½æ•°\u003c/h1\u003e\n\u003cp\u003eç®€è€Œè¨€ä¹‹,é—­åŒ…å°±æ˜¯ä¸€ä¸ªå†…éƒ¨å‡½æ•°.åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°,å¯ä»¥ç§°ä¸º\u003ccode\u003eé—­åŒ…å‡½æ•°\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eä»\u003ccode\u003eæŠ€æœ¯ä¸Š\u003c/code\u003eæ¥è®²,ä¸Šè¿°é—­åŒ…å‡½æ•°çš„é—­åŒ…åœºæ™¯å­˜åœ¨ä¸‰ä¸ªå¯è®¿é—®çš„ä½œç”¨åŸŸ:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè‡ªèº«å£°æ˜å†…å˜é‡\u003c/li\u003e\n\u003cli\u003eå¤–éƒ¨å‡½æ•°å˜é‡\u003c/li\u003e\n\u003cli\u003eå…¨å±€å˜é‡\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eé—­åŒ…å¯ä»¥è®°ä½ä¸Šä¸‹æ–‡ç¯å¢ƒ\u003c/strong\u003e.è¯è¯´å›æ¥,ç”±äºæˆ‘ä»¬è¦åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­å¤„ç†å¾ˆå¤šå‡½æ•°,å› æ­¤éœ€è¦ä¸€ç§è°ƒè¯•æ–¹æ³•.\u003c/p\u003e\n\u003cp\u003eä¸¾ä¸ªä¾‹å­,ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„,æƒ³è¦è§£ææˆæ•´æ•°æ•°ç»„,å¦‚ä¸‹ä»£ç ä¼šæœ‰é—®é¢˜:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e'1'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2'\u003c/span\u003e].map(\u003cspan class=\"hljs-built_in\"\u003eparseInt\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003emap\u003c/code\u003eå‡½æ•°ç”¨ä¸‰ä¸ªå‚æ•°è°ƒç”¨äº†\u003ccode\u003eparseInt\u003c/code\u003e,åˆ†åˆ«æ˜¯:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eelement\u003c/li\u003e\n\u003cli\u003eindex\u003c/li\u003e\n\u003cli\u003earr\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eè€Œ\u003ccode\u003eparseInt\u003c/code\u003eå‡½æ•°å…¨ç›˜æ¥çº³,æ¥çœ‹çœ‹æ­¤å‡½æ•°çš„å®šä¹‰:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-built_in\"\u003eparseInt\u003c/span\u003e(string, radix);\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003eradix\u003c/code\u003eæ˜¯å¯é€‰çš„åŸºæ•°,å¦‚æœæä¾› 10,åˆ™è½¬æ¢ä¸ºåè¿›åˆ¶çš„æ•´æ•°.\u003c/p\u003e\n\u003cp\u003eå¦‚æœ \u003ccode\u003eradix\u003c/code\u003e æ˜¯ \u003ccode\u003eundefined\u003c/code\u003eã€\u003ccode\u003e0\u003c/code\u003eæˆ–æœªæŒ‡å®šçš„ï¼ŒJavaScriptä¼šå‡å®šä»¥ä¸‹æƒ…å†µï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eå¦‚æœè¾“å…¥çš„ \u003ccode\u003estring\u003c/code\u003eä»¥ \"\u003ccode\u003e0x\u003c/code\u003e\"æˆ– \"\u003ccode\u003e0x\u003c/code\u003e\"ï¼ˆä¸€ä¸ª0ï¼Œåé¢æ˜¯å°å†™æˆ–å¤§å†™çš„Xï¼‰å¼€å¤´ï¼Œé‚£ä¹ˆradixè¢«å‡å®šä¸º16ï¼Œå­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†è¢«å½“åšåå…­è¿›åˆ¶æ•°å»è§£æã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœè¾“å…¥çš„ \u003ccode\u003estring\u003c/code\u003eä»¥ \"\u003ccode\u003e0\u003c/code\u003e\"ï¼ˆ0ï¼‰å¼€å¤´ï¼Œ \u003ccode\u003eradix\u003c/code\u003eè¢«å‡å®šä¸º\u003ccode\u003e8\u003c/code\u003eï¼ˆå…«è¿›åˆ¶ï¼‰æˆ–\u003ccode\u003e10\u003c/code\u003eï¼ˆåè¿›åˆ¶ï¼‰ã€‚å…·ä½“é€‰æ‹©å“ªä¸€ä¸ªradixå–å†³äºå®ç°ã€‚ECMAScript 5 æ¾„æ¸…äº†åº”è¯¥ä½¿ç”¨ 10 (åè¿›åˆ¶)ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒã€‚\u003cstrong\u003eå› æ­¤ï¼Œåœ¨ä½¿ç”¨ \u003ccode\u003eparseInt\u003c/code\u003e æ—¶ï¼Œä¸€å®šè¦æŒ‡å®šä¸€ä¸ª radix\u003c/strong\u003eã€‚\u003c/li\u003e\n\u003cli\u003eå¦‚æœè¾“å…¥çš„ \u003ccode\u003estring\u003c/code\u003e ä»¥ä»»ä½•å…¶ä»–å€¼å¼€å¤´ï¼Œ \u003ccode\u003eradix\u003c/code\u003e æ˜¯ \u003ccode\u003e10\u003c/code\u003e (åè¿›åˆ¶)ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eå¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½è½¬æ¢ä¸ºæ•°å­—ï¼Œ\u003ccode\u003eparseInt\u003c/code\u003eä¼šè¿”å› \u003ccode\u003eNaN\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eæ­¤æ—¶,\u003ccode\u003e['1', '2'].map(parseInt)\u003c/code\u003eçš„ç»“æœæ˜¯: [1, NaN].\u003c/p\u003e\n\u003cp\u003eå¦‚ä½•ç”¨å‡½æ•°å¼çš„æ€ç»´,åˆ›å»ºä¸€ä¸ªé«˜é˜¶å‡½æ•°,å¯¹\u003ccode\u003eparseInt\u003c/code\u003eè¿›è¡ŒæŠ½è±¡.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e unary = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003efn\u003c/span\u003e) =\u003e\u003c/span\u003e fn.length === \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e ? fn : \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earg\u003c/span\u003e) =\u003e\u003c/span\u003e fn(arg)\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e'1'\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e'2'\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e'3'\u003c/span\u003e].map(unary(\u003cspan class=\"hljs-built_in\"\u003eparseInt\u003c/span\u003e))\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç°åœ¨,å³ä½¿\u003ccode\u003emap\u003c/code\u003eä»¥ä¸‰ä¸ªå‚æ•°è°ƒç”¨\u003ccode\u003eunary\u003c/code\u003eå‡½æ•°æ‰§è¡Œåè¿”å›çš„å‡½æ•°,éƒ½åªä¼šè®©\u003ccode\u003eelement\u003c/code\u003eå‚æ•°ç”Ÿæ•ˆ.\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬å¾—åˆ°äº†é¢„æœŸä¸­çš„ç»“æœ:\u003ccode\u003e[1,2,3]\u003c/code\u003e :seedling:\u003c/p\u003e\n\u003cp\u003eç°åœ¨,è®©æˆ‘ä»¬ä¸ºè‡ªå·±çš„å·¥å…·åº“æ·»åŠ ä¸€ä¸ªå·¥å…·å‡½æ•°,è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°,è®©è¿™ä¸ªæ¥æ”¶çš„å‡½æ•°åªèƒ½è¢«æ‰§è¡Œä¸€æ¬¡.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e once = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003efn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e done = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e done ? \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e : ((done = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e), fn.apply(\u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003earguments\u003c/span\u003e))\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç°åœ¨ç”¨ä¸€ä¸ªå˜é‡\u003ccode\u003edone\u003c/code\u003eä¿å­˜å‡½æ•°çš„æ‰§è¡ŒçŠ¶æ€.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e demoFn = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ea, b\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(a, b, \u003cspan class=\"hljs-string\"\u003e'just called once.'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e newDemoFn = once(demoFn)\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003enewDemoFn(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// output: 1 2 just called once.\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003enewDemoFn(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// no output\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç»§ç»­,åˆ›å»ºä¸‹ä¸€ä¸ªå‡½æ•°\u003ccode\u003ememoized\u003c/code\u003e,ä½¿å‡½æ•°è®°ä½å…¶è®¡ç®—ç»“æœ:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e memoized = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003efn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e lookupTable = {}\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earg\u003c/span\u003e) =\u003e\u003c/span\u003e lookupTable[arg] || (lookupTable[arg] = fn(arg))\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸€ä¸ªé€ŸæŸ¥\u003ccode\u003etable\u003c/code\u003eä¿å­˜äº†å‡½æ•°è§£æ„,å¦‚æœä¸å­˜åœ¨åˆ™æ‰§è¡Œæ­¤å‡½æ•°,ä¿å­˜åˆ°é€ŸæŸ¥è¡¨ä¸­å¹¶ä¸”è¿”å›æ­¤ç»“æœ.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003ememoized å‡½æ•°æ˜¯ç»å…¸çš„å‡½æ•°å¼ç¼–ç¨‹,æ˜¯é—­åŒ…ä¸çº¯å‡½æ•°çš„å®æˆ˜\u003c/strong\u003e\u003c/p\u003e\n\u003ch1\u003eæ•°ç»„çš„å‡½æ•°å¼ç¼–ç¨‹\u003c/h1\u003e\n\u003cp\u003eæˆ‘ä»¬å°†åˆ›å»ºä¸€ç»„å‡½æ•°ç”¨äºè§£å†³å¸¸è§çš„æ•°ç»„é—®é¢˜,å…³é”®åœ¨äºå‡½æ•°å¼çš„æ–¹æ³•,è€Œéå‘½ä»¤å¼çš„æ–¹æ³•.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæŠŠå‡½æ•°åº”ç”¨äºä¸€ä¸ªå€¼,å¹¶ä¸”åˆ›å»ºæ–°çš„å€¼çš„è¿‡ç¨‹è¢«ç§°ä¸º\"æŠ•å½±\"\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003eArray.map\u003c/code\u003eå°±æ˜¯å…¸å‹çš„æŠ•å½±å‡½æ•°.æˆ‘ä»¬æ¥è¯•ç€åˆ›å»ºä¸€ä¸ª\u003ccode\u003emap\u003c/code\u003eå‡½æ•°.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e map = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earr, fn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = []\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e v \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e arr\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    result.push(fn(v))\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e\t\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸€ä¸ª\u003ccode\u003efilter\u003c/code\u003eå‡½æ•°,å¯¹æ•°ç»„å†…å®¹è¿›è¡Œè¿‡æ»¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e filter = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earr, fn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = []\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e v \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e arr\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(fn(v)) result.push(v)\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸€ä¸ª\u003ccode\u003ereduce\u003c/code\u003eå‡½æ•°,å¯¹æ•°ç»„çš„æ‰€æœ‰å€¼è¿›è¡Œ\u003ccode\u003eå½’çº¦\u003c/code\u003eæ“ä½œ.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e reduce = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earr, fn, defaultAccumlator\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e accumlator;\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003edefaultAccumlator !== \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    accumlator = defaultAccumlator\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e v \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e arr\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e      accumlator = fn(accumlator, v)\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e    }\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e    accumlator = arr[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;i\u0026#x3C;arr.length;i++\u003c/span\u003e)\u003c/span\u003e {    \n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e      accumlator = fn(accumlator, arr[i])\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e    }\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [accumlator]\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003cstrong\u003eç»§ç»­\u003c/strong\u003e,ä¸Š\u003ccode\u003ezip\u003c/code\u003eå‡½æ•°,ç”¨äºåˆå¹¶ä¸¤ä¸ªå•ç‹¬çš„æ•°ç»„,è¿”å›ä¸€ä¸ªå¤„ç†è¿‡çš„æ–°æ•°ç»„.è¿™ä¸ªå‡½æ•°å¯ä»¥å¯¹ç»™å®šçš„ä¸¤ä¸ªæ•°ç»„çš„é™å®šå¯¹è±¡è¿›è¡Œç»“å¯¹å¤„ç†,å¦‚ä½•å¤„ç†å–å†³äºå…·ä½“çš„å‡½æ•°é€»è¾‘.ç»“å¯¹çš„ç»“æœå°±æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e zip = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003earr1, arr2, fn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e index, result = []\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eindex = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;index \u0026#x3C; \u003cspan class=\"hljs-built_in\"\u003eMath\u003c/span\u003e.min(arr1.length, arr2.length);index++\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    result.push(fn(arr1[index], arr2[index]))\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003ch1\u003ecurrying å’Œååº”ç”¨\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eä¸€äº›æœ¯è¯­\u003c/strong\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eunary function: ä¸€å…ƒå‡½æ•°,åªæ¥æ”¶ä¸€ä¸ªå‚æ•°çš„å‡½æ•°.\u003c/li\u003e\n\u003cli\u003ebinary function: äºŒå…ƒå‡½æ•°\u003c/li\u003e\n\u003cli\u003eå˜å‚å‡½æ•°:æ¥å—å¯å˜æ•°é‡å‚æ•°çš„å‡½æ•°\u003c/li\u003e\n\u003cli\u003ecurrying: æŸ¯é‡ŒåŒ–,è¿™æ˜¯ä¸€ä¸ªè¿‡ç¨‹,å°†ä¸€ä¸ªå¤šå‚å‡½æ•°è½¬å˜ä¸ºä¸€ä¸ªåµŒå¥—çš„ä¸€å…ƒå‡½æ•°.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸Šä»£ç :\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e curry = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ebinaryFn\u003c/span\u003e =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003efirstArg\u003c/span\u003e =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003esecondArg\u003c/span\u003e =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e binaryFn(firstArg, secondArg);\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    }\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// ç®€åŒ–\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e curry = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ebinaryFn\u003c/span\u003e =\u003e\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003efirstArg\u003c/span\u003e =\u003e\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003esecondArg\u003c/span\u003e =\u003e\u003c/span\u003e binaryFn(firstArg, secondArg)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå®Œç¾åˆ©ç”¨äº†é—­åŒ…çš„ç‰¹æ€§,ä¹Ÿè®¸å¯¹äºä¸€äº›æ·±è°™æ­¤é“çš„ coder è€Œè¨€,è¿™ä¸ç®—ä»€ä¹ˆ.ä½†æ˜¯å¯¹äºæ­¤åˆ»çš„æˆ‘æ¥è¯´,ä»æœªå¦‚æ­¤æ¸…æ™°ä½“ä¼šåˆ°é—­åŒ…å’Œ currying.å¦‚æ­¤ä¹‹ç¾.\u003c/p\u003e\n\u003cp\u003eå¼€å‘è€…ç¼–å†™ä»£ç çš„æ—¶å€™ä¼šåœ¨åº”ç”¨ä¸­ç¼–å†™æ—¥å¿—,ä¸‹é¢æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª\u003ccode\u003eæ—¥å¿—å‡½æ•°\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e loggerHelper = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003emode, msg, errorMsg, lineNo\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003emode === \u003cspan class=\"hljs-string\"\u003e'DEBUG'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e    \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.debug(msg, errorMsg + \u003cspan class=\"hljs-string\"\u003e'at line:'\u003c/span\u003e + lineNo)\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003emode === \u003cspan class=\"hljs-string\"\u003e'WARN'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.warn(msg, errorMsg + \u003cspan class=\"hljs-string\"\u003e'at line:'\u003c/span\u003e + lineNo)\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003emode === \u003cspan class=\"hljs-string\"\u003e'ERROR'\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e    \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.error(msg, errorMsg + \u003cspan class=\"hljs-string\"\u003e'at line:'\u003c/span\u003e + lineNo)\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"WRONG MODE\"\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸Šè¿°ä»£ç ä¸æ˜¯è‰¯å¥½çš„è®¾è®¡,å¤šæ¬¡é‡ç”¨äº†éƒ¨åˆ†ä»£ç ,è®©æ•´ä½“ä¸å¤Ÿç®€æ´.ä¹‹å‰åˆ›å»ºçš„\u003ccode\u003ecurry\u003c/code\u003eå‡½æ•°ä¹Ÿæ— æ³•å¤„ç†è¿™ä¸ªæ—¥å¿—å‡½æ•°.æˆ‘ä»¬éœ€è¦\u003cstrong\u003eæ›´è¿›ä¸€æ­¥\u003c/strong\u003e.æˆ‘ä»¬éœ€è¦æŠŠå¤šå‚æ•°å‡½æ•°è½¬åŒ–ä¸º\u003ccode\u003eunary function\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e curry = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003efn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003etypeof\u003c/span\u003e fn !== \u003cspan class=\"hljs-string\"\u003e'function'\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'No function provided'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e// args æ˜¯å¯å˜å‚æ•°\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ecurryFn\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e...args\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    \u003cspan class=\"hljs-comment\"\u003e// å¦‚æœå¯å˜å‚æ•°å°‘äºè¢«æŸ¯é‡ŒåŒ–çš„å‡½æ•°çš„å‚æ•°æ•°é‡\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eargs.length \u0026#x3C; fn.length\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e        \u003cspan class=\"hljs-comment\"\u003e// æ‰§è¡Œæ­¤å‡½æ•°,è¿”å›ä¸€ä¸ªå¤„ç†ä¸€æ¬¡å‚æ•°çš„å‡½æ•°\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e curryFn.apply(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, args.concat(\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e        \t\u003cspan class=\"hljs-built_in\"\u003eArray\u003c/span\u003e.slice.call(\u003cspan class=\"hljs-built_in\"\u003earguments\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e        ))\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e      }\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e    }\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e fn.apply(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, args)\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003earguments\u003c/code\u003eå¯¹è±¡æ˜¯æ‰€æœ‰ï¼ˆéç®­å¤´ï¼‰å‡½æ•°ä¸­éƒ½å¯ç”¨çš„\u003cstrong\u003eå±€éƒ¨å˜é‡\u003c/strong\u003eã€‚ä½ å¯ä»¥ä½¿ç”¨\u003ccode\u003earguments\u003c/code\u003eå¯¹è±¡åœ¨å‡½æ•°ä¸­å¼•ç”¨å‡½æ•°çš„å‚æ•°ã€‚æ­¤å¯¹è±¡åŒ…å«ä¼ é€’ç»™å‡½æ•°çš„æ¯ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°åœ¨ç´¢å¼•0å¤„ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå›åˆ°\u003ccode\u003eæ—¥å¿—å‡½æ•°\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e errorDebugLog = curry(loggerHelper)(\u003cspan class=\"hljs-string\"\u003e'ERROR'\u003c/span\u003e)(\u003cspan class=\"hljs-string\"\u003e'ERROR:'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e warnDebugLog = curry(loggerHelper)(\u003cspan class=\"hljs-string\"\u003e'WARN'\u003c/span\u003e)(\u003cspan class=\"hljs-string\"\u003e'WARN:'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003eerrorDebugLog(\u003cspan class=\"hljs-string\"\u003e'balabala..'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e21\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// output: 'ERROR: balabala at line 21'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eè¿™å°±æ˜¯é—­åŒ…çš„é­…åŠ›,åœ¨é¦–æ¬¡ä¼ å…¥\u003ccode\u003eloggerHelper\u003c/code\u003eçš„æ—¶å€™,é—­åŒ…ç”Ÿæˆäº†å¯è®¿é—®å˜é‡ä½œç”¨åŸŸ,è®°ä½äº†å‡½æ•°ä¿¡æ¯.\u003c/p\u003e\n\u003cp\u003eç°åœ¨,è®©æˆ‘ä»¬æ¥è§£å†³ä¸¤ä¸ªé—®é¢˜:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨æ•°ç»„å†…å®¹ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ•°å­—\u003c/li\u003e\n\u003cli\u003eæ±‚æ•°ç»„çš„å¹³æ–¹\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eé¦–å…ˆ,åˆ›å»ºä¸€ä¸ªæ£€æŸ¥å‡½æ•°:\u003ccode\u003efindNumberInArr\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e match = curry(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eexpr, str\u003c/span\u003e) =\u003e\u003c/span\u003e str.match(expr))\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e hasNumber = curry(match(\u003cspan class=\"hljs-regexp\"\u003e/[0-9]+/\u003c/span\u003e))\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e filter = curry(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003efn, arr\u003c/span\u003e) =\u003e\u003c/span\u003e arr.filter(fn))\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// create fn\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e findNumberInArr = filter(hasNumber)\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// test\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003efindNumberInArr([\u003cspan class=\"hljs-string\"\u003e'demo'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'demo1'\u003c/span\u003e]) \u003cspan class=\"hljs-comment\"\u003e// output: ['demo1']\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç°åœ¨æ±‚æ•°ç»„çš„å¹³æ–¹,æˆ‘ä»¬é€šè¿‡\u003ccode\u003ecurry\u003c/code\u003eå‡½æ•°è¿›è¡Œå¤„ç†,è¿™æ¬¡ä¸è¦ç›´æ¥é€šè¿‡\u003ccode\u003emap\u003c/code\u003eå‡½æ•°ä¼ å…¥ä¸€ä¸ªå¹³æ–¹å‡½æ•°è§£å†³è¿™ä¸ªé—®é¢˜.æ¢ä¸€ä¸ªè§†è§’.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e map = curry(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003efn, arr\u003c/span\u003e) =\u003e\u003c/span\u003e arr.map(f))\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e squareAll = map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u003e\u003c/span\u003e x*x)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// ç°åœ¨,squareAll æ˜¯ä¸€ä¸ªunary å‡½æ•°\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003esquareAll([\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e]) \u003cspan class=\"hljs-comment\"\u003e// output: [1, 4, 9]\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eæˆ‘ä»¬å¯ä»¥å¾ˆå¤šåœ°æ–¹ç›´æ¥ä½¿ç”¨\u003ccode\u003esquareAll\u003c/code\u003eå‡½æ•°äº†.å¦‚æœéœ€è¦åœ¨å¤šä¸ªåœ°æ–¹æ±‚æ•°ç»„çš„å¹³æ–¹,è¿™ä¸ªå‡½æ•°å¯ä»¥ç®€åŒ–é™ä½ä»£ç é‡,å½“ç„¶,æˆ‘ä»¬è¿˜å¯ä»¥é…åˆ\u003ccode\u003ememoized\u003c/code\u003eå‡½æ•°è¿›è¡Œç¼“å­˜å¤„ç†!\u003c/p\u003e\n\u003cp\u003eæ˜¯æ—¶å€™è°ˆè°ˆ\u003ccode\u003eååº”ç”¨\u003c/code\u003eäº†,æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª\u003ccode\u003epartial\u003c/code\u003eå‡½æ•°ä»¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜.\u003c/p\u003e\n\u003cp\u003eæ¯”å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯,æˆ‘ä»¬éœ€è¦åœ¨ 10 ç§’åæ‰§è¡Œä¸€ä¸ªå‡½æ•°,è¿™ä¸ªéœ€æ±‚åœ¨å¤šä¸ªåœ°æ–¹ç”¨å¾—ä¸Š,ä¹Ÿè®¸æˆ‘ä»¬ä¼šç›´æ¥å¦‚æ­¤ç¼–ç¨‹:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e// some code\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}, \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸€æ—¦éœ€è¦åœ¨å¦ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨è¿™ä¸ªé€»è¾‘,å°±éœ€è¦é‡å†™ä¸€éè¿™äº›ä»£ç .è€Œä¸”æ— æ³•ä½¿ç”¨\u003ccode\u003ecurry\u003c/code\u003eå‡½æ•°è¿›è¡Œå¤„ç†,å› ä¸ºæ—¶é—´å‚æ•°æ˜¯æœ€åä¸€ä¸ªå‚æ•°.è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆä¹‹ä¸€å°±æ˜¯åˆ›å»ºä¸€ä¸ªå°è£…å‡½æ•°:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e setTimeoutWrapper = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003etime, fn\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(fn, time)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç„¶åä½¿ç”¨\u003ccode\u003ecurry\u003c/code\u003eå‡½æ•°è¿›è¡Œä¼˜åŒ–.ç„¶è€Œ,æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å‡å°‘åˆ›å»ºæ­¤ç±»å‡½æ•°çš„å¼€é”€.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eè¿™å°±æ˜¯ååº”ç”¨\u003c/strong\u003eçš„åº”ç”¨åœºæ™¯.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e partial = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003efn, ...partialArgs\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e args = partialArgs\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (...fullArguments) {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e arg = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e i=\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;i\u0026#x3C;args.length \u0026#x26;\u0026#x26; arg \u0026#x3C; fullArguments.length;i++\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e      \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eargs[i] === \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e        args[i] = fullArguments[arg++]\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e      }\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e    }\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e fn.apply(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, args)\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e \n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e delayTenMs = partial(\u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e demoFn = \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e16\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e// sdasdsadad\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e17\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e18\u003c/span\u003edelayTenMs(demoFn)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå†æ¬¡ä½¿ç”¨äº†é—­åŒ…,è®°ä½äº†\u003ccode\u003esetTimeout\u003c/code\u003eéœ€è¦çš„å‚æ•°åˆ—è¡¨é•¿åº¦,æš‚æœªæä¾›çš„å‚æ•°ç”¨ undefined ä»£æ›¿.åç»­è¿”å›ä¸€ä¸ªå‡½æ•°,æä¾›å‚æ•°çš„åŒæ—¶,è¡¥å…¨ä¹‹å‰ç”¨ undefined ä»£æ›¿çš„éƒ¨åˆ†å‚æ•°,æœ€ç»ˆæ‰§è¡Œå‡½æ•°.\u003c/p\u003e\n\u003cp\u003eä¾‹å¦‚,æˆ‘ä»¬éœ€è¦ç¾åŒ–ä¸€ä¸ª\u003ccode\u003ejson\u003c/code\u003eå¯¹è±¡çš„è¾“å‡º.å…ˆçœ‹çœ‹ json stringify å‡½æ•°çš„å®šä¹‰.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.stringify(value[, replacer [, space]])\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003cstrong\u003eå‚æ•°\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003evalue\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eå°†è¦åºåˆ—åŒ–æˆ ä¸€ä¸ª JSON å­—ç¬¦ä¸²çš„å€¼ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ereplacer\u003c/code\u003e å¯é€‰\u003c/p\u003e\n\u003cp\u003eå¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œè¢«åºåˆ—åŒ–çš„å€¼çš„æ¯ä¸ªå±æ€§éƒ½ä¼šç»è¿‡è¯¥å‡½æ•°çš„è½¬æ¢å’Œå¤„ç†ï¼›å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™åªæœ‰åŒ…å«åœ¨è¿™ä¸ªæ•°ç»„ä¸­çš„å±æ€§åæ‰ä¼šè¢«åºåˆ—åŒ–åˆ°æœ€ç»ˆçš„ JSON å­—ç¬¦ä¸²ä¸­ï¼›å¦‚æœè¯¥å‚æ•°ä¸º null æˆ–è€…æœªæä¾›ï¼Œåˆ™å¯¹è±¡æ‰€æœ‰çš„å±æ€§éƒ½ä¼šè¢«åºåˆ—åŒ–ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003espace\u003c/code\u003e å¯é€‰\u003c/p\u003e\n\u003cp\u003eæŒ‡å®šç¼©è¿›ç”¨çš„ç©ºç™½å­—ç¬¦ä¸²ï¼Œç”¨äºç¾åŒ–è¾“å‡ºï¼ˆpretty-printï¼‰ï¼›å¦‚æœå‚æ•°æ˜¯ä¸ªæ•°å­—ï¼Œå®ƒä»£è¡¨æœ‰å¤šå°‘çš„ç©ºæ ¼ï¼›ä¸Šé™ä¸º10ã€‚è¯¥å€¼è‹¥å°äº1ï¼Œåˆ™æ„å‘³ç€æ²¡æœ‰ç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼ˆå½“å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡10ä¸ªå­—æ¯ï¼Œå–å…¶å‰10ä¸ªå­—æ¯ï¼‰ï¼Œè¯¥å­—ç¬¦ä¸²å°†è¢«ä½œä¸ºç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°æ²¡æœ‰æä¾›ï¼ˆæˆ–è€…ä¸º nullï¼‰ï¼Œå°†æ²¡æœ‰ç©ºæ ¼ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e obj = {\u003cspan class=\"hljs-attr\"\u003efoo\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"bar\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ebar\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"foo\"\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// ç¬¬äºŒå‚æ•°\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e\u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.stringify(obj, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// æƒ³åŠæ³•ç§»é™¤æ ·æ¿ä»£ç  null å’Œ 2\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e prettyJson = partial(\u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.stringify, \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003eprettyJson(obj)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå•Š!\u003ccode\u003epartial\u003c/code\u003eå‡½æ•°æœ‰ bug.\u003ccode\u003epartialArgs\u003c/code\u003eä¼ é€’çš„æ˜¯æ•°ç»„,æ•°ç»„ä¼ é€’çš„æ˜¯å¼•ç”¨.å¦‚æœä¸åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„,å¹¶ä¸”åœ¨æœ€åé‡ç½®æ•°ç»„çš„è¯,æ‰§è¡Œä¸€æ¬¡\u003ccode\u003epartial\u003c/code\u003eåŒ–åçš„å‡½æ•°\u003ccode\u003edelayTenMs\u003c/code\u003e,å†…éƒ¨ args å°±å›ºå®šäº†,é—­åŒ…å˜é‡ä¿å­˜äº†é¦–æ¬¡æ‰§è¡Œçš„æ—¶å€™æä¾›çš„å‚æ•°å»æ›¿æ¢\u003ccode\u003eundefined\u003c/code\u003e,è¿™é‡Œçš„\u003ccode\u003eundefined\u003c/code\u003eå°±åƒå ä½ç¬¦.\u003c/p\u003e\n\u003cp\u003eä¹¦ä¸Šå¹¶æ²¡æœ‰ç»™å‡ºä¸€ä¸ªç¤ºä¾‹ä»£ç æ¥è§£å†³é—®é¢˜,åªæ˜¯æå‡ºå­˜åœ¨ bug çš„è§‚ç‚¹,æˆ‘å†™ä¸‹äº†å¦‚ä¸‹ä»£ç ,ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦é‡ç½®å ä½ç¬¦æ•ˆæœçš„\u003ccode\u003eundefined\u003c/code\u003eå˜é‡.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e partial = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003efn, ...partialArgs\u003c/span\u003e) =\u003e\u003c/span\u003e {  \n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e args = [...partialArgs]\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e...fullArgs\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e argIndex = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e index = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; index \u0026#x3C; args.length \u0026#x26;\u0026#x26; argIndex \u0026#x3C; fullArgs.length; index++) {\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e      \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eif\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eargs[index] === \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e        args[index] = fullArgs[argIndex++]\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e      }\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e    }\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = fn.apply(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, args)\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e    args = [...partialArgs]\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eæ™šå®‰.\u003c/p\u003e\n\u003cp\u003e2020å¹´12æœˆ21æ—¥01:41:11\u003c/p\u003e\n\u003ch1\u003eç®¡é“å’Œç»„åˆ\u003c/h1\u003e\n\u003cp\u003eå‡½æ•°å¼ç»„åˆåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­è¢«ç§°ä¸º\u003ccode\u003eç»„åˆ composition\u003c/code\u003e.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ¯ä¸ªç¨‹åºåªä¸ºåšå¥½ä¸€ä»¶äº‹,é‡æ„è¦æ¯”åœ¨æ—§çš„å¤æ‚ç¨‹åºä¸­æ·»åŠ æ–°å±æ€§æ›´å¥½. From KenÂ·Thompson\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ¯ä¸€ä¸ªç¨‹åºçš„è¾“å‡ºåº”è¯¥æ˜¯å¦ä¸€ä¸ªæœªçŸ¥ç¨‹åºçš„è¾“å…¥.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eæˆ‘ä»¬å°†è¦åˆ›å»º\u003ccode\u003ecompose\u003c/code\u003eå‡½æ•°,ä¾‹å¦‚:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e compose = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ea, b\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ec\u003c/span\u003e =\u003e\u003c/span\u003e a(b(c))\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¾ç„¶æ˜¯ç†Ÿæ‚‰çš„é«˜é˜¶å‡½æ•°,æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°,è¿”å›å‡½æ•°.è¿”å›çš„å‡½æ•°çš„\u003ccode\u003eå‚æ•°\u003c/code\u003eæ˜¯å…³é”®.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ecompose\u003c/code\u003eå‡½æ•°èƒ½è§£å†³æˆ‘ä»¬å¸¸è§çš„ä¸€äº›é—®é¢˜.ä½ æ˜¯å¦å†™è¿‡ç±»ä¼¼å¦‚ä¸‹ä»£ç :\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = someFn(\u003cspan class=\"hljs-string\"\u003e'this'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = otherFn(data)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸€ä¸ªå‡½æ•°çš„è¾“å‡º,ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥.\u003ccode\u003ecompose\u003c/code\u003eå‡½æ•°ä¸ºæ­¤è€Œç”Ÿ.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e getResult = compose(otherFn, someFn)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003egetResult\u003c/code\u003eæ˜¯ä¸€ä¸ªå‡½æ•°,æ¥æ”¶çš„å‚æ•°è·Ÿ\u003ccode\u003esomeFn\u003c/code\u003eå‡½æ•°ä¸€è‡´.æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°\u003ccode\u003egetResult\u003c/code\u003e.è¿™æ˜¯ä¸€ç§ä¼˜é›…è€Œç®€å•çš„å®ç°æ–¹å¼.\u003c/p\u003e\n\u003cp\u003eä¸Šè¿°\u003ccode\u003esomeFn\u003c/code\u003eåªæ¥æ”¶ä¸€ä¸ªå‚æ•°,å¦‚æœéœ€è¦æ¥æ”¶å¤šä¸ªå‚æ•°çš„è¯,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨\u003ccode\u003ecurry\u003c/code\u003eå’Œ\u003ccode\u003epartial\u003c/code\u003eä¸¤ä¸ªå‡½æ•°è¿›è¡Œä¼˜åŒ–.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eç»„åˆçš„æ€æƒ³å°±æ˜¯æŠŠå°å‡½æ•°ç»„åˆæˆå¤§å‡½æ•°,ç®€å•çš„å‡½æ•°æ˜“äºé˜…è¯»,æµ‹è¯•å’Œç»´æŠ¤.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eåˆ›å»ºå°çš„å‡½æ•°å•å…ƒ,å¯ä»¥é€šè¿‡ compose ç»„åˆé‡å»ºåº”å¯¹å„ç§éœ€æ±‚.\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯,ä¸Šè¿°\u003ccode\u003ecompose\u003c/code\u003eå‡½æ•°æ— æ³•å¤„ç†æ›´å¤šå‡½æ•°ä½œä¸ºå‚æ•°.ä»…ä»…æ”¯æŒä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°æ˜¯ä¸å¤Ÿçš„,è®©æˆ‘ä»¬æ¥ä¼˜åŒ–ä¸€ä¸‹.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e compose = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e...fns\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003evalue\u003c/span\u003e) =\u003e\u003c/span\u003e reduce(fns.reverse(), \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eacc, fn\u003c/span\u003e) =\u003e\u003c/span\u003e fn(acc), value)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç«Ÿç„¶å¦‚æ­¤ç®€å•æ¡¥é¢,æ¥æ”¶ä¸€ä¸ªå…¥å£å‚æ•°\u003ccode\u003evalue\u003c/code\u003e,é¦–å…ˆè®¾ç½®ä¸ºåˆå§‹çš„\u003ccode\u003eacc\u003c/code\u003eå€¼,ä¾æ¬¡æ‰§è¡Œå¹¶ä¸”è¿”å›ä½œä¸ºä¸‹ä¸€ä¸ªå‡½æ•°çš„å…¥å£.\u003c/p\u003e\n\u003cp\u003eç»„åˆæ˜¯ä»å³åˆ°å·¦æ‰§è¡Œçš„,è€Œç®¡é“åˆ™ä»å·¦åˆ°å³.æ¥ä¸‹æ¥åˆ›å»º\u003ccode\u003epipe\u003c/code\u003eç®¡é“å‡½æ•°.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e pipe = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e...fns\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003evalue\u003c/span\u003e =\u003e\u003c/span\u003e reduce(fns, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eacc,fn\u003c/span\u003e) =\u003e\u003c/span\u003e fn(acc), value)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eåªæ˜¯æ‰§è¡Œæ–¹å‘ä¸åŒè€Œå·²,å› æ­¤å‚æ•°åˆ—è¡¨ä¸å¿…åå‘.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eåœ¨å…¬å…±ä»£ç åº“ä¸­å»ºè®®ä½¿ç”¨å•ä¸€çš„æ•°æ®æµ,æˆ‘æ›´å–œæ¬¢ç®¡é“,å› ä¸ºè¿™è®©æˆ‘æƒ³èµ· shell çŸ¥è¯†.åŒæ—¶ä½¿ç”¨ç®¡é“å’Œç»„åˆå®¹æ˜“åœ¨å›¢é˜Ÿä¸­å¼•èµ·æ··æ·†.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eæ¥ä¸‹æ¥,æœ¬ä¹¦æè¿°äº†\u003cstrong\u003eç»„åˆ\u003c/strong\u003eçš„ä¼˜åŠ¿.\u003c/p\u003e\n\u003cp\u003eç»„åˆæ”¯æŒç»“åˆå¾‹.ä¹¦ä¸Šå¹¶æ²¡æœ‰è¯¦ç»†çš„ä»‹ç»å’Œæ¡ˆä¾‹åˆ†æ.åªæ˜¯å•çº¯ä¸¾ä¾‹:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003ecompose(f, compose(g, h)) == compose(compose(f,g), h)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eé€šè¿‡ç»„åˆå°å‡½æ•°çš„æ–¹å¼,è®©å‡½æ•°çš„ç»„åˆæ›´åŠ çµæ´».\u003c/p\u003e\n\u003cp\u003eä¸‹é¢,æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ª\u003ccode\u003eidentity\u003c/code\u003eå‡½æ•°,ç”¨äºåˆ†æè°ƒè¯•.æ¥æ”¶ä¸€ä¸ªå‚æ•°,æ‰“å°å¹¶ä¸”è¿”å›.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e identity = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eit\u003c/span\u003e =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(it)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e it\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç”±äºç»„åˆå’Œç®¡é“æ•°æ®æ˜¯æµåŠ¨çš„å…³ç³»,å¯ä»¥åœ¨å…¶é—´æ’å…¥\u003ccode\u003eidentity\u003c/code\u003eå‡½æ•°,è¾“å‡ºæ•°æ®ç”¨äºè°ƒè¯•.è¿™ç¡®å®éå¸¸ç®€å•æœ‰æ•ˆ.\u003c/p\u003e\n\u003ch1\u003eå‡½å­\u003c/h1\u003e\n\u003cp\u003eæœ¬ç« æœ€é‡è¦çš„å†…å®¹å°±æ˜¯\u003ccode\u003eç¼–ç¨‹é”™è¯¯å¤„ç†\u003c/code\u003e.æˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸ªæ–°çš„æ¦‚å¿µ:\u003ccode\u003efunctor:å‡½å­\u003c/code\u003e,å®ƒå°†ä»¥çº¯å‡½æ•°çš„å½¢å¼å¸®æˆ‘ä»¬å¤„ç†é”™è¯¯.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå‡½å­æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡,å®ƒå®ç°äº†\u003ccode\u003emap\u003c/code\u003eå‡½æ•°,åœ¨éå†æ¯ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå‡½å­æ˜¯\u003ccode\u003eå®¹å™¨\u003c/code\u003e,å…¶æŒæœ‰å€¼.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e Container = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value = val\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cblockquote\u003e\n\u003cp\u003eä¸ä½¿ç”¨ç®­å¤´å‡½æ•°,ç®­å¤´å‡½æ•°æ²¡æœ‰\u003ccode\u003e[[construct]]\u003c/code\u003eå’Œ\u003ccode\u003eprototype\u003c/code\u003eå±æ€§,æ— æ³•ç”¨\u003ccode\u003enew\u003c/code\u003eå®ä¾‹åŒ–.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eç°åœ¨,\u003ccode\u003econtainer\u003c/code\u003eå¯ä»¥æŒæœ‰ä¼ ç»™å®ƒçš„ä»»ä½•å€¼.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e a = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Container(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e=\u003e Container(value: \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e bObj = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Container({\u003cspan class=\"hljs-attr\"\u003ea\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e})\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e=\u003e Container({\u003cspan class=\"hljs-attr\"\u003ea\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e})\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç»§ç»­,åˆ›å»ºä¸€ä¸ª\u003ccode\u003eof\u003c/code\u003eé™æ€æ–¹æ³•.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003eContainer.of = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003evalue\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Container(value)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eäºæ˜¯,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨\u003ccode\u003estatic\u003c/code\u003eå‡½æ•°åˆ›å»ºå¯¹è±¡äº†.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e testObj = Container.of(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e=\u003e Container(value:\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eæ¥ä¸‹æ¥,æˆ‘ä»¬éœ€è¦åˆ›å»º\u003ccode\u003emap\u003c/code\u003eå‡½æ•°,ä¹‹åè¿™ä¾¿æ˜¯ä¸€ä¸ª\u003ccode\u003eå‡½å­\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://i.loli.net/2020/12/24/vX1AIKxhgOlQzMd.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eçœ‹ä»£ç :\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003eContainer.prototype.map = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efn\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Container.of(fn(\u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value))\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç»è¿‡\u003ccode\u003emap\u003c/code\u003eå‡½æ•°å¤„ç†,ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ container å¯¹è±¡.äºæ˜¯,æˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹ç¼–ç :\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e double = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u003e\u003c/span\u003e x + x\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003eContainer.of(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e).map(double)\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e=\u003e Container(\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003eContainer.of(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e).map(double).map(double)\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e=\u003e Container(\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå¾—åˆ°äº†æˆ‘ä¸ªäººä¸€ç›´ä»¥æ¥ä¸å¤Ÿäº†è§£çš„é“¾å¼è°ƒç”¨çš„å®ç°æ€è·¯.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå‡½å­æ˜¯ä¸€ä¸ªå®ç°äº† map å¥‘çº¦çš„å¯¹è±¡\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eæ‰€ä»¥,å‡½å­èƒ½ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e MayBe = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value = val\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003eMayBe.of = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ev\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MayBe(v)\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003eMayBe.prototype.isNothing = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value === \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e || \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value === \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e) \n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003eMayBe.prototype.map = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003efn\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.isNothing() ? MayBe.of(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e) : MayBe.of(\u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value)\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e:construction_worker:\u003c/p\u003e\n\u003cp\u003eä¸Šç”¨ä¾‹\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003eMayBe.of(\u003cspan class=\"hljs-string\"\u003e'string'\u003c/span\u003e).map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u003e\u003c/span\u003e x.toUpperCase())\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e=\u003e MayBe {\u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'STRING'\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå³ä½¿ä¸æ˜¯\u003ccode\u003etypescript\u003c/code\u003e,æ— æ³•é¿å…\u003ccode\u003eof\u003c/code\u003eæ–¹æ³•ä¼ å…¥\u003ccode\u003enull\u003c/code\u003eæˆ–è€…\u003ccode\u003eundefined\u003c/code\u003e,å†…éƒ¨çš„\u003ccode\u003emap\u003c/code\u003eæ–¹æ³•ä¹Ÿä¼šåšä¸€æ¬¡æ£€æŸ¥,é€»è¾‘æŠ½è±¡å‡ºæ¥é¿å…äº†é”™è¯¯.ä»£ç æ²¡æœ‰åœ¨\u003ccode\u003enull\u003c/code\u003eæˆ–è€…\u003ccode\u003eundefined\u003c/code\u003eä¸‹å´©æºƒ.è¿™æ˜¯ä¸€ç§å£°æ˜å¼çš„æ–¹å¼å»ç¼–ç¨‹,è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå®‰å…¨çš„å®¹å™¨.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003eMayBe.of(\u003cspan class=\"hljs-string\"\u003e'pg'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\t.map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u003e\u003c/span\u003e x.toUpperCase())\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e\t.map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u003e\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e`Mr. \u003cspan class=\"hljs-subst\"\u003e${x}\u003c/span\u003e`\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eé“¾å¼è°ƒç”¨,ä¼˜ç¾ç®€æ´.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eå¦ä¸€ä¸ªå‡½å­\u003c/strong\u003e\u003ccode\u003eEither\u003c/code\u003e,ä¸Šè¿°\u003ccode\u003eMayBe\u003c/code\u003eå‡½å­åœ¨ä¼ å…¥\u003ccode\u003enull\u003c/code\u003eæˆ–è€…\u003ccode\u003eundefined\u003c/code\u003eå,æœ€åçš„ç»“æœæ˜¯\u003ccode\u003enull\u003c/code\u003e.å¯æ˜¯æˆ‘ä»¬å¾ˆéš¾åˆ†æå‡ºé—®é¢˜å‡ºåœ¨å“ªé‡Œ.æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´å¼ºå¤§çš„å‡½å­,è§£å†³åˆ†æ”¯æ‹“å±•çš„é—®é¢˜.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e Nothing = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value = val\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003eNothing.of = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ev\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Nothing(v)\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003eNothing.prototype.map = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ef\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e Some = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eval\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value = val\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003eSome.of = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ev\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Some(v)\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e16\u003c/span\u003eSome.prototype.map = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ef\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e17\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Some.of(f(\u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value))\n\u003cspan class=\"lineNumber\"\u003e18\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003eNothing\u003c/code\u003eçš„ map å‡½æ•°,è¿”å›è‡ªèº«,è€Œä¸æ˜¯è¿è¡Œå‡½æ•°\u003ccode\u003ef\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e2020å¹´12æœˆ25æ—¥12:57:10\t:100:\u003c/p\u003e\n\u003cp\u003eèƒ½åœ¨\u003ccode\u003eSome\u003c/code\u003eä¸Šè¿è¡Œå‡½æ•°,è€Œ\u003ccode\u003eNothing\u003c/code\u003eä¸è¡Œ.æ¥å§,å®ç°\u003ccode\u003eEither\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e Either = {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  Some,\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  Nothing\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ª\u003ccode\u003eweb\u003c/code\u003eè¯·æ±‚,è¿”å›æ•°æ®å¯èƒ½æ˜¯æ­£å¸¸æ•°æ®,æˆ–è€…ä¸€æ¡é”™è¯¯ä¿¡æ¯.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e getData =\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003etype\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e resp;\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    resp = Some.of(data)\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e    resp = Nothing.of(error)\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eåç»­è¿”å›çš„ response å¯¹è±¡ä¾ç„¶æ˜¯å‡½å­,å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨çš„ map å‡½æ•°.ä½†æ˜¯,é”™è¯¯ä¿¡æ¯èƒ½ä¿å­˜ä¸‹å»,\u003ccode\u003eNothing\u003c/code\u003eä»å¤´åˆ°å°¾éƒ½ä¸ä¼šå˜,ç›´æ¥è¿”å›\u003ccode\u003ethis\u003c/code\u003eä½¿å¾—åç»­çš„ map å‡½æ•°\u003ccode\u003eå¤±æ•ˆ\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eç°åœ¨,ä½ æ ¹æ®ä¸Šä¸‹æ–‡,å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºå¼‚å¸¸å‡ºåœ¨å“ªé‡Œ.æ˜¯çš„,æ˜¯\u003ccode\u003ecatch\u003c/code\u003eåˆ°äº†é”™è¯¯.\u003c/p\u003e\n\u003cp\u003eä¸Šè¿°å‡½å­éƒ½æ˜¯\u003ccode\u003epointed\u003c/code\u003eå‡½å­,ES6 çš„ Array.of ä¹Ÿæ˜¯\u003ccode\u003epointed\u003c/code\u003eå‡½å­.\u003c/p\u003e\n\u003ch1\u003eæ·±å…¥ç†è§£ Monad å‡½å­\u003c/h1\u003e\n\u003cp\u003e\u003ccode\u003ereddit\u003c/code\u003eå¼€æ”¾äº†ä¸€äº›\u003ccode\u003eapi\u003c/code\u003eæ¥å£,ä¾‹å¦‚:\u003cstrong\u003ehttps://www.reddit.com/search.json?q=something\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eç²˜è´´ä¸€ä¸ªéšæœºçš„è¿”å›æ•°æ®,ä¸å¿…è¯¦ç»†æ·±ç©¶:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-attr\"\u003e\"kind\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Listing\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-attr\"\u003e\"data\"\u003c/span\u003e: {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    \u003cspan class=\"hljs-attr\"\u003e\"after\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"t3_k1qcrx\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    \u003cspan class=\"hljs-attr\"\u003e\"dist\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e    \u003cspan class=\"hljs-attr\"\u003e\"facets\"\u003c/span\u003e: {}.\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e    \u003cspan class=\"hljs-string\"\u003e\"modhash\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e,\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e    \u003cspan class=\"hljs-attr\"\u003e\"children\"\u003c/span\u003e: [...],\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e  \u003cspan class=\"hljs-attr\"\u003e\"before\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003echildren\u003c/code\u003eéƒ¨åˆ†éå¸¸åºå¤§,ä¸å†å±•å¼€.æ¯ä¸€ä¸ª\u003ccode\u003echildren\u003c/code\u003eéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡,å†…å«ä¸€ä¸ª\u003ccode\u003ePermalink\u003c/code\u003eé”®,å€¼æ˜¯ä¸€ä¸ªç›¸å¯¹\u003ccode\u003eurl\u003c/code\u003e,è®¿é—®è¿™ä¸ª\u003ccode\u003eurl\u003c/code\u003eåˆ™èƒ½è·å–åˆ°è¯„è®ºæ•°ç»„.\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬å¦‚ä½•æŒ‰æœç´¢çš„ç»“æœ,è·å–æ–‡ç« çš„è¯„è®º,æœ€åè¿”å›ä¸€ä¸ªæ•°ç»„,æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå¯¹è±¡,å¯¹è±¡å†…æ˜¯\u003ccode\u003etitle\u003c/code\u003eå’Œ\u003ccode\u003ecomments\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e request = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'sync-request'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e searchReddit = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003esearch\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e response\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    response = \u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.parse(request(\u003cspan class=\"hljs-string\"\u003e'GET'\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e'https://www.reddit.com/saerch.json?q='\u003c/span\u003e + \u003cspan class=\"hljs-built_in\"\u003eencodeURI\u003c/span\u003e(search)).getBody(\u003cspan class=\"hljs-string\"\u003e'utf8'\u003c/span\u003e))    \n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e  } \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003ecatch\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e    response = { \u003cspan class=\"hljs-attr\"\u003emsg\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'something wrong'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eerrorCode\u003c/span\u003e: err[\u003cspan class=\"hljs-string\"\u003e'statusCode'\u003c/span\u003e]}\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e \n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e getComments = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003elink\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e13\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e resp;\n\u003cspan class=\"lineNumber\"\u003e14\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e15\u003c/span\u003e    resp = \u003cspan class=\"hljs-built_in\"\u003eJSON\u003c/span\u003e.parse(request(\u003cspan class=\"hljs-string\"\u003e'GET'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'https://www.reddit.com/'\u003c/span\u003e + link).getBody(\u003cspan class=\"hljs-string\"\u003e'utf8'\u003c/span\u003e))\n\u003cspan class=\"lineNumber\"\u003e16\u003c/span\u003e  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (err) {\n\u003cspan class=\"lineNumber\"\u003e17\u003c/span\u003e    resp = {\n\u003cspan class=\"lineNumber\"\u003e18\u003c/span\u003e      \u003cspan class=\"hljs-attr\"\u003emsg\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'get comment failed'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eerrorCode\u003c/span\u003e: err[\u003cspan class=\"hljs-string\"\u003e'statusCode'\u003c/span\u003e]\n\u003cspan class=\"lineNumber\"\u003e19\u003c/span\u003e    }    \n\u003cspan class=\"lineNumber\"\u003e20\u003c/span\u003e  }\n\u003cspan class=\"lineNumber\"\u003e21\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e resp\n\u003cspan class=\"lineNumber\"\u003e22\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e23\u003c/span\u003e \n\u003cspan class=\"lineNumber\"\u003e24\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// åˆå¹¶ä¸¤ä¸ªå‡½æ•°\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e25\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mergeViaMayBe = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003esearchText\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e26\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e redditMayBe = MayBe.of(searchReddit(searchText))\n\u003cspan class=\"lineNumber\"\u003e27\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e ans = redditMayBe\n\u003cspan class=\"lineNumber\"\u003e28\u003c/span\u003e  \t.map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003earr\u003c/span\u003e =\u003e\u003c/span\u003e arr[\u003cspan class=\"hljs-string\"\u003e'data'\u003c/span\u003e])\n\u003cspan class=\"lineNumber\"\u003e29\u003c/span\u003e  \t.map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003earr\u003c/span\u003e =\u003e\u003c/span\u003e arr[\u003cspan class=\"hljs-string\"\u003e'children'\u003c/span\u003e])\n\u003cspan class=\"lineNumber\"\u003e30\u003c/span\u003e  \t.map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003earr\u003c/span\u003e =\u003e\u003c/span\u003e map(arr, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e31\u003c/span\u003e      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e32\u003c/span\u003e        \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: x[\u003cspan class=\"hljs-string\"\u003e'data'\u003c/span\u003e].title,\n\u003cspan class=\"lineNumber\"\u003e33\u003c/span\u003e        \u003cspan class=\"hljs-attr\"\u003epermalink\u003c/span\u003e: x[\u003cspan class=\"hljs-string\"\u003e'data'\u003c/span\u003e].permalink\n\u003cspan class=\"lineNumber\"\u003e34\u003c/span\u003e      }\n\u003cspan class=\"lineNumber\"\u003e35\u003c/span\u003e    }))\n\u003cspan class=\"lineNumber\"\u003e36\u003c/span\u003e  .map(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eobj\u003c/span\u003e =\u003e\u003c/span\u003e map(obj, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e37\u003c/span\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e38\u003c/span\u003e      \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: x.title,\n\u003cspan class=\"lineNumber\"\u003e39\u003c/span\u003e      \u003cspan class=\"hljs-attr\"\u003ecomments\u003c/span\u003e: MayBe.of(getComments(x.permalink.replace(\u003cspan class=\"hljs-string\"\u003e'?ref=search_posts'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'.json'\u003c/span\u003e)))\n\u003cspan class=\"lineNumber\"\u003e40\u003c/span\u003e    }\n\u003cspan class=\"lineNumber\"\u003e41\u003c/span\u003e  }))\n\u003cspan class=\"lineNumber\"\u003e42\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eè¿ç”¨å‡½å­,å¯ä»¥ä½¿ç”¨é“¾å¼æ–¹æ³•è§£å†³é—®é¢˜,éå¸¸ä¼˜é›….\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯,è¿™ä¾ç„¶ä¸å¤Ÿ,è§‚å¯Ÿä¸Šè¿°ç»“æœä¸­\u003ccode\u003ecomments\u003c/code\u003eä¾ç„¶æ˜¯\u003ccode\u003eMayBe\u003c/code\u003eå¯¹è±¡,æƒ³è¦çœŸæ­£å–å€¼è¿˜æ˜¯éœ€è¦ç»§ç»­\u003ccode\u003emap\u003c/code\u003eè°ƒç”¨.\u003c/p\u003e\n\u003cp\u003eä¸‹é¢,ä»‹ç»\u003ccode\u003eMonad\u003c/code\u003eå‡½å­ä»¥è§£å†³è¿‡å¤šçš„\u003ccode\u003emap\u003c/code\u003eåµŒå¥—é—®é¢˜.è®©\u003ccode\u003eMayBe\u003c/code\u003eæ­¦è£…åˆ°ç‰™é½¿.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003eMayBe.prototype.join = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.isNothing() ? MayBe.of(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e) : \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.value\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e joinExample = MayBe.of(MayBe.of(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e))\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e=\u003e MayBe{\u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: MayBe{\u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e}}\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003ejoinExample.join()\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// è¿”å›å€¼å±•å¼€ä¸€ä¸ªå±‚çº§\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e=\u003e MayBe {\u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eå¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹å†…éƒ¨çš„å€¼è¿›è¡Œæ“ä½œ,ä¹Ÿè®¸å¯ä»¥å…ˆå±•å¼€å±‚çº§,å†æ‰§è¡Œ\u003ccode\u003emap\u003c/code\u003eå‡½æ•°,ä»¥å‡å°‘\u003ccode\u003emap\u003c/code\u003eçš„è°ƒç”¨.é‚£ä¹ˆæ—¢ç„¶å½“æˆ‘ä»¬éœ€è¦å±•å¼€ä¸€å±‚çš„æ—¶å€™éƒ½éœ€è¦åœ¨åé¢è·Ÿä¸€ä¸ª\u003ccode\u003ejoin\u003c/code\u003eæ–¹æ³•,æˆ‘ä»¬å¯ä»¥å†å°è£…ä¸€ä¸ª\u003ccode\u003echain\u003c/code\u003eå‡½æ•°æ¥åšè¿™ä»¶äº‹.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003eMayBe.prototype.chain = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ef\u003c/span\u003e)\u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ethis\u003c/span\u003e.map(f).join()\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003eMonad\u003c/code\u003eå°±æ˜¯åŒ…å«\u003ccode\u003echain\u003c/code\u003eæ–¹æ³•çš„ç‰¹æ®Šå‡½å­.æˆ–è€…è¯´,ä¸€ä¸ªå‡½å­æ‹¥æœ‰\u003ccode\u003echain\u003c/code\u003eæ–¹æ³•,å°±å¯ä»¥ç§°ä¸º\u003ccode\u003eMonad\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e2020å¹´12æœˆ26æ—¥01:34:57\u003c/p\u003e\n\u003ch1\u003eä½¿ç”¨ Generator\u003c/h1\u003e\n\u003cp\u003eå¦‚æœä½ æ˜¯\u003ccode\u003epromise\u003c/code\u003eçš„ç²‰ä¸,å»ºè®®å­¦ä¹ \u003ccode\u003eGenerator\u003c/code\u003eåŠå…¶è§£å†³å¼‚æ­¥ä»£ç é—®é¢˜çš„æ–¹å¼.\u003c/p\u003e\n\u003cp\u003eè®©æˆ‘ä»¬å…ˆæ¥è°ˆè°ˆ\u003ccode\u003eåŒæ­¥å’Œå¼‚æ­¥\u003c/code\u003e:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eåŒæ­¥:å‡½æ•°æ‰§è¡Œçš„æ—¶å€™é˜»å¡è°ƒç”¨è€…,ç›´åˆ°å‡½æ•°æ‰§è¡Œç»“æŸè¿”å›ç»“æœ.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå¼‚æ­¥:å‡½æ•°æ‰§è¡Œä¸ä¼šé˜»å¡,ä½†æ˜¯å‡½æ•°æ‰§è¡Œç»“æŸå°±ä¼šè¿”å›ç»“æœ.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè®©æˆ‘ä»¬æ¥åˆ›å»º\u003ccode\u003eGenerator\u003c/code\u003e,æ³¨æ„è§‚å¯Ÿè¿™ä¸ªç‰¹æ®Šè¯­æ³•.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e * \u003cspan class=\"hljs-title\"\u003egen\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'first generator'\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eæˆ‘ä»¬åœ¨å‡½æ•°å‰é¢ç”¨ä¸€ä¸ªæ˜Ÿå· \u003cstrong\u003e*\u003c/strong\u003e æ¥è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª\u003ccode\u003eGenerator\u003c/code\u003eå‡½æ•°.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e genResult = gen()\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eæ­¤åˆ»,\u003ccode\u003egenResult\u003c/code\u003eå¹¶ä¸æ˜¯\u003ccode\u003efirst generator\u003c/code\u003e,è€Œæ˜¯:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003egen {[[GeneratorStatus]]: \"suspended\", [[GeneratorRecevier]]: Window}\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eè¿™æ˜¯ä¸€ä¸ª\u003ccode\u003eGenerator\u003c/code\u003eåŸå§‹ç±»å‹çš„å®ä¾‹.è¿™ä¸ªå®ä¾‹æ‹¥æœ‰\u003ccode\u003enext\u003c/code\u003eæ–¹æ³•.æ‰§è¡Œæ­¤æ–¹æ³•,ä¸Šé¢çš„ä»£ç è¿”å›ä¸€ä¸ªå¯¹è±¡:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e{value: 'first generator', done: true}\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eGenerator\u003c/code\u003eå®ä¾‹å¦‚åŒåºåˆ—,ä¸€æ—¦ä½¿ç”¨\u003ccode\u003enext\u003c/code\u003eæ¶ˆè´¹,åˆ™ä¸èƒ½å†æ¬¡å¾—åˆ°ä¸Šæ¬¡æ¶ˆè´¹çš„å€¼.ä¹Ÿå°±æ˜¯è¯´,å¦‚æœä½ ç»§ç»­æ‰§è¡Œ\u003ccode\u003enext()\u003c/code\u003eæ–¹æ³•,ç»“æœçš„\u003ccode\u003evaue\u003c/code\u003eå°†æ˜¯\u003ccode\u003eundefined\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e * \u003cspan class=\"hljs-title\"\u003egen\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eæœ‰è¶£çš„æ˜¯,å®ä¾‹æ‰§è¡Œ\u003ccode\u003enext\u003c/code\u003eå°†ä¼šè¿”å›\u003ccode\u003eyield\u003c/code\u003eåçš„ç»“æœ,å¹¶ä¸”ä¸‹æ¬¡æ‰§è¡Œ\u003ccode\u003enext\u003c/code\u003eä¼šä»å½“å‰\u003ccode\u003eyield\u003c/code\u003eåç»§ç»­æ‰§è¡Œ.å½“æ‰€æœ‰\u003ccode\u003eyield\u003c/code\u003eç»“æœéƒ½æ¶ˆè´¹ä¹‹å,\u003ccode\u003edone\u003c/code\u003eå±æ€§å˜æˆ\u003ccode\u003etrue\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e genResult = gen()\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e v \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e genResult()\u003c/span\u003e)\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(v)\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// 1\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// 2\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// 3\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003e\u003ccode\u003efor..of..\u003c/code\u003eåˆ©ç”¨äº†\u003ccode\u003enext\u003c/code\u003eå’Œ\u003ccode\u003edone\u003c/code\u003eå±æ€§å®Œæˆéå†.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eGenerator\u003c/code\u003eä¸æ­¢å¦‚æ­¤,è¿˜å¯ä»¥æƒ³å…¶å®ä¾‹é€šè¿‡\u003ccode\u003enext\u003c/code\u003eå‡½æ•°ä¼ é€’æ•°æ®.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e * \u003cspan class=\"hljs-title\"\u003esayFullName\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e)\u003c/span\u003e{\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e firstName = \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e secondName = \u003cspan class=\"hljs-keyword\"\u003eyield\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${firstName}\u003c/span\u003e - \u003cspan class=\"hljs-subst\"\u003e${secondName}\u003c/span\u003e`\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e \n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e// call it\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e fullName = sayFullName()\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003efullName.next()\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003efullName.next(\u003cspan class=\"hljs-string\"\u003e'Fname'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003efullName.next(\u003cspan class=\"hljs-string\"\u003e'Sname'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e12\u003c/span\u003e=\u003e \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e log : Fname - Sname\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eé¦–æ¬¡è¿è¡Œ\u003ccode\u003enext\u003c/code\u003e,å‡½æ•°æš‚åœäº: \u003ccode\u003elet firstName = yield\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eå†æ¬¡è¿è¡Œå¸¦å‚æ•°çš„\u003ccode\u003enext\u003c/code\u003e,åˆ™\u003ccode\u003elet firstName = yield\u003c/code\u003eè½¬ä¸º\u003ccode\u003elet firstName = \"Fname\"\u003c/code\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eGenerator\u003c/code\u003eä¸\u003ccode\u003eå¼‚æ­¥åº”ç”¨\u003c/code\u003eå¯ä»¥å¾ˆå’Œè°.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå‡å¦‚æœ‰ä¸¤ä¸ªæœ¬è´¨ä¸Šæ˜¯å¼‚æ­¥çš„å‡½æ•°å¦‚ä¸‹:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e getDataOne = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ecb\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e    cb(\u003cspan class=\"hljs-string\"\u003e'dummy data one'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e  }, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e}\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e \n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e getDataTwo = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ecb\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e9\u003c/span\u003e    cb(\u003cspan class=\"hljs-string\"\u003e'dummy data two'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e10\u003c/span\u003e  }, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e11\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eä¸€æ—¦æ—¶é—´è¿‡å»,å°±æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°\u003ccode\u003ecb\u003c/code\u003e.å¦‚æœè¦ç”¨\u003ccode\u003egenerator\u003c/code\u003eæ¥è§£å†³å›è°ƒå‡½æ•°å¯èƒ½å¯¼è‡´çš„å‡½æ•°å›è°ƒåœ°ç‹±çš„é—®é¢˜?\u003c/p\u003e\n\u003cp\u003eè®©æˆ‘ä»¬æ¥æ”¹é€ \u003ccode\u003egetDataOne\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"lineNumber\"\u003e1\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e geneator;\n\u003cspan class=\"lineNumber\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e getDataOne = \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e3\u003c/span\u003e  \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n\u003cspan class=\"lineNumber\"\u003e4\u003c/span\u003e    \u003cspan class=\"hljs-comment\"\u003e// è°ƒç”¨ Generator\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e5\u003c/span\u003e    \u003cspan class=\"hljs-comment\"\u003e// ä½¿ç”¨ next åŠ å‚æ•°ä¼ é€æ•°æ®\u003c/span\u003e\n\u003cspan class=\"lineNumber\"\u003e6\u003c/span\u003e    generator.next(\u003cspan class=\"hljs-string\"\u003e'fake data one'\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e7\u003c/span\u003e  }, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n\u003cspan class=\"lineNumber\"\u003e8\u003c/span\u003e}\u003c/code\u003e\u003c/pre\u003e \n\n\u003cp\u003eç„¶è€Œ,æˆ‘å¹¶ä¸æ˜¯å¾ˆç†è§£è¿™æ®µä»£ç ,\u003ccode\u003egenerator\u003c/code\u003eæ˜¯\u003ccode\u003eundefined\u003c/code\u003e,ä¸ºä½•è°ƒç”¨\u003ccode\u003enext\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e2020å¹´12æœˆ26æ—¥22:56:50\u003c/p\u003e\n\u003cp\u003e2020 å¹´å³å°†ç»“æŸ,åœ¨å¼‚æ­¥ç¼–ç¨‹çš„é—®é¢˜ä¸Šè®©æˆ‘ä»¬æ‹¥æŠ±\u003ccode\u003easync\u003c/code\u003eå’Œ\u003ccode\u003eawait\u003c/code\u003eå§.\u003c/p\u003e\n\u003cp\u003eç»ˆäºçœ‹å®Œäº†è¿™æœ¬ä¹¦,è¿™æœ¬ä¹¦éå¸¸é€‚åˆæˆ‘ç°åœ¨çš„æ°´å¹³,è®©æˆ‘èƒ½å¤Ÿå­¦ä¹ å¾—å¾ˆæ„‰å¿«.å†æ¬¡æ„Ÿè°¢,å³ä½¿æ˜¨å¤©æ˜¯åœ£è¯èŠ‚æˆ‘ä¾ç„¶ä¸€ä¸ªäººè¿‡.\u003c/p\u003e\n\u003cp\u003eå†ä¼šå•¦.\u003c/p\u003e\n","title":"Javascript-ES6-å‡½æ•°å¼ç¼–ç¨‹é˜…è¯»éšå†™","date":"2020/12/16","tags":["Javascript"],"mainImg":"https://images.unsplash.com/photo-1569585723035-0e9e6ff87cbf?crop=entropy\u0026cs=tinysrgb\u0026fit=max\u0026fm=jpg\u0026ixid=MXwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8\u0026ixlib=rb-1.2.1\u0026q=80\u0026w=1080","coverImg":"https://images.unsplash.com/photo-1569585723035-0e9e6ff87cbf?crop=entropy\u0026cs=tinysrgb\u0026fit=max\u0026fm=jpg\u0026ixid=MXwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8\u0026ixlib=rb-1.2.1\u0026q=80\u0026w=400","intro":"ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™æœ¬ä¹¦çš„æ—¶å€™,è®°å¾—æ˜¯å‡ å¹´å‰åœ¨æ¡‚ç”µå›¾ä¹¦é¦†é‡Œ,æ–­æ–­ç»­ç»­çœ‹äº†å…­ç« ,åæ¥ä¾¿ç¦»å¼€äº†å­¦æ ¡.ç°åœ¨ä¹°äº†çº¸è´¨ä¹¦æ‰“ç®—é‡æ–°çœ‹ä¸€é,è¿™é‡Œè®°å½•ä¸‹é˜…è¯»éšæƒ³."}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"Javascript-ES6-å‡½æ•°å¼ç¼–ç¨‹é˜…è¯»éšå†™"},"buildId":"OGKvovVNTYwR5ZOAKwkox","assetPrefix":"/blog","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/blog/_next/static/chunks/polyfills-86dac49abe0e0232b575.js"></script><script src="/blog/_next/static/chunks/main-bc20978b5b49cb620506.js" async=""></script><script src="/blog/_next/static/chunks/webpack-eb080e3f091731f228fb.js" async=""></script><script src="/blog/_next/static/chunks/framework.9ec1f7868b3e9d138cdd.js" async=""></script><script src="/blog/_next/static/chunks/commons.d877dcdd17afd7219ae3.js" async=""></script><script src="/blog/_next/static/chunks/6335da8543c52d3af527c387f688061357787349.7e9e1b66dd81783d6900.js" async=""></script><script src="/blog/_next/static/chunks/pages/_app-4e649ed46ef47e92b24e.js" async=""></script><script src="/blog/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.c2ce14a235a03ef7811d.js" async=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-3688e52283fbbc34d9ae.js" async=""></script><script src="/blog/_next/static/OGKvovVNTYwR5ZOAKwkox/_buildManifest.js" async=""></script><script src="/blog/_next/static/OGKvovVNTYwR5ZOAKwkox/_ssgManifest.js" async=""></script></body></html>