---
title: 'windows终端代理设置'
date: '2021/3/16'
tags:
- windows
mainImg: 'https://images.unsplash.com/photo-1614008999392-01f06cc73b43?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MTU4OTQ1NDY&ixlib=rb-1.2.1&q=80&w=1080'
coverImg: 'https://images.unsplash.com/photo-1614008999392-01f06cc73b43?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxNjUyNjZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MTU4OTQ1NDY&ixlib=rb-1.2.1&q=80&w=400'
intro: '办公电脑是windows系统,需要在日常的终端使用中越过长城,走向世界.在此分享终端代理和WSL代理的设置.'
---

办公电脑是一台老旧的台式机，而且公司采购了加密软件，无法适配`linux`系统,我只能使用`windows+wsl`作为日常使用环境.在日常使用中,经常需要走向世界去搜索或者阅读和下载源码,因此我有一个过墙梯也是很合理的对吧.

# 1. WSL proxy

对于`wsl`,首先需呀查看`resovle.conf`文件,获取网关地址,也就是主机地址.

```shell
➜  ~ cat /etc/resolv.conf 
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver 172.31.208.1
```

得到`主机地址`是 172.23.160.1 ,于是修改默认shell的配置文件,我使用的是`zsh`,因此直接对`~/.zshrc`进行修改.

```shell
# .zshrc
function set-proxy(){
        export https_proxy=172.31.208.1:10800
        export http_proxy=172.31.208.1:10800
}

function clear-proxy(){
        unset http_proxy
        unset https_proxy
}
```

直接使用两个函数进行绑定代理,代理地址是上述解析到的主机地址,端口则是代理软件设置的端口号.

# 2. Powershell Proxy

在`windows`下,我习惯使用最新版本的`powershell`,直接在终端进行操作:

```powershell
# 记事本打开配置文件,没有则先创建
notepad $profile

# 编辑文件
# 添加函数
function set-proxy() {
	$Env:https_proxy="http://your_ip:port"
	$Env:http_proxy="http://your_ip:port"
}

function unset-proxy() {
	$Env:https_proxy=""
	$Env:http_proxy=""
}

# 退出记事本后,在终端重置配置文件
. $profile
```

接着就可以开启或者关闭终端代理了.

# 3. Git proxy

`git`没有代理也很不爽,可以通过全局配置设置下载和上传的代理:

```powershell
git config --global http.proxy ip:port
git config --global https.proxy ip:port
```



这里就要多说一句,作为一个眼界开阔的开发者,有一个速度快,稳定性强的好梯子,也很合理吧!